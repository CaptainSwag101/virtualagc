/*
  File SETUP_REARRANGE.c generated by XCOM-I, 2024-08-09 12:41:08.
*/

#include "runtimeC.h"

descriptor_t *
SETUP_REARRANGE (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (descriptor_t *)0;
    }
  reentryGuard = guardReentry (reentryGuard, "SETUP_REARRANGE");
  // IF TRACE THEN (4882)
  if (1 & (bitToFixed (getBIT (8, mTRACE))))
    // OUTPUT = 'SETUP_REARRANGE'; (4883)
    {
      descriptor_t *stringRHS;
      stringRHS = cToDescriptor (NULL, "SETUP_REARRANGE");
      OUTPUT (0, stringRHS);
      stringRHS->inUse = 0;
    }
  // IF NONCOMMUTATIVE THEN (4884)
  if (1 & (bitToFixed (getBIT (8, mNONCOMMUTATIVE))))
    // DO; (4885)
    {
    rs1:;
      // PNPARITY0#,FNPARITY0#,MPARITY0# = CSE_FOUND_INX - 1; (4886)
      {
        int32_t numberRHS
            = (int32_t)(xsubtract (COREHALFWORD (mCSE_FOUND_INX), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mPNPARITY0p, bitRHS);
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mFNPARITY0p, bitRHS);
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mMPARITY0p, bitRHS);
        bitRHS->inUse = 0;
      }
      // ; (4887)
      ;
      // PNPARITY1#,FNPARITY1#,MPARITY1# = 0; (4888)
      {
        int32_t numberRHS = (int32_t)(0);
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mPNPARITY1p, bitRHS);
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mFNPARITY1p, bitRHS);
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mMPARITY1p, bitRHS);
        bitRHS->inUse = 0;
      }
      // TOTAL_MATCH_PREV,TOTAL_MATCH_PRES = TRUE; (4889)
      {
        int32_t numberRHS = (int32_t)(1);
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (8, mTOTAL_MATCH_PREV, bitRHS);
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (8, mTOTAL_MATCH_PRES, bitRHS);
        bitRHS->inUse = 0;
      }
    es1:;
    } // End of DO block
  // ELSE (4890)
  else
    // DO; (4891)
    {
    rs2:;
      // MPARITY1# = 0; (4892)
      {
        int32_t numberRHS = (int32_t)(0);
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mMPARITY1p, bitRHS);
        bitRHS->inUse = 0;
      }
      // DO FOR INX = 1 TO CSE_FOUND_INX - 1; (4893)
      {
        int32_t from114, to114, by114;
        from114 = 1;
        to114 = xsubtract (COREHALFWORD (mCSE_FOUND_INX), 1);
        by114 = 1;
        for (putBIT (16, mSETUP_REARRANGExINX, fixedToBit (16, from114));
             bitToFixed (getBIT (16, mSETUP_REARRANGExINX)) <= to114; putBIT (
                 16, mSETUP_REARRANGExINX,
                 fixedToBit (16, bitToFixed (getBIT (16, mSETUP_REARRANGExINX))
                                     + by114)))
          {
            // IF SHR(CSE(INX),20) THEN (4894)
            if (1
                & (SHR (
                    getFIXED (mCSE + 4 * COREHALFWORD (mSETUP_REARRANGExINX)),
                    20)))
              // MPARITY1# = MPARITY1# + 1; (4895)
              {
                int32_t numberRHS
                    = (int32_t)(xadd (COREHALFWORD (mMPARITY1p), 1));
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mMPARITY1p, bitRHS);
                bitRHS->inUse = 0;
              }
          }
      } // End of DO for-loop block
      // MPARITY0# = CSE_FOUND_INX - MPARITY1# - 1; (4896)
      {
        int32_t numberRHS
            = (int32_t)(xsubtract (xsubtract (COREHALFWORD (mCSE_FOUND_INX),
                                              COREHALFWORD (mMPARITY1p)),
                                   1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mMPARITY0p, bitRHS);
        bitRHS->inUse = 0;
      }
      // INX = NODE_BEGINNING - 1; (4897)
      {
        int32_t numberRHS
            = (int32_t)(xsubtract (COREHALFWORD (mNODE_BEGINNING), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mSETUP_REARRANGExINX, bitRHS);
        bitRHS->inUse = 0;
      }
      // FNPARITY0#, FNPARITY1# = 0; (4898)
      {
        int32_t numberRHS = (int32_t)(0);
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mFNPARITY0p, bitRHS);
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mFNPARITY1p, bitRHS);
        bitRHS->inUse = 0;
      }
      // DO WHILE NODE(INX) ~= END_OF_NODE; (4899)
      while (
          1
          & (xNEQ (getFIXED (mNODE + 4 * COREHALFWORD (mSETUP_REARRANGExINX)),
                   getFIXED (mEND_OF_NODE))))
        {
          // IF NODE(INX) ~= 0 THEN (4900)
          if (1
              & (xNEQ (
                  getFIXED (mNODE + 4 * COREHALFWORD (mSETUP_REARRANGExINX)),
                  0)))
            // DO; (4901)
            {
            rs2s2s1:;
              // IF SHR(NODE(INX),20) THEN (4902)
              if (1
                  & (SHR (getFIXED (mNODE
                                    + 4 * COREHALFWORD (mSETUP_REARRANGExINX)),
                          20)))
                // FNPARITY1# = FNPARITY1# + 1; (4903)
                {
                  int32_t numberRHS
                      = (int32_t)(xadd (COREHALFWORD (mFNPARITY1p), 1));
                  descriptor_t *bitRHS;
                  bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                  putBIT (16, mFNPARITY1p, bitRHS);
                  bitRHS->inUse = 0;
                }
              // ELSE (4904)
              else
                // FNPARITY0# = FNPARITY0# + 1; (4905)
                {
                  int32_t numberRHS
                      = (int32_t)(xadd (COREHALFWORD (mFNPARITY0p), 1));
                  descriptor_t *bitRHS;
                  bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                  putBIT (16, mFNPARITY0p, bitRHS);
                  bitRHS->inUse = 0;
                }
            es2s2s1:;
            } // End of DO block
          // INX = INX - 1; (4906)
          {
            int32_t numberRHS = (int32_t)(xsubtract (
                COREHALFWORD (mSETUP_REARRANGExINX), 1));
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mSETUP_REARRANGExINX, bitRHS);
            bitRHS->inUse = 0;
          }
        } // End of DO WHILE block
      // TOTAL_MATCH_PRES = FNPARITY0# + FNPARITY1# = CSE_FOUND_INX - 1; (4907)
      {
        int32_t numberRHS = (int32_t)(xEQ (
            xadd (COREHALFWORD (mFNPARITY0p), COREHALFWORD (mFNPARITY1p)),
            xsubtract (COREHALFWORD (mCSE_FOUND_INX), 1)));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (8, mTOTAL_MATCH_PRES, bitRHS);
        bitRHS->inUse = 0;
      }
      // IF LOOP_INVAR THEN (4908)
      if (1 & (bitToFixed (getBIT (8, mSETUP_REARRANGExLOOP_INVAR))))
        // DO; (4909)
        {
        rs2s3:;
          // PNPARITY0# = FNPARITY0#; (4910)
          {
            descriptor_t *bitRHS = getBIT (16, mFNPARITY0p);
            putBIT (16, mPNPARITY0p, bitRHS);
            bitRHS->inUse = 0;
          }
          // PNPARITY1# = FNPARITY1#; (4911)
          {
            descriptor_t *bitRHS = getBIT (16, mFNPARITY1p);
            putBIT (16, mPNPARITY1p, bitRHS);
            bitRHS->inUse = 0;
          }
        es2s3:;
        } // End of DO block
      // ELSE (4912)
      else
        // DO; (4913)
        {
        rs2s4:;
          // PNPARITY0#,PNPARITY1# = 0; (4914)
          {
            int32_t numberRHS = (int32_t)(0);
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mPNPARITY0p, bitRHS);
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mPNPARITY1p, bitRHS);
            bitRHS->inUse = 0;
          }
          // INX = PREVIOUS_NODE_OPERAND ; (4915)
          {
            descriptor_t *bitRHS = getBIT (16, mPREVIOUS_NODE_OPERAND);
            putBIT (16, mSETUP_REARRANGExINX, bitRHS);
            bitRHS->inUse = 0;
          }
          // DO WHILE NODE(INX) ~= END_OF_NODE; (4916)
          while (1
                 & (xNEQ (getFIXED (mNODE
                                    + 4 * COREHALFWORD (mSETUP_REARRANGExINX)),
                          getFIXED (mEND_OF_NODE))))
            {
              // IF NODE(INX) ~= 0 THEN (4917)
              if (1
                  & (xNEQ (
                      getFIXED (mNODE
                                + 4 * COREHALFWORD (mSETUP_REARRANGExINX)),
                      0)))
                // DO; (4918)
                {
                rs2s4s1s1:;
                  // IF SHR(NODE(INX),20) THEN (4919)
                  if (1
                      & (SHR (
                          getFIXED (mNODE
                                    + 4 * COREHALFWORD (mSETUP_REARRANGExINX)),
                          20)))
                    // PNPARITY1# = PNPARITY1# + 1; (4920)
                    {
                      int32_t numberRHS
                          = (int32_t)(xadd (COREHALFWORD (mPNPARITY1p), 1));
                      descriptor_t *bitRHS;
                      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                      putBIT (16, mPNPARITY1p, bitRHS);
                      bitRHS->inUse = 0;
                    }
                  // ELSE (4921)
                  else
                    // PNPARITY0# = PNPARITY0# + 1; (4922)
                    {
                      int32_t numberRHS
                          = (int32_t)(xadd (COREHALFWORD (mPNPARITY0p), 1));
                      descriptor_t *bitRHS;
                      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                      putBIT (16, mPNPARITY0p, bitRHS);
                      bitRHS->inUse = 0;
                    }
                es2s4s1s1:;
                } // End of DO block
              // INX = INX - 1; (4923)
              {
                int32_t numberRHS = (int32_t)(xsubtract (
                    COREHALFWORD (mSETUP_REARRANGExINX), 1));
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mSETUP_REARRANGExINX, bitRHS);
                bitRHS->inUse = 0;
              }
            } // End of DO WHILE block
        es2s4:;
        } // End of DO block
    es2:;
    } // End of DO block
  // IF ~LOOP_INVAR THEN (4924)
  if (1 & (xNOT (BYTE0 (mSETUP_REARRANGExLOOP_INVAR))))
    // DO; (4925)
    {
    rs3:;
      // PRESENT_HALMAT = NODE(GET_INX + 1) &  65535; (4926)
      {
        int32_t numberRHS = (int32_t)(xAND (
            getFIXED (mNODE + 4 * xadd (COREHALFWORD (mGET_INX), 1)), 65535));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mPRESENT_HALMAT, bitRHS);
        bitRHS->inUse = 0;
      }
    es3:;
    } // End of DO block
  // ELSE (4927)
  else
    // DO; (4928)
    {
    rs4:;
      // LOOPY_OPS = FALSE; (4929)
      {
        int32_t numberRHS = (int32_t)(0);
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (8, mLOOPY_OPS, bitRHS);
        bitRHS->inUse = 0;
      }
      // IF LOOPY(PRESENT_HALMAT) THEN (4930)
      if (1
          & ((putBITp (16, mLOOPYxPTR, getBIT (16, mPRESENT_HALMAT)),
              LOOPY (0))))
        // DO; (4931)
        {
        rs4s1:;
          // OP = CLASSIFY(PRESENT_HALMAT); (4932)
          {
            descriptor_t *bitRHS
                = (putBITp (16, mCLASSIFYxPTR, getBIT (16, mPRESENT_HALMAT)),
                   CLASSIFY (0));
            putBIT (16, mOP, bitRHS);
            bitRHS->inUse = 0;
          }
          // TEMP = LAST_OP(PRESENT_HALMAT - 1); (4933)
          {
            int32_t numberRHS = (int32_t)((
                putBITp (
                    16, mLAST_OPxPTR,
                    fixedToBit (32, (int32_t)(xsubtract (
                                        COREHALFWORD (mPRESENT_HALMAT), 1)))),
                LAST_OP (0)));
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mTEMP, bitRHS);
            bitRHS->inUse = 0;
          }
          // OP2 = CLASSIFY(TEMP); (4934)
          {
            descriptor_t *bitRHS
                = (putBITp (16, mCLASSIFYxPTR, getBIT (16, mTEMP)),
                   CLASSIFY (0));
            putBIT (16, mOP2, bitRHS);
            bitRHS->inUse = 0;
          }
          // DO WHILE OP2 = OP OR OP2 = NOP; (4935)
          while (1
                 & (xOR (xEQ (COREHALFWORD (mOP2), COREHALFWORD (mOP)),
                         xEQ (COREHALFWORD (mOP2), COREHALFWORD (mNOP)))))
            {
              // TEMP = LAST_OP(TEMP - 1); (4936)
              {
                int32_t numberRHS = (int32_t)((
                    putBITp (16, mLAST_OPxPTR,
                             fixedToBit (32, (int32_t)(xsubtract (
                                                 COREHALFWORD (mTEMP), 1)))),
                    LAST_OP (0)));
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mTEMP, bitRHS);
                bitRHS->inUse = 0;
              }
              // OP2 = CLASSIFY(TEMP); (4937)
              {
                descriptor_t *bitRHS
                    = (putBITp (16, mCLASSIFYxPTR, getBIT (16, mTEMP)),
                       CLASSIFY (0));
                putBIT (16, mOP2, bitRHS);
                bitRHS->inUse = 0;
              }
            } // End of DO WHILE block
          // IF OPR(TEMP) = VDLP THEN (4938)
          if (1
              & (xEQ (getFIXED (mOPR + 4 * COREHALFWORD (mTEMP)),
                      getFIXED (mVDLP))))
            // DO; (4939)
            {
            rs4s1s2:;
              // LOOPY_OPS = TRUE; (4940)
              {
                int32_t numberRHS = (int32_t)(1);
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (8, mLOOPY_OPS, bitRHS);
                bitRHS->inUse = 0;
              }
              // LOOP_DIMENSION = SHR(OPR(TEMP + 1),16); (4941)
              {
                int32_t numberRHS = (int32_t)(SHR (
                    getFIXED (mOPR + 4 * xadd (COREHALFWORD (mTEMP), 1)), 16));
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mLOOP_DIMENSION, bitRHS);
                bitRHS->inUse = 0;
              }
            es4s1s2:;
            } // End of DO block
        es4s1:;
        } // End of DO block
    es4:;
    } // End of DO block
  // NEW_NODE_PTR = N_INX; (4942)
  {
    descriptor_t *bitRHS = getBIT (16, mN_INX);
    putBIT (16, mNEW_NODE_PTR, bitRHS);
    bitRHS->inUse = 0;
  }
  // RETURN TRUE; (4943)
  {
    reentryGuard = 0;
    return fixedToBit (32, (int32_t)(1));
  }
}
