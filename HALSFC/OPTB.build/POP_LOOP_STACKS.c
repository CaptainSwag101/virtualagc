/*
  File POP_LOOP_STACKS.c generated by XCOM-I, 2024-08-09 12:41:08.
*/

#include "runtimeC.h"

int32_t
POP_LOOP_STACKS (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "POP_LOOP_STACKS");
  // IF C_TRACE THEN (2494)
  if (1 & (bitToFixed (getBIT (8, mC_TRACE))))
    // OUTPUT = 'POP_LOOP_STACKS('||VM||','||NO_VDLPS||'):'; (2495)
    {
      descriptor_t *stringRHS;
      stringRHS = xsCAT (
          xsCAT (
              xsCAT (xsCAT (cToDescriptor (NULL, "POP_LOOP_STACKS("),
                            bitToCharacter (getBIT (8, mPOP_LOOP_STACKSxVM))),
                     cToDescriptor (NULL, ",")),
              bitToCharacter (getBIT (8, mPOP_LOOP_STACKSxNO_VDLPS))),
          cToDescriptor (NULL, "):"));
      OUTPUT (0, stringRHS);
      stringRHS->inUse = 0;
    }
  // TEMP = NO_VDLPS AND STACKED_VDLPS = 2; (2496)
  {
    int32_t numberRHS
        = (int32_t)(xAND (BYTE0 (mPOP_LOOP_STACKSxNO_VDLPS),
                          xEQ (COREHALFWORD (mSTACKED_VDLPS), 2)));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mPOP_LOOP_STACKSxTEMP, bitRHS);
    bitRHS->inUse = 0;
  }
  // DO FOR ST = 0 TO 2 - TEMP; (2497)
  {
    int32_t from57, to57, by57;
    from57 = 0;
    to57 = xsubtract (2, COREHALFWORD (mPOP_LOOP_STACKSxTEMP));
    by57 = 1;
    for (putBIT (16, mST, fixedToBit (16, from57));
         bitToFixed (getBIT (16, mST)) <= to57; putBIT (
             16, mST, fixedToBit (16, bitToFixed (getBIT (16, mST)) + by57)))
      {
        // ST1 = ST + 1 + TEMP; (2498)
        {
          int32_t numberRHS
              = (int32_t)(xadd (xadd (COREHALFWORD (mST), 1),
                                COREHALFWORD (mPOP_LOOP_STACKSxTEMP)));
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (16, mST1, bitRHS);
          bitRHS->inUse = 0;
        }
        // CALL MOVE_LOOP_STACK; (2499)
        MOVE_LOOP_STACK (0);
      }
  } // End of DO for-loop block
  // LOOP_HEAD(3) = 0; (2500)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mLOOP_HEAD + 2 * (3), bitRHS);
    bitRHS->inUse = 0;
  }
  // IF NO_VDLPS THEN (2501)
  if (1 & (bitToFixed (getBIT (8, mPOP_LOOP_STACKSxNO_VDLPS))))
    // STACKED_VDLPS = 0; (2502)
    {
      int32_t numberRHS = (int32_t)(0);
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (16, mSTACKED_VDLPS, bitRHS);
      bitRHS->inUse = 0;
    }
  // ELSE (2503)
  else
    // STACKED_VDLPS = STACKED_VDLPS - VM; (2504)
    {
      int32_t numberRHS = (int32_t)(xsubtract (COREHALFWORD (mSTACKED_VDLPS),
                                               BYTE0 (mPOP_LOOP_STACKSxVM)));
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (16, mSTACKED_VDLPS, bitRHS);
      bitRHS->inUse = 0;
    }
  // NO_VDLPS,VM = 0; (2505)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mPOP_LOOP_STACKSxNO_VDLPS, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mPOP_LOOP_STACKSxVM, bitRHS);
    bitRHS->inUse = 0;
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
