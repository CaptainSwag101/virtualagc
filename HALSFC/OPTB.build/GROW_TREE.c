/*
  File GROW_TREE.c generated by XCOM-I, 2024-08-09 12:41:08.
*/

#include "runtimeC.h"

int32_t
GROW_TREE (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GROW_TREE");
  // I = SMRK_CTR - LAST_SMRK; (4684)
  {
    int32_t numberRHS = (int32_t)(xsubtract (COREHALFWORD (mSMRK_CTR),
                                             COREHALFWORD (mLAST_SMRK)));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mGROW_TREExI, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF N_INX + I + I > MAX_NODE_SIZE THEN (4685)
  if (1
      & (xGT (xadd (xadd (COREHALFWORD (mN_INX), COREHALFWORD (mGROW_TREExI)),
                    COREHALFWORD (mGROW_TREExI)),
              2000)))
    // IF ~PUSH_TEST THEN (4686)
    if (1 & (xNOT (BYTE0 (mPUSH_TEST))))
      // DO; (4687)
      {
      rs1:;
        // CALL ZAP_TABLES(1); (4688)
        {
          putBITp (8, mZAP_TABLESxMAJOR, fixedToBit (32, (int32_t)(1)));
          ZAP_TABLES (0);
        }
        // CTR = SMRK_CTR; (4689)
        {
          descriptor_t *bitRHS = getBIT (16, mSMRK_CTR);
          putBIT (16, mCTR, bitRHS);
          bitRHS->inUse = 0;
        }
        // STILL_NODES = FALSE; (4690)
        {
          int32_t numberRHS = (int32_t)(0);
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (8, mSTILL_NODES, bitRHS);
          bitRHS->inUse = 0;
        }
        // RETURN; (4691)
        {
          reentryGuard = 0;
          return 0;
        }
      es1:;
      } // End of DO block
  // STILL_NODES = TRUE; (4692)
  {
    int32_t numberRHS = (int32_t)(1);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mSTILL_NODES, bitRHS);
    bitRHS->inUse = 0;
  }
  // NODE(N_INX) = END_OF_LIST; (4693)
  {
    int32_t numberRHS = (int32_t)(getFIXED (mEND_OF_LIST));
    putFIXED (mNODE + 4 * (COREHALFWORD (mN_INX)), numberRHS);
  }
  // NODE2(N_INX) = SHL(LEVEL,11) | BLOCK#; (4694)
  {
    int32_t numberRHS = (int32_t)(xOR (SHL (COREHALFWORD (mLEVEL), 11),
                                       COREHALFWORD (mBLOCKp)));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mNODE2 + 2 * (COREHALFWORD (mN_INX)), bitRHS);
    bitRHS->inUse = 0;
  }
  // LAST_END_OF_LIST = N_INX; (4695)
  {
    descriptor_t *bitRHS = getBIT (16, mN_INX);
    putBIT (16, mLAST_END_OF_LIST, bitRHS);
    bitRHS->inUse = 0;
  }
  // N_INX = N_INX+1; (4696)
  {
    int32_t numberRHS = (int32_t)(xadd (COREHALFWORD (mN_INX), 1));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mN_INX, bitRHS);
    bitRHS->inUse = 0;
  }
  // CALL BUILD_NODE_LIST; (4697)
  GROW_TREExBUILD_NODE_LIST (0);
  // GET_INX=N_INX - 1; (4698)
  {
    int32_t numberRHS = (int32_t)(xsubtract (COREHALFWORD (mN_INX), 1));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mGET_INX, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF NODE(GET_INX) = END_OF_LIST THEN (4699)
  if (1
      & (xEQ (getFIXED (mNODE + 4 * COREHALFWORD (mGET_INX)),
              getFIXED (mEND_OF_LIST))))
    // DO; (4700)
    {
    rs2:;
      // STILL_NODES = FALSE; (4701)
      {
        int32_t numberRHS = (int32_t)(0);
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (8, mSTILL_NODES, bitRHS);
        bitRHS->inUse = 0;
      }
      // N_INX = GET_INX; (4702)
      {
        descriptor_t *bitRHS = getBIT (16, mGET_INX);
        putBIT (16, mN_INX, bitRHS);
        bitRHS->inUse = 0;
      }
      // RETURN; (4703)
      {
        reentryGuard = 0;
        return 0;
      }
    es2:;
    } // End of DO block
  // IF TRACE THEN (4704)
  if (1 & (bitToFixed (getBIT (8, mTRACE))))
    // CALL CSE_TAB_DUMP; (4705)
    CSE_TAB_DUMP (0);
  {
    reentryGuard = 0;
    return 0;
  }
}
