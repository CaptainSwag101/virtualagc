/*
  File PUSH_ZAP_STACK.c generated by XCOM-I, 2024-08-08 04:31:49.
*/

#include "runtimeC.h"

int32_t
PUSH_ZAP_STACK (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "PUSH_ZAP_STACK");
  // IF STACK_TRACE THEN (3262)
  if (1 & (bitToFixed (getBIT (8, mSTACK_TRACE))))
    // OUTPUT = 'PUSH_ZAP_STACK:  '||STT#; (3263)
    {
      descriptor_t *stringRHS;
      stringRHS = xsCAT (cToDescriptor (NULL, "PUSH_ZAP_STACK:  "),
                         bitToCharacter (getBIT (16, mSTTp)));
      OUTPUT (0, stringRHS);
      stringRHS->inUse = 0;
    }
  // ZAP_LEVEL = ZAP_LEVEL + 1; (3264)
  {
    int32_t numberRHS = (int32_t)(xadd (COREHALFWORD (mZAP_LEVEL), 1));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mZAP_LEVEL, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF ZAP_LEVEL > RECORD_TOP(OBPS) THEN (3265)
  if (1
      & (xGT (
          COREHALFWORD (mZAP_LEVEL),
          xsubtract (COREWORD (xadd (ADDR ("OBPS", 0x80000000, NULL, 0), 12)),
                     1))))
    // DO ; (3266)
    {
    rs1:;
      // IF COREWORD ( ADDR ( OBPS ) + 12 ) >= COREWORD ( ADDR ( OBPS ) + 8 )
      // THEN (3267)
      if (1
          & (xGE (COREWORD (xadd (ADDR ("OBPS", 0x80000000, NULL, 0), 12)),
                  COREWORD (xadd (ADDR ("OBPS", 0x80000000, NULL, 0), 8)))))
        // CALL _NEEDMORE_SPACE ( ADDR ( OBPS )  ) ; (3268)
        {
          putFIXED (m_NEEDMORE_SPACExDOPE, ADDR ("OBPS", 0x80000000, NULL, 0));
          _NEEDMORE_SPACE (0);
        }
      // COREWORD ( ADDR ( OBPS ) + 12 ) = COREWORD ( ADDR ( OBPS ) + 12 ) + 1
      // ; (3269)
      {
        int32_t numberRHS = (int32_t)(xadd (
            COREWORD (xadd (ADDR ("OBPS", 0x80000000, NULL, 0), 12)), 1));
        COREWORD2 (xadd (ADDR ("OBPS", 0x80000000, NULL, 0), 12), numberRHS);
      }
    es1:;
    } // End of DO block
  // CALL ERASE_ZAPS; (3270)
  ERASE_ZAPS (0);
  {
    reentryGuard = 0;
    return 0;
  }
}
