/*
  File EXTRACT_VAR.c generated by XCOM-I, 2024-08-08 04:31:49.
*/

#include "runtimeC.h"

int32_t
EXTRACT_VAR (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "EXTRACT_VAR");
  // AB_BITS = OPR(DSUB_INX) & ALPHA_BETA_MASK; (3628)
  {
    int32_t numberRHS
        = (int32_t)(xAND (getFIXED (mOPR + 4 * COREHALFWORD (mDSUB_INX)),
                          COREHALFWORD (mALPHA_BETA_MASK)));
    putFIXED (mEXTRACT_VARxAB_BITS, numberRHS);
  }
  // TMP = OPR(DSUB_INX) - AB_BITS; (3629)
  {
    int32_t numberRHS
        = (int32_t)(xsubtract (getFIXED (mOPR + 4 * COREHALFWORD (mDSUB_INX)),
                               getFIXED (mEXTRACT_VARxAB_BITS)));
    putFIXED (mEXTRACT_VARxTMP, numberRHS);
  }
  // IF OPERAND_TYPE = XVAC THEN (3630)
  if (1 & (xEQ (COREHALFWORD (mOPERAND_TYPE), COREHALFWORD (mXVAC))))
    // DO; (3631)
    {
    rs1:;
      // REF = SHR(OPR(DSUB_INX),16); (3632)
      {
        int32_t numberRHS = (int32_t)(SHR (
            getFIXED (mOPR + 4 * COREHALFWORD (mDSUB_INX)), 16));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mEXTRACT_VARxREF, bitRHS);
        bitRHS->inUse = 0;
      }
      // IF OPOP(REF) = IADD THEN (3633)
      if (1
          & (xEQ (bitToFixed (
                      (putBITp (16, mOPOPxPTR, getBIT (16, mEXTRACT_VARxREF)),
                       OPOP (0))),
                  COREHALFWORD (mIADD))))
        // DO FOR I = REF + 1 TO REF + 2; (3634)
        {
          int32_t from90, to90, by90;
          from90 = xadd (COREHALFWORD (mEXTRACT_VARxREF), 1);
          to90 = xadd (COREHALFWORD (mEXTRACT_VARxREF), 2);
          by90 = 1;
          for (putBIT (16, mEXTRACT_VARxI, fixedToBit (16, from90));
               bitToFixed (getBIT (16, mEXTRACT_VARxI)) <= to90;
               putBIT (16, mEXTRACT_VARxI,
                       fixedToBit (16, bitToFixed (getBIT (16, mEXTRACT_VARxI))
                                           + by90)))
            {
              // IF XHALMAT_QUAL(I) = XLIT THEN (3635)
              if (1
                  & (xEQ (bitToFixed ((putBITp (16, mXHALMAT_QUALxPTR,
                                                getBIT (16, mEXTRACT_VARxI)),
                                       XHALMAT_QUAL (0))),
                          COREHALFWORD (mXLIT))))
                // DO; (3636)
                {
                rs1s1s1:;
                  // OPR(DSUB_INX) = OPR(I) | AB_BITS; (3637)
                  {
                    int32_t numberRHS = (int32_t)(xOR (
                        getFIXED (mOPR + 4 * COREHALFWORD (mEXTRACT_VARxI)),
                        getFIXED (mEXTRACT_VARxAB_BITS)));
                    putFIXED (mOPR + 4 * (COREHALFWORD (mDSUB_INX)),
                              numberRHS);
                  }
                  // TMP = OPR(REF + REF + 3 - I); (3638)
                  {
                    int32_t numberRHS = (int32_t)(getFIXED (
                        mOPR
                        + 4
                              * xsubtract (
                                  xadd (xadd (COREHALFWORD (mEXTRACT_VARxREF),
                                              COREHALFWORD (mEXTRACT_VARxREF)),
                                        3),
                                  COREHALFWORD (mEXTRACT_VARxI))));
                    putFIXED (mEXTRACT_VARxTMP, numberRHS);
                  }
                  // OPR(REF) =  131072; (3639)
                  {
                    int32_t numberRHS = (int32_t)(131072);
                    putFIXED (mOPR + 4 * (COREHALFWORD (mEXTRACT_VARxREF)),
                              numberRHS);
                  }
                  // OPR(REF + 1),OPR(REF + 2) = 0; (3640)
                  {
                    int32_t numberRHS = (int32_t)(0);
                    putFIXED (
                        mOPR + 4 * (xadd (COREHALFWORD (mEXTRACT_VARxREF), 1)),
                        numberRHS);
                    putFIXED (
                        mOPR + 4 * (xadd (COREHALFWORD (mEXTRACT_VARxREF), 2)),
                        numberRHS);
                  }
                  // IF SUB_TRACE THEN (3641)
                  if (1 & (bitToFixed (getBIT (8, mSUB_TRACE))))
                    // OUTPUT = '   NOP ' || REF || ' TO ' || REF + 2; (3642)
                    {
                      descriptor_t *stringRHS;
                      stringRHS = xsCAT (
                          xsCAT (xsCAT (cToDescriptor (NULL, "   NOP "),
                                        bitToCharacter (
                                            getBIT (16, mEXTRACT_VARxREF))),
                                 cToDescriptor (NULL, " TO ")),
                          fixedToCharacter (
                              xadd (COREHALFWORD (mEXTRACT_VARxREF), 2)));
                      OUTPUT (0, stringRHS);
                      stringRHS->inUse = 0;
                    }
                  // GO TO EXITT; (3643)
                  goto EXITT;
                es1s1s1:;
                } // End of DO block
            }
        } // End of DO for-loop block
    es1:;
    } // End of DO block
  // OPR(DSUB_INX) = IMD_0 | AB_BITS; (3644)
  {
    int32_t numberRHS = (int32_t)(xOR (COREHALFWORD (mIMD_0),
                                       getFIXED (mEXTRACT_VARxAB_BITS)));
    putFIXED (mOPR + 4 * (COREHALFWORD (mDSUB_INX)), numberRHS);
  }
// EXITT: (3645)
EXITT:
  // IF SUB_TRACE THEN (3646)
  if (1 & (bitToFixed (getBIT (8, mSUB_TRACE))))
    // OUTPUT = 'EXTRACT_VAR('||DSUB_INX||'):  '||HEX(TMP,8); (3647)
    {
      descriptor_t *stringRHS;
      stringRHS
          = xsCAT (xsCAT (xsCAT (cToDescriptor (NULL, "EXTRACT_VAR("),
                                 bitToCharacter (getBIT (16, mDSUB_INX))),
                          cToDescriptor (NULL, "):  ")),
                   (putFIXED (mHEXxHVAL, getFIXED (mEXTRACT_VARxTMP)),
                    putFIXED (mHEXxN, 8), HEX (0)));
      OUTPUT (0, stringRHS);
      stringRHS->inUse = 0;
    }
  // RETURN TMP; (3648)
  {
    reentryGuard = 0;
    return getFIXED (mEXTRACT_VARxTMP);
  }
}
