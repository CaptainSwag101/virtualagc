/*
  File INVAR.c generated by XCOM-I, 2024-08-08 04:31:49.
*/

#include "runtimeC.h"

descriptor_t *
INVAR (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (descriptor_t *)0;
    }
  reentryGuard = guardReentry (reentryGuard, "INVAR");
  // IF (NODE_WORD &  983040) = DUMMY_NODE THEN (2314)
  if (1
      & (xEQ (xAND (getFIXED (mINVARxNODE_WORD), 983040),
              getFIXED (mDUMMY_NODE))))
    // RET = 0; (2315)
    {
      int32_t numberRHS = (int32_t)(0);
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (8, mINVARxRET, bitRHS);
      bitRHS->inUse = 0;
    }
  // ELSE (2316)
  else
    // IF AR_INV THEN (2317)
    if (1 & (bitToFixed (getBIT (8, mINVARxAR_INV))))
      // DO; (2318)
      {
      rs1:;
        // IF NODE(NODE_BEGINNING) = TSUB THEN (2319)
        if (1
            & (xEQ (getFIXED (mNODE + 4 * COREHALFWORD (mNODE_BEGINNING)),
                    COREHALFWORD (mTSUB))))
          // RET = 1; (2320)
          {
            int32_t numberRHS = (int32_t)(1);
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (8, mINVARxRET, bitRHS);
            bitRHS->inUse = 0;
          }
        // ELSE (2321)
        else
          // IF NODE_WORD = 0 THEN (2322)
          if (1 & (xEQ (getFIXED (mINVARxNODE_WORD), 0)))
            // RET = 0; (2323)
            {
              int32_t numberRHS = (int32_t)(0);
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (8, mINVARxRET, bitRHS);
              bitRHS->inUse = 0;
            }
          // ELSE (2324)
          else
            // RET = ARRAYED_ELT(NODE_WORD,NODE2_WORD) = 0; (2325)
            {
              int32_t numberRHS = (int32_t)(xEQ (
                  bitToFixed ((putFIXED (mARRAYED_ELTxNODE_WORD,
                                         getFIXED (mINVARxNODE_WORD)),
                               putBITp (16, mARRAYED_ELTxNODE2_WORD,
                                        getBIT (16, mINVARxNODE2_WORD)),
                               ARRAYED_ELT (0))),
                  0));
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (8, mINVARxRET, bitRHS);
              bitRHS->inUse = 0;
            }
      es1:;
      } // End of DO block
    // ELSE (2326)
    else
      // DO; (2327)
      {
      rs2:;
        // RET = 0; (2328)
        {
          int32_t numberRHS = (int32_t)(0);
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (8, mINVARxRET, bitRHS);
          bitRHS->inUse = 0;
        }
        // DO CASE TYPE(NODE_WORD); (2329)
        {
        rs2s1:
          switch (bitToFixed (
              (putFIXED (mTYPExCSE_WORD, getFIXED (mINVARxNODE_WORD)),
               TYPE (0))))
            {
            case 0:
                // ; (2331)
                ;
              break;
            case 1:
                // ; (2332)
                ;
              break;
            case 2:
                // ; (2333)
                ;
              break;
            case 3:
              // DO; (2334)
              {
              rs2s1s1:;
                // RET = (NODE(NODE_WORD &  65535) &  65535) <
                // PULL_LOOP_HEAD(LEV); (2334)
                {
                  int32_t numberRHS = (int32_t)(xLT (
                      xAND (
                          getFIXED (
                              mNODE
                              + 4 * xAND (getFIXED (mINVARxNODE_WORD), 65535)),
                          65535),
                      COREHALFWORD (getFIXED (mLEVEL_STACK_VARS)
                                    + 11 * (COREHALFWORD (mLEV)) + 4
                                    + 2 * (0))));
                  descriptor_t *bitRHS;
                  bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                  putBIT (8, mINVARxRET, bitRHS);
                  bitRHS->inUse = 0;
                }
              es2s1s1:;
              } // End of DO block
              break;
            case 4:
                // ; (2336)
                ;
              break;
            case 5:
                // ; (2337)
                ;
              break;
            case 6:
              // RET = TRUE; (2338)
              {
                int32_t numberRHS = (int32_t)(1);
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (8, mINVARxRET, bitRHS);
                bitRHS->inUse = 0;
              }
              break;
            case 7:
                // ; (2339)
                ;
              break;
            case 8:
                // ; (2340)
                ;
              break;
            case 9:
                // ; (2341)
                ;
              break;
            case 10:
                // ; (2342)
                ;
              break;
            case 11:
              // DO; (2343)
              {
              rs2s1s2:;
                // RET = ~ZAP_BIT(NODE2_WORD) &  1; (2343)
                {
                  int32_t numberRHS = (int32_t)(xAND (
                      xNOT (bitToFixed (
                          (putBITp (16, mZAP_BITxPTR,
                                    getBIT (16, mINVARxNODE2_WORD)),
                           ZAP_BIT (0)))),
                      1));
                  descriptor_t *bitRHS;
                  bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                  putBIT (8, mINVARxRET, bitRHS);
                  bitRHS->inUse = 0;
                }
              es2s1s2:;
              } // End of DO block
              break;
            case 12:
              // DO; (2345)
              {
              rs2s1s3:;
                // RET = (NODE(NODE_WORD &  65535) &  65535) <
                // PULL_LOOP_HEAD(LEV); (2345)
                {
                  int32_t numberRHS = (int32_t)(xLT (
                      xAND (
                          getFIXED (
                              mNODE
                              + 4 * xAND (getFIXED (mINVARxNODE_WORD), 65535)),
                          65535),
                      COREHALFWORD (getFIXED (mLEVEL_STACK_VARS)
                                    + 11 * (COREHALFWORD (mLEV)) + 4
                                    + 2 * (0))));
                  descriptor_t *bitRHS;
                  bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                  putBIT (8, mINVARxRET, bitRHS);
                  bitRHS->inUse = 0;
                }
              es2s1s3:;
              } // End of DO block
              break;
            case 13:
                // ; (2347)
                ;
              break;
            case 14:
              // RET = TRUE; (2348)
              {
                int32_t numberRHS = (int32_t)(1);
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (8, mINVARxRET, bitRHS);
                bitRHS->inUse = 0;
              }
              break;
            case 15:
                // ; (2349)
                ;
              break;
            }
        } // End of DO CASE block
      es2:;
      } // End of DO block
  // IF I_TRACE THEN (2349)
  if (1 & (bitToFixed (getBIT (8, mSTACK_TRACE))))
    // OUTPUT = 'INVAR(' || CSE_WORD_FORMAT(NODE_WORD) || ',' || NODE2_WORD||
    // ',' || AR_INV || '):  ' || RET; (2350)
    {
      descriptor_t *stringRHS;
      stringRHS = xsCAT (
          xsCAT (
              xsCAT (
                  xsCAT (
                      xsCAT (xsCAT (xsCAT (cToDescriptor (NULL, "INVAR("),
                                           (putFIXED (
                                                mCSE_WORD_FORMATxWORD,
                                                getFIXED (mINVARxNODE_WORD)),
                                            CSE_WORD_FORMAT (0))),
                                    cToDescriptor (NULL, ",")),
                             bitToCharacter (getBIT (16, mINVARxNODE2_WORD))),
                      cToDescriptor (NULL, ",")),
                  bitToCharacter (getBIT (8, mINVARxAR_INV))),
              cToDescriptor (NULL, "):  ")),
          bitToCharacter (getBIT (8, mINVARxRET)));
      OUTPUT (0, stringRHS);
      stringRHS->inUse = 0;
    }
  // AR_INV = 0; (2351)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mINVARxAR_INV, bitRHS);
    bitRHS->inUse = 0;
  }
  // RETURN RET; (2352)
  {
    reentryGuard = 0;
    return getBIT (8, mINVARxRET);
  }
}
