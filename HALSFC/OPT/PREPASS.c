/*
  File PREPASS.c generated by XCOM-I, 2024-08-08 04:31:49.
*/

#include "runtimeC.h"

int32_t
PREPASS (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "PREPASS");
  // TOTAL,VM,STOTAL,PTR,D_N_INX = 0; (5646)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mTOTAL, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mPREPASSxVM, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mPREPASSxSTOTAL, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mPREPASSxPTR, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mD_N_INX, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF OPTIMIZER_OFF THEN (5647)
  if (1 & (bitToFixed (getBIT (8, mOPTIMIZER_OFF))))
    // RETURN; (5648)
    {
      reentryGuard = 0;
      return 0;
    }
  // OP = SHR(OPR,4) &  4095; (5649)
  {
    int32_t numberRHS = (int32_t)(xAND (SHR (getFIXED (mOPR), 4), 4095));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mPREPASSxOP, bitRHS);
    bitRHS->inUse = 0;
  }
  // N = SHR(OPR,16) &  255; (5650)
  {
    int32_t numberRHS = (int32_t)(xAND (SHR (getFIXED (mOPR), 16), 255));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mPREPASSxN, bitRHS);
    bitRHS->inUse = 0;
  }
  // DO WHILE OP ~= XREC; (5651)
  while (1 & (xNEQ (COREHALFWORD (mPREPASSxOP), COREHALFWORD (mXREC))))
    {
      // IF OP = SMRK THEN (5652)
      if (1 & (xEQ (COREHALFWORD (mPREPASSxOP), COREHALFWORD (mSMRK))))
        // DO; (5653)
        {
        rs1s1:;
          // IF VM THEN (5654)
          if (1 & (bitToFixed (getBIT (8, mPREPASSxVM))))
            // STOTAL = STOTAL + 3; (5655)
            {
              int32_t numberRHS
                  = (int32_t)(xadd (COREHALFWORD (mPREPASSxSTOTAL), 3));
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (16, mPREPASSxSTOTAL, bitRHS);
              bitRHS->inUse = 0;
            }
          // IF STOTAL ~= 0 THEN (5656)
          if (1 & (xNEQ (COREHALFWORD (mPREPASSxSTOTAL), 0)))
            // DO; (5657)
            {
            rs1s1s1:;
              // CALL BUMP_D_N(PTR,STOTAL); (5658)
              {
                putBITp (16, mBUMP_D_NxPTR, getBIT (16, mPREPASSxPTR));
                putBITp (16, mBUMP_D_NxD_PTR, getBIT (16, mPREPASSxSTOTAL));
                BUMP_D_N (0);
              }
              // TOTAL = TOTAL + STOTAL; (5659)
              {
                int32_t numberRHS = (int32_t)(xadd (
                    COREHALFWORD (mTOTAL), COREHALFWORD (mPREPASSxSTOTAL)));
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mTOTAL, bitRHS);
                bitRHS->inUse = 0;
              }
              // VM,STOTAL = 0; (5660)
              {
                int32_t numberRHS = (int32_t)(0);
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (8, mPREPASSxVM, bitRHS);
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mPREPASSxSTOTAL, bitRHS);
                bitRHS->inUse = 0;
              }
            es1s1s1:;
            } // End of DO block
        es1s1:;
        } // End of DO block
      // ELSE (5661)
      else
        // IF LOOPY(PTR) THEN (5662)
        if (1
            & ((putBITp (16, mLOOPYxPTR, getBIT (16, mPREPASSxPTR)),
                LOOPY (0))))
          // VM = TRUE; (5663)
          {
            int32_t numberRHS = (int32_t)(1);
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (8, mPREPASSxVM, bitRHS);
            bitRHS->inUse = 0;
          }
        // ELSE (5664)
        else
          // IF OP = DSUB OR OP = TSUB THEN (5665)
          if (1
              & (xOR (xEQ (COREHALFWORD (mPREPASSxOP), COREHALFWORD (mDSUB)),
                      xEQ (COREHALFWORD (mPREPASSxOP), COREHALFWORD (mTSUB)))))
            // DO; (5666)
            {
            rs1s2:;
              // IF OP = TSUB THEN (5667)
              if (1 & (xEQ (COREHALFWORD (mPREPASSxOP), COREHALFWORD (mTSUB))))
                // TEMP = 2; (5668)
                {
                  int32_t numberRHS = (int32_t)(2);
                  descriptor_t *bitRHS;
                  bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                  putBIT (16, mPREPASSxTEMP, bitRHS);
                  bitRHS->inUse = 0;
                }
              // ELSE (5669)
              else
                // DO; (5670)
                {
                rs1s2s1:;
                  // TEMP = 0; (5671)
                  {
                    int32_t numberRHS = (int32_t)(0);
                    descriptor_t *bitRHS;
                    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                    putBIT (16, mPREPASSxTEMP, bitRHS);
                    bitRHS->inUse = 0;
                  }
                  // DO FOR K = PTR + 2 TO PTR + N; (5672)
                  {
                    int32_t from123, to123, by123;
                    from123 = xadd (COREHALFWORD (mPREPASSxPTR), 2);
                    to123 = xadd (COREHALFWORD (mPREPASSxPTR),
                                  COREHALFWORD (mPREPASSxN));
                    by123 = 1;
                    for (putBIT (16, mPREPASSxK, fixedToBit (16, from123));
                         bitToFixed (getBIT (16, mPREPASSxK)) <= to123;
                         putBIT (16, mPREPASSxK,
                                 fixedToBit (
                                     16, bitToFixed (getBIT (16, mPREPASSxK))
                                             + by123)))
                      {
                        // QUAL = XHALMAT_QUAL(K); (5673)
                        {
                          descriptor_t *bitRHS
                              = (putBITp (16, mXHALMAT_QUALxPTR,
                                          getBIT (16, mPREPASSxK)),
                                 XHALMAT_QUAL (0));
                          putBIT (16, mPREPASSxQUAL, bitRHS);
                          bitRHS->inUse = 0;
                        }
                        // IF QUAL = XSYT OR QUAL = XVAC OR QUAL = XXPT THEN
                        // (5674)
                        if (1
                            & (xOR (xOR (xEQ (COREHALFWORD (mPREPASSxQUAL),
                                              COREHALFWORD (mXSYT)),
                                         xEQ (COREHALFWORD (mPREPASSxQUAL),
                                              COREHALFWORD (mXVAC))),
                                    xEQ (COREHALFWORD (mPREPASSxQUAL),
                                         COREHALFWORD (mXXPT)))))
                          // DO; (5675)
                          {
                          rs1s2s1s1s1:;
                            // TEMP = TEMP + 1; (5676)
                            {
                              int32_t numberRHS = (int32_t)(xadd (
                                  COREHALFWORD (mPREPASSxTEMP), 1));
                              descriptor_t *bitRHS;
                              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                              putBIT (16, mPREPASSxTEMP, bitRHS);
                              bitRHS->inUse = 0;
                            }
                            // LAST = TRUE; (5677)
                            {
                              int32_t numberRHS = (int32_t)(1);
                              descriptor_t *bitRHS;
                              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                              putBIT (16, mPREPASSxLAST, bitRHS);
                              bitRHS->inUse = 0;
                            }
                          es1s2s1s1s1:;
                          } // End of DO block
                        // ELSE (5678)
                        else
                          // DO; (5679)
                          {
                          rs1s2s1s1s2:;
                            // LAST = FALSE; (5680)
                            {
                              int32_t numberRHS = (int32_t)(0);
                              descriptor_t *bitRHS;
                              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                              putBIT (16, mPREPASSxLAST, bitRHS);
                              bitRHS->inUse = 0;
                            }
                          es1s2s1s1s2:;
                          } // End of DO block
                      }
                  } // End of DO for-loop block
                es1s2s1:;
                } // End of DO block
              // IF TEMP > 0 THEN (5681)
              if (1 & (xGT (COREHALFWORD (mPREPASSxTEMP), 0)))
                // DO; (5682)
                {
                rs1s2s2:;
                  // TEMP = (6 * TEMP) - 3; (5683)
                  {
                    int32_t numberRHS = (int32_t)(xsubtract (
                        xmultiply (6, COREHALFWORD (mPREPASSxTEMP)), 3));
                    descriptor_t *bitRHS;
                    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                    putBIT (16, mPREPASSxTEMP, bitRHS);
                    bitRHS->inUse = 0;
                  }
                  // IF LAST THEN (5684)
                  if (1 & (bitToFixed (getBIT (16, mPREPASSxLAST))))
                    // TEMP = TEMP - 2; (5685)
                    {
                      int32_t numberRHS = (int32_t)(xsubtract (
                          COREHALFWORD (mPREPASSxTEMP), 2));
                      descriptor_t *bitRHS;
                      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                      putBIT (16, mPREPASSxTEMP, bitRHS);
                      bitRHS->inUse = 0;
                    }
                  // ELSE (5686)
                  else
                    // TEMP = TEMP + 1; (5687)
                    {
                      int32_t numberRHS
                          = (int32_t)(xadd (COREHALFWORD (mPREPASSxTEMP), 1));
                      descriptor_t *bitRHS;
                      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                      putBIT (16, mPREPASSxTEMP, bitRHS);
                      bitRHS->inUse = 0;
                    }
                  // STOTAL = STOTAL + TEMP; (5688)
                  {
                    int32_t numberRHS
                        = (int32_t)(xadd (COREHALFWORD (mPREPASSxSTOTAL),
                                          COREHALFWORD (mPREPASSxTEMP)));
                    descriptor_t *bitRHS;
                    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                    putBIT (16, mPREPASSxSTOTAL, bitRHS);
                    bitRHS->inUse = 0;
                  }
                es1s2s2:;
                } // End of DO block
            es1s2:;
            } // End of DO block
      // PTR = PTR + N + 1; (5689)
      {
        int32_t numberRHS = (int32_t)(xadd (
            xadd (COREHALFWORD (mPREPASSxPTR), COREHALFWORD (mPREPASSxN)), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mPREPASSxPTR, bitRHS);
        bitRHS->inUse = 0;
      }
      // DO WHILE OPR(PTR); (5690)
      while (1 & (getFIXED (mOPR + 4 * COREHALFWORD (mPREPASSxPTR))))
        {
          // PTR = PTR + 1; (5691)
          {
            int32_t numberRHS
                = (int32_t)(xadd (COREHALFWORD (mPREPASSxPTR), 1));
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mPREPASSxPTR, bitRHS);
            bitRHS->inUse = 0;
          }
        } // End of DO WHILE block
      // OP = SHR(OPR(PTR),4) &  4095; (5692)
      {
        int32_t numberRHS = (int32_t)(xAND (
            SHR (getFIXED (mOPR + 4 * COREHALFWORD (mPREPASSxPTR)), 4), 4095));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mPREPASSxOP, bitRHS);
        bitRHS->inUse = 0;
      }
      // N = SHR(OPR(PTR),16) &  255; (5693)
      {
        int32_t numberRHS = (int32_t)(xAND (
            SHR (getFIXED (mOPR + 4 * COREHALFWORD (mPREPASSxPTR)), 16), 255));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mPREPASSxN, bitRHS);
        bitRHS->inUse = 0;
      }
    } // End of DO WHILE block
  // CALL QUICK_RELOCATE(PTR); (5694)
  {
    putBITp (16, mQUICK_RELOCATExPTR, getBIT (16, mPREPASSxPTR));
    QUICK_RELOCATE (0);
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
