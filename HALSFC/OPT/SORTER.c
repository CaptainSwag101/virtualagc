/*
  File SORTER.c generated by XCOM-I, 2024-08-08 04:31:49.
*/

#include "runtimeC.h"

int32_t
SORTER (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "SORTER");
  // IF TRACE THEN (1554)
  if (1 & (bitToFixed (getBIT (8, mTRACE))))
    // OUTPUT = 'SORTER: FIRST '||FIRST||' LAST '||LAST; (1555)
    {
      descriptor_t *stringRHS;
      stringRHS
          = xsCAT (xsCAT (xsCAT (cToDescriptor (NULL, "SORTER: FIRST "),
                                 bitToCharacter (getBIT (16, mSORTERxFIRST))),
                          cToDescriptor (NULL, " LAST ")),
                   bitToCharacter (getBIT (16, mSORTERxLAST)));
      OUTPUT (0, stringRHS);
      stringRHS->inUse = 0;
    }
  // K,L=LAST; (1556)
  {
    descriptor_t *bitRHS = getBIT (16, mSORTERxLAST);
    putBIT (16, mSORTERxK, bitRHS);
    putBIT (16, mSORTERxL, bitRHS);
    bitRHS->inUse = 0;
  }
  // DO WHILE K<=L; (1557)
  while (1 & (xLE (COREHALFWORD (mSORTERxK), COREHALFWORD (mSORTERxL))))
    {
      // L = -LAST; (1558)
      {
        int32_t numberRHS = (int32_t)(xminus (COREHALFWORD (mSORTERxLAST)));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mSORTERxL, bitRHS);
        bitRHS->inUse = 0;
      }
      // DO I = FIRST+1 TO K; (1559)
      {
        int32_t from34, to34, by34;
        from34 = xadd (COREHALFWORD (mSORTERxFIRST), 1);
        to34 = bitToFixed (getBIT (16, mSORTERxK));
        by34 = 1;
        for (putBIT (16, mSORTERxI, fixedToBit (16, from34));
             bitToFixed (getBIT (16, mSORTERxI)) <= to34; putBIT (
                 16, mSORTERxI,
                 fixedToBit (16, bitToFixed (getBIT (16, mSORTERxI)) + by34)))
          {
            // L = I-1; (1560)
            {
              int32_t numberRHS
                  = (int32_t)(xsubtract (COREHALFWORD (mSORTERxI), 1));
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (16, mSORTERxL, bitRHS);
              bitRHS->inUse = 0;
            }
            // IF NODE(L) < NODE(I) THEN (1561)
            if (1
                & (xLT (getFIXED (mNODE + 4 * COREHALFWORD (mSORTERxL)),
                        getFIXED (mNODE + 4 * COREHALFWORD (mSORTERxI)))))
              // DO; (1562)
              {
              rs1s1s1:;
                // TEMP = NODE(L); (1563)
                {
                  int32_t numberRHS = (int32_t)(getFIXED (
                      mNODE + 4 * COREHALFWORD (mSORTERxL)));
                  putFIXED (mSORTERxTEMP, numberRHS);
                }
                // NODE(L) = NODE(I); (1564)
                {
                  int32_t numberRHS = (int32_t)(getFIXED (
                      mNODE + 4 * COREHALFWORD (mSORTERxI)));
                  putFIXED (mNODE + 4 * (COREHALFWORD (mSORTERxL)), numberRHS);
                }
                // NODE(I) = TEMP; (1565)
                {
                  int32_t numberRHS = (int32_t)(getFIXED (mSORTERxTEMP));
                  putFIXED (mNODE + 4 * (COREHALFWORD (mSORTERxI)), numberRHS);
                }
                // TEMP = NODE2(L); (1566)
                {
                  descriptor_t *bitRHS
                      = getBIT (16, mNODE2 + 2 * COREHALFWORD (mSORTERxL));
                  int32_t numberRHS;
                  numberRHS = bitToFixed (bitRHS);
                  putFIXED (mSORTERxTEMP, numberRHS);
                  bitRHS->inUse = 0;
                }
                // NODE2(L) = NODE2(I); (1567)
                {
                  descriptor_t *bitRHS
                      = getBIT (16, mNODE2 + 2 * COREHALFWORD (mSORTERxI));
                  putBIT (16, mNODE2 + 2 * (COREHALFWORD (mSORTERxL)), bitRHS);
                  bitRHS->inUse = 0;
                }
                // NODE2(I) = TEMP; (1568)
                {
                  int32_t numberRHS = (int32_t)(getFIXED (mSORTERxTEMP));
                  descriptor_t *bitRHS;
                  bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                  putBIT (16, mNODE2 + 2 * (COREHALFWORD (mSORTERxI)), bitRHS);
                  bitRHS->inUse = 0;
                }
                // K = L; (1569)
                {
                  descriptor_t *bitRHS = getBIT (16, mSORTERxL);
                  putBIT (16, mSORTERxK, bitRHS);
                  bitRHS->inUse = 0;
                }
              es1s1s1:;
              } // End of DO block
            // ELSE (1570)
            else
              // IF NODE(L) = NODE(I)THEN (1571)
              if (1
                  & (xEQ (getFIXED (mNODE + 4 * COREHALFWORD (mSORTERxL)),
                          getFIXED (mNODE + 4 * COREHALFWORD (mSORTERxI)))))
                // DO; (1572)
                {
                rs1s1s2:;
                  // IF NODE2(L) < NODE2(I) THEN (1573)
                  if (1
                      & (xLT (
                          COREHALFWORD (mNODE2 + 2 * COREHALFWORD (mSORTERxL)),
                          COREHALFWORD (mNODE2
                                        + 2 * COREHALFWORD (mSORTERxI)))))
                    // DO; (1574)
                    {
                    rs1s1s2s1:;
                      // TEMP = NODE2(L); (1575)
                      {
                        descriptor_t *bitRHS = getBIT (
                            16, mNODE2 + 2 * COREHALFWORD (mSORTERxL));
                        int32_t numberRHS;
                        numberRHS = bitToFixed (bitRHS);
                        putFIXED (mSORTERxTEMP, numberRHS);
                        bitRHS->inUse = 0;
                      }
                      // NODE2(L) = NODE2(I); (1576)
                      {
                        descriptor_t *bitRHS = getBIT (
                            16, mNODE2 + 2 * COREHALFWORD (mSORTERxI));
                        putBIT (16, mNODE2 + 2 * (COREHALFWORD (mSORTERxL)),
                                bitRHS);
                        bitRHS->inUse = 0;
                      }
                      // NODE2(I) = TEMP; (1577)
                      {
                        int32_t numberRHS = (int32_t)(getFIXED (mSORTERxTEMP));
                        descriptor_t *bitRHS;
                        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                        putBIT (16, mNODE2 + 2 * (COREHALFWORD (mSORTERxI)),
                                bitRHS);
                        bitRHS->inUse = 0;
                      }
                      // K = L; (1578)
                      {
                        descriptor_t *bitRHS = getBIT (16, mSORTERxL);
                        putBIT (16, mSORTERxK, bitRHS);
                        bitRHS->inUse = 0;
                      }
                    es1s1s2s1:;
                    } // End of DO block
                es1s1s2:;
                } // End of DO block
          }
      } // End of DO for-loop block
    }   // End of DO WHILE block
  {
    reentryGuard = 0;
    return 0;
  }
}
