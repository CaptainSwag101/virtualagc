/*
  File PASS1xSEARCH_FOR_REF.c generated by XCOM-I, 2024-08-09 12:39:13.
*/

#include "runtimeC.h"

int32_t
PASS1xSEARCH_FOR_REF (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "PASS1xSEARCH_FOR_REF");
  // REF_PTR1 = PATER; (1306)
  {
    descriptor_t *bitRHS = getBIT (16, mPASS1xSEARCH_FOR_REFxPATER);
    putBIT (16, mREF_PTR1, bitRHS);
    bitRHS->inUse = 0;
  }
  // REF_PTR2 = LIST_HEAD; (1307)
  {
    descriptor_t *bitRHS = getBIT (16, mPASS1xSEARCH_FOR_REFxLIST_HEAD);
    putBIT (16, mREF_PTR2, bitRHS);
    bitRHS->inUse = 0;
  }
  // DO WHILE TRUE; (1308)
  while (1 & (1))
    {
      // IF REF_PTR2 = 0 THEN (1309)
      if (1 & (xEQ (COREHALFWORD (mREF_PTR2), 0)))
        // RETURN; (1310)
        {
          reentryGuard = 0;
          return 0;
        }
      // IF (CELL1(REF_PTR2) = RAND) & ((CELL1_FLAGS(REF_PTR2) &  63) =
      // RAND_TYPE) THEN (1311)
      if (1
          & (xAND (xEQ (COREHALFWORD (getFIXED (mLIST_STRUX)
                                      + 8 * (COREHALFWORD (mREF_PTR2)) + 0
                                      + 2 * (0)),
                        COREHALFWORD (mPASS1xSEARCH_FOR_REFxRAND)),
                   xEQ (xAND (BYTE0 (getFIXED (mLIST_STRUX)
                                     + 8 * (COREHALFWORD (mREF_PTR2)) + 6
                                     + 1 * (0)),
                              63),
                        BYTE0 (mPASS1xSEARCH_FOR_REFxRAND_TYPE)))))
        // RETURN; (1312)
        {
          reentryGuard = 0;
          return 0;
        }
      // REF_PTR1 = REF_PTR2; (1313)
      {
        descriptor_t *bitRHS = getBIT (16, mREF_PTR2);
        putBIT (16, mREF_PTR1, bitRHS);
        bitRHS->inUse = 0;
      }
      // REF_PTR2 = CDR_CELL(REF_PTR1); (1314)
      {
        descriptor_t *bitRHS
            = getBIT (16, getFIXED (mLIST_STRUX)
                              + 8 * (COREHALFWORD (mREF_PTR1)) + 4 + 2 * (0));
        putBIT (16, mREF_PTR2, bitRHS);
        bitRHS->inUse = 0;
      }
    } // End of DO WHILE block
  {
    reentryGuard = 0;
    return 0;
  }
}
