/*
  File BUILD_SDFxGET_SDF_CELL.c generated by XCOM-I, 2024-08-08 04:35:09.
*/

#include "runtimeC.h"

int32_t
BUILD_SDFxGET_SDF_CELL (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "BUILD_SDFxGET_SDF_CELL");
  // PTR_TYPE = SHR(VMEM_PTR,30) & 3; (3783)
  {
    int32_t numberRHS = (int32_t)(xAND (
        SHR (getFIXED (mBUILD_SDFxGET_SDF_CELLxVMEM_PTR), 30), 3));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mBUILD_SDFxPTR_TYPE, bitRHS);
    bitRHS->inUse = 0;
  }
  // CALL LOCATE(VMEM_PTR &  1073741823,ADDR(NODE_H),0); (3784)
  {
    putFIXED (mLOCATExPTR,
              xAND (getFIXED (mBUILD_SDFxGET_SDF_CELLxVMEM_PTR), 1073741823));
    putFIXED (mLOCATExBVAR,
              ADDR ("BUILD_SDFxGET_SDF_CELLxNODE_H", 0x80000000, NULL, 0));
    putBITp (8, mLOCATExFLAGS, fixedToBit (32, (int32_t)(0)));
    LOCATE (0);
  }
  // SDF_PTR = GET_DATA_CELL(NODE_H(0),ADDR(NODE_F),0) | SHL(PTR_TYPE,30);
  // (3785)
  {
    int32_t numberRHS = (int32_t)(xOR (
        (putFIXED (
             mGET_DATA_CELLxLENGTH,
             COREHALFWORD (getFIXED (mBUILD_SDFxGET_SDF_CELLxNODE_H) + 2 * 0)),
         putFIXED (mGET_DATA_CELLxBVAR, ADDR ("BUILD_SDFxGET_SDF_CELLxNODE_F",
                                              0x80000000, NULL, 0)),
         putBITp (8, mGET_DATA_CELLxFLAGS, fixedToBit (32, (int32_t)(0))),
         GET_DATA_CELL (0)),
        SHL (COREHALFWORD (mBUILD_SDFxPTR_TYPE), 30)));
    putFIXED (mBUILD_SDFxGET_SDF_CELLxSDF_PTR, numberRHS);
  }
  // CALL MOVE(NODE_H(0),VMEM_LOC_ADDR,LOC_ADDR); (3786)
  {
    putBITp (16, mMOVExLEGNTH,
             getBIT (16, getFIXED (mBUILD_SDFxGET_SDF_CELLxNODE_H) + 2 * 0));
    putFIXED (mMOVExFROM, getFIXED (mVMEM_LOC_ADDR));
    putFIXED (mMOVExINTO, getFIXED (mLOC_ADDR));
    MOVE (0);
  }
  // PTR_INX = PTR_INX + 1; (3787)
  {
    int32_t numberRHS = (int32_t)(xadd (COREHALFWORD (mBUILD_SDFxPTR_INX), 1));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mBUILD_SDFxPTR_INX, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF PTR_INX > 400 THEN (3788)
  if (1 & (xGT (COREHALFWORD (mBUILD_SDFxPTR_INX), 400)))
    // DO; (3789)
    {
    rs1:;
      // OUTPUT = X1; (3790)
      {
        descriptor_t *stringRHS;
        stringRHS = getCHARACTER (mX1);
        OUTPUT (0, stringRHS);
        stringRHS->inUse = 0;
      }
      // OUTPUT = P3ERR || 'CELL PTR STACK OVERFLOW ***'; (3791)
      {
        descriptor_t *stringRHS;
        stringRHS
            = xsCAT (getCHARACTER (mP3ERR),
                     cToDescriptor (NULL, "CELL PTR STACK OVERFLOW ***"));
        OUTPUT (0, stringRHS);
        stringRHS->inUse = 0;
      }
      // GO TO PHASE3_ERROR; (3792)
      {
        resetAllReentryGuards ();
        longjmp (jbPHASE3_ERROR, 1);
      }
    es1:;
    } // End of DO block
  // PTRS(PTR_INX) = SDF_PTR; (3793)
  {
    int32_t numberRHS = (int32_t)(getFIXED (mBUILD_SDFxGET_SDF_CELLxSDF_PTR));
    putFIXED (mBUILD_SDFxPTRS + 4 * (COREHALFWORD (mBUILD_SDFxPTR_INX)),
              numberRHS);
  }
  // RETURN SDF_PTR; (3794)
  {
    reentryGuard = 0;
    return getFIXED (mBUILD_SDFxGET_SDF_CELLxSDF_PTR);
  }
}
