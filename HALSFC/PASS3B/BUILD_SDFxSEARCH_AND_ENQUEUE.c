/*
  File BUILD_SDFxSEARCH_AND_ENQUEUE.c generated by XCOM-I, 2024-08-08 04:35:09.
*/

#include "runtimeC.h"

int32_t
BUILD_SDFxSEARCH_AND_ENQUEUE (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "BUILD_SDFxSEARCH_AND_ENQUEUE");
  // PTR_TEMP = SYMB_TO_PTR(SUBJ_SYMB); (3753)
  {
    int32_t numberRHS = (int32_t)((
        putBITp (16, mSYMB_TO_PTRxSYMB,
                 getBIT (16, mBUILD_SDFxSEARCH_AND_ENQUEUExSUBJ_SYMB)),
        SYMB_TO_PTR (0)));
    putFIXED (mBUILD_SDFxPTR_TEMP, numberRHS);
  }
  // SUBJ_PTR = EXTRACT4(PTR_TEMP,8,0) - 2; (3754)
  {
    int32_t numberRHS = (int32_t)(xsubtract (
        (putFIXED (mEXTRACT4xPTR, getFIXED (mBUILD_SDFxPTR_TEMP)),
         putBITp (16, mEXTRACT4xOFFSET, fixedToBit (32, (int32_t)(8))),
         putBITp (8, mEXTRACT4xFLAGS, fixedToBit (32, (int32_t)(0))),
         EXTRACT4 (0)),
        2));
    putFIXED (mBUILD_SDFxSEARCH_AND_ENQUEUExSUBJ_PTR, numberRHS);
  }
  // DO CASE TYPE; (3755)
  {
  rs1:
    switch (getFIXED (mBUILD_SDFxSEARCH_AND_ENQUEUExTYPE))
      {
      case 0:
        // PREV_PTR = ROOT_PTR + 32; (3757)
        {
          int32_t numberRHS = (int32_t)(xadd (getFIXED (mROOT_PTR), 32));
          putFIXED (mBUILD_SDFxPREV_PTR, numberRHS);
        }
        break;
      case 1:
        // PREV_PTR = ROOT_PTR + 32; (3758)
        {
          int32_t numberRHS = (int32_t)(xadd (getFIXED (mROOT_PTR), 32));
          putFIXED (mBUILD_SDFxPREV_PTR, numberRHS);
        }
        break;
      case 2:
        // PREV_PTR = ROOT_PTR + 34; (3759)
        {
          int32_t numberRHS = (int32_t)(xadd (getFIXED (mROOT_PTR), 34));
          putFIXED (mBUILD_SDFxPREV_PTR, numberRHS);
        }
        break;
      case 3:
        // PREV_PTR = PROC_TAB4(I) + 42; (3760)
        {
          int32_t numberRHS = (int32_t)(xadd (
              getFIXED (mPROC_TAB4 + 4 * COREHALFWORD (mBUILD_SDFxI)), 42));
          putFIXED (mBUILD_SDFxPREV_PTR, numberRHS);
        }
        break;
      case 4:
        // PREV_PTR = PREV_SYMB - 2; (3761)
        {
          int32_t numberRHS = (int32_t)(xsubtract (
              getFIXED (mBUILD_SDFxSEARCH_AND_ENQUEUExPREV_SYMB), 2));
          putFIXED (mBUILD_SDFxPREV_PTR, numberRHS);
        }
        break;
      }
  } // End of DO CASE block
  // CALL P3_LOCATE(PREV_PTR,ADDR(NODE_H),0); (3761)
  {
    putFIXED (mP3_LOCATExPTR, getFIXED (mBUILD_SDFxPREV_PTR));
    putFIXED (mP3_LOCATExBVAR, ADDR ("BUILD_SDFxNODE_H", 0x80000000, NULL, 0));
    putBITp (8, mP3_LOCATExFLAGS, fixedToBit (32, (int32_t)(0)));
    P3_LOCATE (0);
  }
  // NEXT_SYMB = NODE_H(0); (3762)
  {
    descriptor_t *bitRHS = getBIT (16, getFIXED (mBUILD_SDFxNODE_H) + 2 * 0);
    putBIT (16, mBUILD_SDFxSEARCH_AND_ENQUEUExNEXT_SYMB, bitRHS);
    bitRHS->inUse = 0;
  }
  // DO WHILE NEXT_SYMB ~= 0; (3763)
  while (1
         & (xNEQ (COREHALFWORD (mBUILD_SDFxSEARCH_AND_ENQUEUExNEXT_SYMB), 0)))
    {
      // PTR_TEMP = SYMB_TO_PTR(NEXT_SYMB); (3764)
      {
        int32_t numberRHS = (int32_t)((
            putBITp (16, mSYMB_TO_PTRxSYMB,
                     getBIT (16, mBUILD_SDFxSEARCH_AND_ENQUEUExNEXT_SYMB)),
            SYMB_TO_PTR (0)));
        putFIXED (mBUILD_SDFxPTR_TEMP, numberRHS);
      }
      // NEXT_PTR = EXTRACT4(PTR_TEMP,8,0) - 2; (3765)
      {
        int32_t numberRHS = (int32_t)(xsubtract (
            (putFIXED (mEXTRACT4xPTR, getFIXED (mBUILD_SDFxPTR_TEMP)),
             putBITp (16, mEXTRACT4xOFFSET, fixedToBit (32, (int32_t)(8))),
             putBITp (8, mEXTRACT4xFLAGS, fixedToBit (32, (int32_t)(0))),
             EXTRACT4 (0)),
            2));
        putFIXED (mBUILD_SDFxNEXT_PTR, numberRHS);
      }
      // CALL P3_LOCATE(NEXT_PTR+2,ADDR(NODE_F),0); (3766)
      {
        putFIXED (mP3_LOCATExPTR, xadd (getFIXED (mBUILD_SDFxNEXT_PTR), 2));
        putFIXED (mP3_LOCATExBVAR,
                  ADDR ("BUILD_SDFxNODE_F", 0x80000000, NULL, 0));
        putBITp (8, mP3_LOCATExFLAGS, fixedToBit (32, (int32_t)(0)));
        P3_LOCATE (0);
      }
      // COREWORD(ADDR(NODE_H)) = LOC_ADDR; (3767)
      {
        int32_t numberRHS = (int32_t)(getFIXED (mLOC_ADDR));
        COREWORD2 (ADDR ("BUILD_SDFxNODE_H", 0x80000000, NULL, 0), numberRHS);
      }
      // IF (NODE_F(2) &  512) ~= 0 THEN (3768)
      if (1
          & (xNEQ (xAND (getFIXED (getFIXED (mBUILD_SDFxNODE_F) + 4 * 2), 512),
                   0)))
        // DO; (3769)
        {
        rs2s1:;
          // IF NODE_H(10) > REL_ADDR THEN (3770)
          if (1
              & (xGT (COREHALFWORD (getFIXED (mBUILD_SDFxNODE_H) + 2 * 10),
                      getFIXED (mBUILD_SDFxSEARCH_AND_ENQUEUExREL_ADDR))))
            // GO TO INSERT; (3771)
            goto INSERT;
        es2s1:;
        } // End of DO block
      // ELSE (3772)
      else
        // IF (NODE_F(3) &  16777215) > REL_ADDR THEN (3773)
        if (1
            & (xGT (xAND (getFIXED (getFIXED (mBUILD_SDFxNODE_F) + 4 * 3),
                          16777215),
                    getFIXED (mBUILD_SDFxSEARCH_AND_ENQUEUExREL_ADDR))))
          // GO TO INSERT; (3774)
          goto INSERT;
      // NEXT_SYMB = NODE_F(-1) &  65535; (3775)
      {
        int32_t numberRHS = (int32_t)(xAND (
            getFIXED (getFIXED (mBUILD_SDFxNODE_F) + 4 * -1), 65535));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mBUILD_SDFxSEARCH_AND_ENQUEUExNEXT_SYMB, bitRHS);
        bitRHS->inUse = 0;
      }
      // PREV_PTR = NEXT_PTR; (3776)
      {
        int32_t numberRHS = (int32_t)(getFIXED (mBUILD_SDFxNEXT_PTR));
        putFIXED (mBUILD_SDFxPREV_PTR, numberRHS);
      }
    } // End of DO WHILE block
  // IF (CMPL_FLAG=FALSE)&((TYPE=0)|(TYPE=1)) THEN (3777)
  if (1
      & (xAND (xEQ (BYTE0 (mBUILD_SDFxCMPL_FLAG), 0),
               xOR (xEQ (getFIXED (mBUILD_SDFxSEARCH_AND_ENQUEUExTYPE), 0),
                    xEQ (getFIXED (mBUILD_SDFxSEARCH_AND_ENQUEUExTYPE), 1)))))
    // LIT_ADDR = REL_ADDR + EXTENT; (3778)
    {
      int32_t numberRHS
          = (int32_t)(xadd (getFIXED (mBUILD_SDFxSEARCH_AND_ENQUEUExREL_ADDR),
                            getFIXED (mBUILD_SDFxEXTENT)));
      putFIXED (mLIT_ADDR, numberRHS);
    }
// INSERT: (3779)
INSERT:
  // CALL PUTN(PREV_PTR,0,ADDR(SUBJ_SYMB),2,0); (3780)
  {
    putFIXED (mPUTNxPTR, getFIXED (mBUILD_SDFxPREV_PTR));
    putBITp (16, mPUTNxOFFSET, fixedToBit (32, (int32_t)(0)));
    putFIXED (mPUTNxCORE_ADDR,
              ADDR (NULL, 0, "BUILD_SDFxSEARCH_AND_ENQUEUExSUBJ_SYMB", 0));
    putBITp (16, mPUTNxCOUNT, fixedToBit (32, (int32_t)(2)));
    putBITp (8, mPUTNxFLAGS, fixedToBit (32, (int32_t)(0)));
    PUTN (0);
  }
  // IF (TYPE = 4) | (NEXT_SYMB ~= 0) THEN (3781)
  if (1
      & (xOR (
          xEQ (getFIXED (mBUILD_SDFxSEARCH_AND_ENQUEUExTYPE), 4),
          xNEQ (COREHALFWORD (mBUILD_SDFxSEARCH_AND_ENQUEUExNEXT_SYMB), 0))))
    // CALL PUTN(SUBJ_PTR,0,ADDR(NEXT_SYMB),2,0); (3782)
    {
      putFIXED (mPUTNxPTR, getFIXED (mBUILD_SDFxSEARCH_AND_ENQUEUExSUBJ_PTR));
      putBITp (16, mPUTNxOFFSET, fixedToBit (32, (int32_t)(0)));
      putFIXED (mPUTNxCORE_ADDR,
                ADDR (NULL, 0, "BUILD_SDFxSEARCH_AND_ENQUEUExNEXT_SYMB", 0));
      putBITp (16, mPUTNxCOUNT, fixedToBit (32, (int32_t)(2)));
      putBITp (8, mPUTNxFLAGS, fixedToBit (32, (int32_t)(0)));
      PUTN (0);
    }
  {
    reentryGuard = 0;
    return 0;
  }
}
