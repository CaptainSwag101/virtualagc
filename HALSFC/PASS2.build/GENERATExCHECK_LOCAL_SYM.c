/*
  File GENERATExCHECK_LOCAL_SYM.c generated by XCOM-I, 2024-08-09 12:39:31.
*/

#include "runtimeC.h"

descriptor_t *
GENERATExCHECK_LOCAL_SYM (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (descriptor_t *)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GENERATExCHECK_LOCAL_SYM");
  // SY = LOC(PTR); (4380)
  {
    descriptor_t *bitRHS
        = getBIT (16, getFIXED (mIND_STACK)
                          + 73 * (COREHALFWORD (mGENERATExCHECK_LOCAL_SYMxPTR))
                          + 40 + 2 * (0));
    putBIT (16, mGENERATExCHECK_LOCAL_SYMxSY, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF SYT_SCOPE(SY) < PROGPOINT THEN (4381)
  if (1
      & (xLT (BYTE0 (getFIXED (mSYM_TAB)
                     + 34 * (COREHALFWORD (mGENERATExCHECK_LOCAL_SYMxSY)) + 29
                     + 1 * (0)),
              COREHALFWORD (mPROGPOINT))))
    // RETURN SYM; (4382)
    {
      reentryGuard = 0;
      return getBIT (8, mSYM);
    }
  // IF SYT_BASE(SY) = TEMPBASE THEN (4383)
  if (1
      & (xEQ (
          COREHALFWORD (getFIXED (mP2SYMS)
                        + 12 * (COREHALFWORD (mGENERATExCHECK_LOCAL_SYMxSY))
                        + 4 + 2 * (0)),
          BYTE0 (mTEMPBASE))))
    // RETURN SYM; (4384)
    {
      reentryGuard = 0;
      return getBIT (8, mSYM);
    }
  // IF SYT_LINK2(SY) = 0 THEN (4385)
  if (1
      & (xEQ (
          COREHALFWORD (getFIXED (mSYM_TAB)
                        + 34 * (COREHALFWORD (mGENERATExCHECK_LOCAL_SYMxSY))
                        + 26 + 2 * (0)),
          0)))
    // RETURN SYM; (4386)
    {
      reentryGuard = 0;
      return getBIT (8, mSYM);
    }
  // IF ~(DATA_REMOTE & (SYT_BASE(SY) = 1)) THEN (4387)
  if (1
      & (xNOT (
          xAND (BYTE0 (mDATA_REMOTE),
                xEQ (COREHALFWORD (
                         getFIXED (mP2SYMS)
                         + 12 * (COREHALFWORD (mGENERATExCHECK_LOCAL_SYMxSY))
                         + 4 + 2 * (0)),
                     1)))))
    // IF CHECK_SRS(INST,INX(PTR),PROCBASE,SYT_LINK2(SY)+INX_CON(PTR))= SRSTYPE
    // THEN (4388)
    if (1
        & (xEQ (
            bitToFixed (
                (putBITp (16, mCHECK_SRSxINST,
                          getBIT (16, mGENERATExCHECK_LOCAL_SYMxINST)),
                 putBITp (
                     16, mCHECK_SRSxIX,
                     getBIT (16, getFIXED (mIND_STACK)
                                     + 73
                                           * (COREHALFWORD (
                                               mGENERATExCHECK_LOCAL_SYMxPTR))
                                     + 34 + 2 * (0))),
                 putBITp (16, mCHECK_SRSxBASE, getBIT (8, mPROCBASE)),
                 putFIXED (
                     mCHECK_SRSxDISP,
                     xadd (
                         COREHALFWORD (getFIXED (mSYM_TAB)
                                       + 34
                                             * (COREHALFWORD (
                                                 mGENERATExCHECK_LOCAL_SYMxSY))
                                       + 26 + 2 * (0)),
                         getFIXED (getFIXED (mIND_STACK)
                                   + 73
                                         * (COREHALFWORD (
                                             mGENERATExCHECK_LOCAL_SYMxPTR))
                                   + 4 + 4 * (0)))),
                 CHECK_SRS (0))),
            BYTE0 (mSRSTYPE))))
      // IF SYT_SCOPE(SY) = INDEXNEST & NOT_LEAF(INDEXNEST) = 3 THEN (4389)
      if (1
          & (xAND (
              xEQ (BYTE0 (getFIXED (mSYM_TAB)
                          + 34 * (COREHALFWORD (mGENERATExCHECK_LOCAL_SYMxSY))
                          + 29 + 1 * (0)),
                   COREHALFWORD (mINDEXNEST)),
              xEQ (BYTE0 (mNOT_LEAF + 1 * COREHALFWORD (mINDEXNEST)), 3))))
        // DO; (4390)
        {
        rs1:;
          // IF ((SYT_FLAGS(SY) & NAME_FLAG) ~= 0) THEN (4391)
          if (1
              & (xNEQ (xAND (getFIXED (getFIXED (mSYM_TAB)
                                       + 34
                                             * (COREHALFWORD (
                                                 mGENERATExCHECK_LOCAL_SYMxSY))
                                       + 8 + 4 * (0)),
                             getFIXED (mNAME_FLAG)),
                       0)))
            // RETURN SYM; (4392)
            {
              reentryGuard = 0;
              return getBIT (8, mSYM);
            }
          // ELSE (4393)
          else
            // RETURN IMD; (4394)
            {
              reentryGuard = 0;
              return getBIT (8, mIMD);
            }
        es1:;
        } // End of DO block
      // ELSE (4395)
      else
        // IF SYT_SCOPE(SY) = PROGPOINT THEN (4396)
        if (1
            & (xEQ (BYTE0 (getFIXED (mSYM_TAB)
                           + 34 * (COREHALFWORD (mGENERATExCHECK_LOCAL_SYMxSY))
                           + 29 + 1 * (0)),
                    COREHALFWORD (mPROGPOINT))))
          // IF INST >=  80 & INST <  128 THEN (4397)
          if (1
              & (xAND (
                  xGE (COREHALFWORD (mGENERATExCHECK_LOCAL_SYMxINST), 80),
                  xLT (COREHALFWORD (mGENERATExCHECK_LOCAL_SYMxINST), 128))))
            // SRS_REFS(1) = SRS_REFS(1) + 1; (4398)
            {
              int32_t numberRHS
                  = (int32_t)(xadd (COREHALFWORD (mSRS_REFS + 2 * 1), 1));
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (16, mSRS_REFS + 2 * (1), bitRHS);
              bitRHS->inUse = 0;
            }
          // ELSE (4399)
          else
            // SRS_REFS = SRS_REFS + 1; (4400)
            {
              int32_t numberRHS
                  = (int32_t)(xadd (COREHALFWORD (mSRS_REFS), 1));
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (16, mSRS_REFS, bitRHS);
              bitRHS->inUse = 0;
            }
  // RETURN SYM; (4401)
  {
    reentryGuard = 0;
    return getBIT (8, mSYM);
  }
}
