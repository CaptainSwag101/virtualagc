/*
  File DECODEPIP.c generated by XCOM-I, 2024-08-09 12:41:08.
*/

#include "runtimeC.h"

int32_t
DECODEPIP (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "DECODEPIP");
  // OP=OP+CTR; (656)
  {
    int32_t numberRHS
        = (int32_t)(xadd (COREHALFWORD (mDECODEPIPxOP), COREHALFWORD (mCTR)));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mDECODEPIPxOP, bitRHS);
    bitRHS->inUse = 0;
  }
  // OP1=SHR(OPR(OP),16) &  32767; (657)
  {
    int32_t numberRHS = (int32_t)(xAND (
        SHR (getFIXED (mOPR + 4 * COREHALFWORD (mDECODEPIPxOP)), 16), 32767));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mOP1, bitRHS);
    bitRHS->inUse = 0;
  }
  // TAG1=SHR(OPR(OP),4)& 15; (658)
  {
    int32_t numberRHS = (int32_t)(xAND (
        SHR (getFIXED (mOPR + 4 * COREHALFWORD (mDECODEPIPxOP)), 4), 15));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mTAG1, bitRHS);
    bitRHS->inUse = 0;
  }
  // TAG2(N)=SHR(OPR(OP),1)& 7; (659)
  {
    int32_t numberRHS = (int32_t)(xAND (
        SHR (getFIXED (mOPR + 4 * COREHALFWORD (mDECODEPIPxOP)), 1), 7));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mTAG2 + 2 * (COREHALFWORD (mDECODEPIPxN)), bitRHS);
    bitRHS->inUse = 0;
  }
  // TAG3(N)=SHR(OPR(OP),8)& 255; (660)
  {
    int32_t numberRHS = (int32_t)(xAND (
        SHR (getFIXED (mOPR + 4 * COREHALFWORD (mDECODEPIPxOP)), 8), 255));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mTAG3 + 2 * (COREHALFWORD (mDECODEPIPxN)), bitRHS);
    bitRHS->inUse = 0;
  }
  // IF HALMAT_REQUESTED THEN (661)
  if (1 & (bitToFixed (getBIT (8, mHALMAT_REQUESTED))))
    // DO; (662)
    {
    rs1:;
      // MESSAGE=FORMAT(TAG3(N),3)||COMMA||TAG2(N)||' :'||CURCBLK-1||'.'||OP;
      // (663)
      {
        descriptor_t *stringRHS;
        stringRHS = xsCAT (
            xsCAT (
                xsCAT (
                    xsCAT (
                        xsCAT (
                            xsCAT (
                                (putFIXED (
                                     mFORMATxIVAL,
                                     COREHALFWORD (
                                         mTAG3
                                         + 2 * COREHALFWORD (mDECODEPIPxN))),
                                 putFIXED (mFORMATxN, 3), FORMAT (0)),
                                getCHARACTER (mCOMMA)),
                            bitToCharacter (getBIT (
                                16, mTAG2 + 2 * COREHALFWORD (mDECODEPIPxN)))),
                        cToDescriptor (NULL, " :")),
                    fixedToCharacter (xsubtract (BYTE0 (mCURCBLK), 1))),
                cToDescriptor (NULL, ".")),
            bitToCharacter (getBIT (16, mDECODEPIPxOP)));
        putCHARACTER (mMESSAGE, stringRHS);
        stringRHS->inUse = 0;
      }
      // IF SHR(OPR(OP),31) THEN (664)
      if (1 & (SHR (getFIXED (mOPR + 4 * COREHALFWORD (mDECODEPIPxOP)), 31)))
        // MESSAGE = MESSAGE || '*'; (665)
        {
          descriptor_t *stringRHS;
          stringRHS
              = xsCAT (getCHARACTER (mMESSAGE), cToDescriptor (NULL, "*"));
          putCHARACTER (mMESSAGE, stringRHS);
          stringRHS->inUse = 0;
        }
      // MESSAGE=FORMAT(TAG1,2)||'),'||MESSAGE; (666)
      {
        descriptor_t *stringRHS;
        stringRHS
            = xsCAT (xsCAT ((putFIXED (mFORMATxIVAL, COREHALFWORD (mTAG1)),
                             putFIXED (mFORMATxN, 2), FORMAT (0)),
                            cToDescriptor (NULL, "),")),
                     getCHARACTER (mMESSAGE));
        putCHARACTER (mMESSAGE, stringRHS);
        stringRHS->inUse = 0;
      }
      // OUTPUT=FORMAT(OP1,20)||LEFTBRACKET||MESSAGE; (667)
      {
        descriptor_t *stringRHS;
        stringRHS
            = xsCAT (xsCAT ((putFIXED (mFORMATxIVAL, COREHALFWORD (mOP1)),
                             putFIXED (mFORMATxN, 20), FORMAT (0)),
                            getCHARACTER (mLEFTBRACKET)),
                     getCHARACTER (mMESSAGE));
        OUTPUT (0, stringRHS);
        stringRHS->inUse = 0;
      }
    es1:;
    } // End of DO block
  // N = 0; (668)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mDECODEPIPxN, bitRHS);
    bitRHS->inUse = 0;
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
