/*
  File ASSIGNMENT.c generated by XCOM-I, 2024-08-09 12:41:08.
*/

#include "runtimeC.h"

int32_t
ASSIGNMENT (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "ASSIGNMENT");
  // IF TRACE THEN (3142)
  if (1 & (bitToFixed (getBIT (8, mTRACE))))
    // OUTPUT = 'ASSIGNMENT: ' || CTR; (3143)
    {
      descriptor_t *stringRHS;
      stringRHS = xsCAT (cToDescriptor (NULL, "ASSIGNMENT: "),
                         bitToCharacter (getBIT (16, mASSIGNMENTxCTR)));
      OUTPUT (0, stringRHS);
      stringRHS->inUse = 0;
    }
  // SIMPLE_ASSIGN = SYTP(CTR + 1); (3144)
  {
    int32_t numberRHS = (int32_t)((
        putBITp (16, mSYTPxPTR,
                 fixedToBit (
                     32, (int32_t)(xadd (COREHALFWORD (mASSIGNMENTxCTR), 1)))),
        SYTP (0)));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mASSIGNMENTxSIMPLE_ASSIGN, bitRHS);
    bitRHS->inUse = 0;
  }
  // RHS_PTR = SHR(OPR(CTR + 1),16); (3145)
  {
    int32_t numberRHS = (int32_t)(SHR (
        getFIXED (mOPR + 4 * xadd (COREHALFWORD (mASSIGNMENTxCTR), 1)), 16));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mASSIGNMENTxRHS_PTR, bitRHS);
    bitRHS->inUse = 0;
  }
  // DO FOR I = CTR + 2 TO CTR + NO_OPERANDS(CTR); (3146)
  {
    int32_t from75, to75, by75;
    from75 = xadd (COREHALFWORD (mASSIGNMENTxCTR), 2);
    to75 = xadd (COREHALFWORD (mASSIGNMENTxCTR),
                 bitToFixed ((putBITp (16, mNO_OPERANDSxPTR,
                                       getBIT (16, mASSIGNMENTxCTR)),
                              NO_OPERANDS (0))));
    by75 = 1;
    for (putBIT (16, mASSIGNMENTxI, fixedToBit (16, from75));
         bitToFixed (getBIT (16, mASSIGNMENTxI)) <= to75; putBIT (
             16, mASSIGNMENTxI,
             fixedToBit (16, bitToFixed (getBIT (16, mASSIGNMENTxI)) + by75)))
      {
        // LHS_PTR = SHR(OPR(I),16); (3147)
        {
          int32_t numberRHS = (int32_t)(SHR (
              getFIXED (mOPR + 4 * COREHALFWORD (mASSIGNMENTxI)), 16));
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (16, mASSIGNMENTxLHS_PTR, bitRHS);
          bitRHS->inUse = 0;
        }
        // TYPE = SHR(OPR(I),4) &  15; (3148)
        {
          int32_t numberRHS = (int32_t)(xAND (
              SHR (getFIXED (mOPR + 4 * COREHALFWORD (mASSIGNMENTxI)), 4),
              15));
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (16, mASSIGNMENTxTYPE, bitRHS);
          bitRHS->inUse = 0;
        }
        // IF TYPE = SYM THEN (3149)
        if (1 & (xEQ (COREHALFWORD (mASSIGNMENTxTYPE), COREHALFWORD (mSYM))))
          // DO; (3150)
          {
          rs1s1:;
            // IF NAME_CHECK(I,0) THEN (3151)
            if (1
                & (bitToFixed (
                    (putBITp (16, mNAME_CHECKxPTR, getBIT (16, mASSIGNMENTxI)),
                     putBITp (8, mNAME_CHECKxKEEP_VALIDITY,
                              fixedToBit (32, (int32_t)(0))),
                     NAME_CHECK (0)))))
              // RETURN; (3152)
              {
                reentryGuard = 0;
                return 0;
              }
            // IF SIMPLE_ASSIGN AND ~PRESCANNING THEN (3153)
            if (1
                & (xAND (BYTE0 (mASSIGNMENTxSIMPLE_ASSIGN),
                         xNOT (BYTE0 (mASSIGNMENTxPRESCANNING)))))
              // DO; (3154)
              {
              rs1s1s1:;
                // IF SYT_TYPE(LHS_PTR) = SYT_TYPE(RHS_PTR) &
                // ((SYT_FLAGS(LHS_PTR) & PM_FLAGS) = (SYT_FLAGS(RHS_PTR) &
                // PM_FLAGS)) THEN (3155)
                if (1
                    & (xAND (
                        xEQ (BYTE0 (getFIXED (mSYM_TAB)
                                    + 34 * (COREHALFWORD (mASSIGNMENTxLHS_PTR))
                                    + 32 + 1 * (0)),
                             BYTE0 (getFIXED (mSYM_TAB)
                                    + 34 * (COREHALFWORD (mASSIGNMENTxRHS_PTR))
                                    + 32 + 1 * (0))),
                        xEQ (xAND (getFIXED (getFIXED (mSYM_TAB)
                                             + 34
                                                   * (COREHALFWORD (
                                                       mASSIGNMENTxLHS_PTR))
                                             + 8 + 4 * (0)),
                                   getFIXED (mPM_FLAGS)),
                             xAND (getFIXED (getFIXED (mSYM_TAB)
                                             + 34
                                                   * (COREHALFWORD (
                                                       mASSIGNMENTxRHS_PTR))
                                             + 8 + 4 * (0)),
                                   getFIXED (mPM_FLAGS))))))
                  // DO; (3156)
                  {
                  rs1s1s1s1:;
                    // CALL SET_CATALOG_PTR(LHS_PTR,CATALOG_PTR(RHS_PTR));
                    // (3157)
                    {
                      putBITp (16, mSET_CATALOG_PTRxPTR,
                               getBIT (16, mASSIGNMENTxLHS_PTR));
                      putBITp (16, mSET_CATALOG_PTRxVAL,
                               (putBITp (16, mCATALOG_PTRxPTR,
                                         getBIT (16, mASSIGNMENTxRHS_PTR)),
                                CATALOG_PTR (0)));
                      SET_CATALOG_PTR (0);
                    }
                    // CALL SET_VALIDITY(LHS_PTR,VALIDITY(RHS_PTR)); (3158)
                    {
                      putBITp (16, mSET_VALIDITYxPTR,
                               getBIT (16, mASSIGNMENTxLHS_PTR));
                      putBITp (8, mSET_VALIDITYxVAL,
                               (putBITp (16, mVALIDITYxPTR,
                                         getBIT (16, mASSIGNMENTxRHS_PTR)),
                                VALIDITY (0)));
                      SET_VALIDITY (0);
                    }
                  es1s1s1s1:;
                  } // End of DO block
              es1s1s1:;
              } // End of DO block
          es1s1:;
          } // End of DO block
        // ELSE (3159)
        else
          // IF TYPE = VAC THEN (3160)
          if (1 & (xEQ (COREHALFWORD (mASSIGNMENTxTYPE), COREHALFWORD (mVAC))))
            // DO; (3161)
            {
            rs1s2:;
              // IF (OPR(LHS_PTR + 1) &  65521) = XVAC THEN (3162)
              if (1
                  & (xEQ (
                      xAND (getFIXED (mOPR
                                      + 4
                                            * xadd (COREHALFWORD (
                                                        mASSIGNMENTxLHS_PTR),
                                                    1)),
                            65521),
                      COREHALFWORD (mXVAC))))
                // LHS_PTR = SHR(OPR(LHS_PTR + 1),16); (3163)
                {
                  int32_t numberRHS = (int32_t)(SHR (
                      getFIXED (
                          mOPR
                          + 4 * xadd (COREHALFWORD (mASSIGNMENTxLHS_PTR), 1)),
                      16));
                  descriptor_t *bitRHS;
                  bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                  putBIT (16, mASSIGNMENTxLHS_PTR, bitRHS);
                  bitRHS->inUse = 0;
                }
              // IF SYTP(LHS_PTR + 1) THEN (3164)
              if (1
                  & ((putBITp (16, mSYTPxPTR,
                               fixedToBit (
                                   32, (int32_t)(xadd (
                                           COREHALFWORD (mASSIGNMENTxLHS_PTR),
                                           1)))),
                      SYTP (0))))
                // DO; (3165)
                {
                rs1s2s1:;
                  // IF NAME_CHECK(LHS_PTR + 1,0) THEN (3166)
                  if (1
                      & (bitToFixed (
                          (putBITp (
                               16, mNAME_CHECKxPTR,
                               fixedToBit (
                                   32, (int32_t)(xadd (
                                           COREHALFWORD (mASSIGNMENTxLHS_PTR),
                                           1)))),
                           putBITp (8, mNAME_CHECKxKEEP_VALIDITY,
                                    fixedToBit (32, (int32_t)(0))),
                           NAME_CHECK (0)))))
                    // RETURN; (3167)
                    {
                      reentryGuard = 0;
                      return 0;
                    }
                es1s2s1:;
                } // End of DO block
              // ELSE (3168)
              else
                // DO; (3169)
                {
                rs1s2s2:;
                  // IF ST_CHECK(SHR(OPR(LHS_PTR + 1),16)) THEN (3170)
                  if (1
                      & ((putBITp (
                              16, mST_CHECKxPTR,
                              fixedToBit (
                                  32,
                                  (int32_t)(SHR (
                                      getFIXED (
                                          mOPR
                                          + 4
                                                * xadd (
                                                    COREHALFWORD (
                                                        mASSIGNMENTxLHS_PTR),
                                                    1)),
                                      16)))),
                          ST_CHECK (0))))
                    // RETURN; (3171)
                    {
                      reentryGuard = 0;
                      return 0;
                    }
                es1s2s2:;
                } // End of DO block
            es1s2:;
            } // End of DO block
          // ELSE (3172)
          else
            // DO; (3173)
            {
            rs1s3:;
              // IF ST_CHECK(LHS_PTR) THEN (3174)
              if (1
                  & ((putBITp (16, mST_CHECKxPTR,
                               getBIT (16, mASSIGNMENTxLHS_PTR)),
                      ST_CHECK (0))))
                // RETURN; (3175)
                {
                  reentryGuard = 0;
                  return 0;
                }
            es1s3:;
            } // End of DO block
        // IF SPECIAL THEN (3176)
        if (1 & (bitToFixed (getBIT (8, mASSIGNMENTxSPECIAL))))
          // RETURN; (3177)
          {
            reentryGuard = 0;
            return 0;
          }
      }
  } // End of DO for-loop block
  // IF TRACE THEN (3178)
  if (1 & (bitToFixed (getBIT (8, mTRACE))))
    // OUTPUT = '   END ASSIGNMENT.'; (3179)
    {
      descriptor_t *stringRHS;
      stringRHS = cToDescriptor (NULL, "   END ASSIGNMENT.");
      OUTPUT (0, stringRHS);
      stringRHS->inUse = 0;
    }
  {
    reentryGuard = 0;
    return 0;
  }
}
