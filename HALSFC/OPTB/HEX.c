/*
  File HEX.c generated by XCOM-I, 2024-08-09 12:41:08.
*/

#include "runtimeC.h"

descriptor_t *
HEX (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (descriptor_t *)0;
    }
  reentryGuard = guardReentry (reentryGuard, "HEX");
  // K = 7; (648)
  {
    int32_t numberRHS = (int32_t)(7);
    putFIXED (mHEXxK, numberRHS);
  }
  // DO WHILE N > 0; (649)
  while (1 & (xGT (getFIXED (mHEXxN), 0)))
    {
      // B = BYTE(HEXCODES, HVAL& 15); (650)
      {
        int32_t numberRHS = (int32_t)(BYTE (getCHARACTER (mHEXCODES),
                                            xAND (getFIXED (mHEXxHVAL), 15)));
        putFIXED (mHEXxB, numberRHS);
      }
      // BYTE(STRING, K) = B; (651)
      {
        int32_t numberRHS = (int32_t)(getFIXED (mHEXxB));
        lBYTEb (ADDR (NULL, 0, "HEXxSTRING", 0), getFIXED (mHEXxK),
                getFIXED (mHEXxB));
      }
      // K = K-1; (652)
      {
        int32_t numberRHS = (int32_t)(xsubtract (getFIXED (mHEXxK), 1));
        putFIXED (mHEXxK, numberRHS);
      }
      // N = N-1; (653)
      {
        int32_t numberRHS = (int32_t)(xsubtract (getFIXED (mHEXxN), 1));
        putFIXED (mHEXxN, numberRHS);
      }
      // HVAL = SHR(HVAL, 4); (654)
      {
        int32_t numberRHS = (int32_t)(SHR (getFIXED (mHEXxHVAL), 4));
        putFIXED (mHEXxHVAL, numberRHS);
      }
    } // End of DO WHILE block
  // RETURN SUBSTR(STRING, K+1); (655)
  {
    reentryGuard = 0;
    return SUBSTR2 (getCHARACTER (mHEXxSTRING), xadd (getFIXED (mHEXxK), 1));
  }
}
