/*
  File FORM_TERM.c generated by XCOM-I, 2024-08-09 12:41:08.
*/

#include "runtimeC.h"

int32_t
FORM_TERM (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "FORM_TERM");
  // IF OMIT_CHECK THEN (2004)
  if (1 & (bitToFixed (getBIT (8, mFORM_TERMxOMIT_CHECK))))
    // GO TO FORMIT; (2005)
    goto FORMIT;
  // IF NAME_OR_PARM(PTR) THEN (2006)
  if (1
      & (bitToFixed (
          (putBITp (16, mNAME_OR_PARMxPTR, getBIT (16, mFORM_TERMxPTR)),
           NAME_OR_PARM (0)))))
    // TMP = DUMMY_NODE | SHL(CONTROL,20); (2007)
    {
      int32_t numberRHS = (int32_t)(xOR (
          getFIXED (mDUMMY_NODE), SHL (BYTE0 (mFORM_TERMxCONTROL), 20)));
      putFIXED (mTMP, numberRHS);
    }
  // ELSE (2008)
  else
  // FORMIT: (2009)
  FORMIT:
  // TMP = SHL(SHL(CONTROL,4) |(SHR(OPR(PTR),4) &  15),16) | SHR(OPR(PTR),16);
  // (2010)
  {
    int32_t numberRHS = (int32_t)(xOR (
        SHL (xOR (SHL (BYTE0 (mFORM_TERMxCONTROL), 4),
                  xAND (
                      SHR (getFIXED (mOPR + 4 * COREHALFWORD (mFORM_TERMxPTR)),
                           4),
                      15)),
             16),
        SHR (getFIXED (mOPR + 4 * COREHALFWORD (mFORM_TERMxPTR)), 16)));
    putFIXED (mTMP, numberRHS);
  }
  // OMIT_CHECK, CONTROL = 0; (2011)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mFORM_TERMxOMIT_CHECK, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mFORM_TERMxCONTROL, bitRHS);
    bitRHS->inUse = 0;
  }
  // RETURN TMP; (2012)
  {
    reentryGuard = 0;
    return getFIXED (mTMP);
  }
}
