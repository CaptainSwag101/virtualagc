/*
  File TEMPLATE_LIT.c generated by XCOM-I, 2024-08-09 12:41:08.
*/

#include "runtimeC.h"

descriptor_t *
TEMPLATE_LIT (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (descriptor_t *)0;
    }
  reentryGuard = guardReentry (reentryGuard, "TEMPLATE_LIT");
  // PTR = SYT_DIMS(SHR(OPR(DSUB_LOC + 1),16)); (1107)
  {
    descriptor_t *bitRHS = getBIT (
        16,
        getFIXED (mSYM_TAB)
            + 34
                  * (SHR (
                      getFIXED (mOPR + 4 * xadd (COREHALFWORD (mDSUB_LOC), 1)),
                      16))
            + 18 + 2 * (0));
    putBIT (16, mTEMPLATE_LITxPTR, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF REL(PTR) = 0 THEN (1108)
  if (1
      & (xEQ (COREHALFWORD (getFIXED (mSYM_SHRINK)
                            + 2 * (COREHALFWORD (mTEMPLATE_LITxPTR)) + 0
                            + 2 * (0)),
              0)))
    // CALL ERRORS (CLASS_BI, 306); (1109)
    {
      putBITp (16, mERRORSxCLASS, getBIT (16, mCLASS_BI));
      putBITp (16, mERRORSxNUM, fixedToBit (32, (int32_t)(306)));
      ERRORS (0);
    }
  // IF TEMPL#(REL(PTR)) = 0 THEN (1110)
  if (1
      & (xEQ (COREHALFWORD (getFIXED (mSTRUCTp)
                            + 2
                                  * (COREHALFWORD (
                                      getFIXED (mSYM_SHRINK)
                                      + 2 * (COREHALFWORD (mTEMPLATE_LITxPTR))
                                      + 0 + 2 * (0)))
                            + 0 + 2 * (0)),
              0)))
    // DO; (1111)
    {
    rs1:;
      // DO FOR STK_PTR = TEMPLATE_STACK_START TO TEMPLATE_STACK_END; (1112)
      {
        int32_t from24, to24, by24;
        from24 = bitToFixed (getBIT (16, mTEMPLATE_STACK_START));
        to24 = bitToFixed (getBIT (16, mTEMPLATE_STACK_END));
        by24 = 1;
        for (putBIT (16, mTEMPLATE_LITxSTK_PTR, fixedToBit (16, from24));
             bitToFixed (getBIT (16, mTEMPLATE_LITxSTK_PTR)) <= to24;
             putBIT (16, mTEMPLATE_LITxSTK_PTR,
                     fixedToBit (
                         16, bitToFixed (getBIT (16, mTEMPLATE_LITxSTK_PTR))
                                 + by24)))
          {
            // IF STRUCTURE_COMPARE(TEMPLATE_STACK(STK_PTR),PTR) THEN (1113)
            if (1
                & ((putBITp (
                        16, mSTRUCTURE_COMPARExA,
                        getBIT (
                            16,
                            mTEMPLATE_STACK
                                + 2 * COREHALFWORD (mTEMPLATE_LITxSTK_PTR))),
                    putBITp (16, mSTRUCTURE_COMPARExB,
                             getBIT (16, mTEMPLATE_LITxPTR)),
                    STRUCTURE_COMPARE (0))))
              // DO; (1114)
              {
              rs1s1s1:;
                // TEMPL#(REL(PTR)) = TEMPL#(REL(TEMPLATE_STACK(STK_PTR)));
                // (1115)
                {
                  descriptor_t *bitRHS = getBIT (
                      16,
                      getFIXED (mSTRUCTp)
                          + 2
                                * (COREHALFWORD (
                                    getFIXED (mSYM_SHRINK)
                                    + 2
                                          * (COREHALFWORD (
                                              mTEMPLATE_STACK
                                              + 2
                                                    * COREHALFWORD (
                                                        mTEMPLATE_LITxSTK_PTR)))
                                    + 0 + 2 * (0)))
                          + 0 + 2 * (0));
                  putBIT (
                      16,
                      getFIXED (mSTRUCTp)
                          + 2
                                * (COREHALFWORD (
                                    getFIXED (mSYM_SHRINK)
                                    + 2 * (COREHALFWORD (mTEMPLATE_LITxPTR))
                                    + 0 + 2 * (0)))
                          + 0 + 2 * (0),
                      bitRHS);
                  bitRHS->inUse = 0;
                }
                // GO TO RETT; (1116)
                goto RETT;
              es1s1s1:;
              } // End of DO block
          }
      } // End of DO for-loop block
      // IF TEMPLATE_STACK_START <= 0 THEN (1117)
      if (1 & (xLE (COREHALFWORD (mTEMPLATE_STACK_START), 0)))
        // CALL ERRORS (CLASS_BI, 307); (1118)
        {
          putBITp (16, mERRORSxCLASS, getBIT (16, mCLASS_BI));
          putBITp (16, mERRORSxNUM, fixedToBit (32, (int32_t)(307)));
          ERRORS (0);
        }
      // TEMPLATE_STACK_START = TEMPLATE_STACK_START - 1; (1119)
      {
        int32_t numberRHS
            = (int32_t)(xsubtract (COREHALFWORD (mTEMPLATE_STACK_START), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mTEMPLATE_STACK_START, bitRHS);
        bitRHS->inUse = 0;
      }
      // TEMPLATE_STACK(TEMPLATE_STACK_START) = PTR; (1120)
      {
        descriptor_t *bitRHS = getBIT (16, mTEMPLATE_LITxPTR);
        putBIT (16,
                mTEMPLATE_STACK + 2 * (COREHALFWORD (mTEMPLATE_STACK_START)),
                bitRHS);
        bitRHS->inUse = 0;
      }
      // TEMPL#(REL(PTR)) = GENERATE_TEMPLATE_LIT(PTR); (1121)
      {
        descriptor_t *bitRHS = (putBITp (16, mGENERATE_TEMPLATE_LITxPTR,
                                         getBIT (16, mTEMPLATE_LITxPTR)),
                                GENERATE_TEMPLATE_LIT (0));
        putBIT (
            16,
            getFIXED (mSTRUCTp)
                + 2
                      * (COREHALFWORD (getFIXED (mSYM_SHRINK)
                                       + 2 * (COREHALFWORD (mTEMPLATE_LITxPTR))
                                       + 0 + 2 * (0)))
                + 0 + 2 * (0),
            bitRHS);
        bitRHS->inUse = 0;
      }
    es1:;
    } // End of DO block
// RETT: (1122)
RETT:
  // IF SUB_TRACE THEN (1123)
  if (1 & (bitToFixed (getBIT (8, mSUB_TRACE))))
    // OUTPUT = 'TEMPLATE_LIT(' || PTR || ') = ' || TEMPL#(REL(PTR)); (1124)
    {
      descriptor_t *stringRHS;
      stringRHS = xsCAT (
          xsCAT (xsCAT (cToDescriptor (NULL, "TEMPLATE_LIT("),
                        bitToCharacter (getBIT (16, mTEMPLATE_LITxPTR))),
                 cToDescriptor (NULL, ") = ")),
          bitToCharacter (getBIT (
              16, getFIXED (mSTRUCTp)
                      + 2
                            * (COREHALFWORD (
                                getFIXED (mSYM_SHRINK)
                                + 2 * (COREHALFWORD (mTEMPLATE_LITxPTR)) + 0
                                + 2 * (0)))
                      + 0 + 2 * (0))));
      OUTPUT (0, stringRHS);
      stringRHS->inUse = 0;
    }
  // RETURN TEMPL#(REL(PTR)); (1125)
  {
    reentryGuard = 0;
    return getBIT (
        16, getFIXED (mSTRUCTp)
                + 2
                      * (COREHALFWORD (getFIXED (mSYM_SHRINK)
                                       + 2 * (COREHALFWORD (mTEMPLATE_LITxPTR))
                                       + 0 + 2 * (0)))
                + 0 + 2 * (0));
  }
}
