/*
  File BOTTOM.c generated by XCOM-I, 2024-08-08 04:34:00.
*/

#include "runtimeC.h"

int32_t
BOTTOM (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "BOTTOM");
  // A_INX = 1; (4486)
  {
    int32_t numberRHS = (int32_t)(1);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mBOTTOMxA_INX, bitRHS);
    bitRHS->inUse = 0;
  }
  // LOW,ADD(1) = LAST_OP(PTR); (4487)
  {
    int32_t numberRHS = (int32_t)((
        putBITp (16, mLAST_OPxPTR, getBIT (16, mBOTTOMxPTR)), LAST_OP (0)));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mBOTTOMxLOW, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mADD + 2 * (1), bitRHS);
    bitRHS->inUse = 0;
  }
  // DO WHILE A_INX ~= 0; (4488)
  while (1 & (xNEQ (COREHALFWORD (mBOTTOMxA_INX), 0)))
    {
      // TEMP = ADD(A_INX); (4489)
      {
        descriptor_t *bitRHS
            = getBIT (16, mADD + 2 * COREHALFWORD (mBOTTOMxA_INX));
        putBIT (16, mBOTTOMxTEMP, bitRHS);
        bitRHS->inUse = 0;
      }
      // A_INX = A_INX - 1; (4490)
      {
        int32_t numberRHS
            = (int32_t)(xsubtract (COREHALFWORD (mBOTTOMxA_INX), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mBOTTOMxA_INX, bitRHS);
        bitRHS->inUse = 0;
      }
      // IF TEMP < LOW THEN (4491)
      if (1 & (xLT (COREHALFWORD (mBOTTOMxTEMP), COREHALFWORD (mBOTTOMxLOW))))
        // LOW = TEMP; (4492)
        {
          descriptor_t *bitRHS = getBIT (16, mBOTTOMxTEMP);
          putBIT (16, mBOTTOMxLOW, bitRHS);
          bitRHS->inUse = 0;
        }
      // DO FOR I = 1 TO NO_OPERANDS(TEMP); (4493)
      {
        int32_t from104, to104, by104;
        from104 = 1;
        to104 = bitToFixed (
            (putBITp (16, mNO_OPERANDSxPTR, getBIT (16, mBOTTOMxTEMP)),
             NO_OPERANDS (0)));
        by104 = 1;
        for (putBIT (16, mBOTTOMxI, fixedToBit (16, from104));
             bitToFixed (getBIT (16, mBOTTOMxI)) <= to104; putBIT (
                 16, mBOTTOMxI,
                 fixedToBit (16, bitToFixed (getBIT (16, mBOTTOMxI)) + by104)))
          {
            // TYPE = SHR(OPR(TEMP + I),4) &  15; (4494)
            {
              int32_t numberRHS = (int32_t)(xAND (
                  SHR (getFIXED (mOPR
                                 + 4
                                       * xadd (COREHALFWORD (mBOTTOMxTEMP),
                                               COREHALFWORD (mBOTTOMxI))),
                       4),
                  15));
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (16, mBOTTOMxTYPE, bitRHS);
              bitRHS->inUse = 0;
            }
            // OP_PTR = SHR(OPR(TEMP + I),16); (4495)
            {
              int32_t numberRHS = (int32_t)(SHR (
                  getFIXED (mOPR
                            + 4
                                  * xadd (COREHALFWORD (mBOTTOMxTEMP),
                                          COREHALFWORD (mBOTTOMxI))),
                  16));
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (16, mBOTTOMxOP_PTR, bitRHS);
              bitRHS->inUse = 0;
            }
            // IF TYPE = VAC | TYPE = XPT THEN (4496)
            if (1
                & (xOR (
                    xEQ (COREHALFWORD (mBOTTOMxTYPE), COREHALFWORD (mVAC)),
                    xEQ (COREHALFWORD (mBOTTOMxTYPE), COREHALFWORD (mXPT)))))
              // DO; (4497)
              {
              rs1s1s1:;
                // IF HALMAT_FLAG(TEMP + I) THEN (4498)
                if (1
                    & (bitToFixed (
                        (putBITp (
                             16, mHALMAT_FLAGxPTR,
                             fixedToBit (32, (int32_t)(xadd (
                                                 COREHALFWORD (mBOTTOMxTEMP),
                                                 COREHALFWORD (mBOTTOMxI))))),
                         HALMAT_FLAG (0)))))
                  // OP_PTR = NODE(OP_PTR) &  65535; (4499)
                  {
                    int32_t numberRHS = (int32_t)(xAND (
                        getFIXED (mNODE + 4 * COREHALFWORD (mBOTTOMxOP_PTR)),
                        65535));
                    descriptor_t *bitRHS;
                    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                    putBIT (16, mBOTTOMxOP_PTR, bitRHS);
                    bitRHS->inUse = 0;
                  }
                // IF OP_PTR > ORIG THEN (4500)
                if (1
                    & (xGT (COREHALFWORD (mBOTTOMxOP_PTR),
                            COREHALFWORD (mBOTTOMxORIG))))
                  // DO; (4501)
                  {
                  rs1s1s1s1:;
                    // A_INX = A_INX + 1; (4502)
                    {
                      int32_t numberRHS
                          = (int32_t)(xadd (COREHALFWORD (mBOTTOMxA_INX), 1));
                      descriptor_t *bitRHS;
                      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                      putBIT (16, mBOTTOMxA_INX, bitRHS);
                      bitRHS->inUse = 0;
                    }
                    // ADD(A_INX) = LAST_OP(OP_PTR); (4503)
                    {
                      int32_t numberRHS
                          = (int32_t)((putBITp (16, mLAST_OPxPTR,
                                                getBIT (16, mBOTTOMxOP_PTR)),
                                       LAST_OP (0)));
                      descriptor_t *bitRHS;
                      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                      putBIT (16, mADD + 2 * (COREHALFWORD (mBOTTOMxA_INX)),
                              bitRHS);
                      bitRHS->inUse = 0;
                    }
                  es1s1s1s1:;
                  } // End of DO block
              es1s1s1:;
              } // End of DO block
          }
      } // End of DO for-loop block
    }   // End of DO WHILE block
  // RETURN LOW; (4504)
  {
    reentryGuard = 0;
    return COREHALFWORD (mBOTTOMxLOW);
  }
}
