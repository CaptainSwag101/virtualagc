/*
  File COMBINE_LOOPSxFIX_LOOP_STACK.c generated by XCOM-I, 2024-08-09 12:41:08.
*/

#include "runtimeC.h"

int32_t
COMBINE_LOOPSxFIX_LOOP_STACK (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "COMBINE_LOOPSxFIX_LOOP_STACK");
  // INX = N_INX; (2527)
  {
    descriptor_t *bitRHS = getBIT (16, mN_INX);
    putBIT (16, mCOMBINE_LOOPSxFIX_LOOP_STACKxINX, bitRHS);
    bitRHS->inUse = 0;
  }
  // END_SEARCH = TRUE; (2528)
  {
    int32_t numberRHS = (int32_t)(1);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mCOMBINE_LOOPSxFIX_LOOP_STACKxEND_SEARCH, bitRHS);
    bitRHS->inUse = 0;
  }
  // TEMP2,TMP2 = 0; (2529)
  {
    int32_t numberRHS = (int32_t)(0);
    putFIXED (mCOMBINE_LOOPSxFIX_LOOP_STACKxTEMP2, numberRHS);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mCOMBINE_LOOPSxFIX_LOOP_STACKxTMP2, bitRHS);
    bitRHS->inUse = 0;
  }
  // DO WHILE INX > 0; (2530)
  while (1 & (xGT (COREHALFWORD (mCOMBINE_LOOPSxFIX_LOOP_STACKxINX), 0)))
    {
      // IF END_SEARCH THEN (2531)
      if (1
          & (bitToFixed (
              getBIT (8, mCOMBINE_LOOPSxFIX_LOOP_STACKxEND_SEARCH))))
        // DO; (2532)
        {
        rs1s1:;
          // IF (NODE(INX) &  65535) = LOOP_END THEN (2533)
          if (1
              & (xEQ (xAND (getFIXED (
                                mNODE
                                + 4
                                      * COREHALFWORD (
                                          mCOMBINE_LOOPSxFIX_LOOP_STACKxINX)),
                            65535),
                      COREHALFWORD (mLOOP_END))))
            // DO; (2534)
            {
            rs1s1s1:;
              // END_SEARCH = FALSE; (2535)
              {
                int32_t numberRHS = (int32_t)(0);
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (8, mCOMBINE_LOOPSxFIX_LOOP_STACKxEND_SEARCH, bitRHS);
                bitRHS->inUse = 0;
              }
            es1s1s1:;
            } // End of DO block
          // TEMP = NODE(INX); (2536)
          {
            int32_t numberRHS = (int32_t)(getFIXED (
                mNODE + 4 * COREHALFWORD (mCOMBINE_LOOPSxFIX_LOOP_STACKxINX)));
            putFIXED (mCOMBINE_LOOPSxFIX_LOOP_STACKxTEMP, numberRHS);
          }
          // NODE(INX) = TEMP2; (2537)
          {
            int32_t numberRHS
                = (int32_t)(getFIXED (mCOMBINE_LOOPSxFIX_LOOP_STACKxTEMP2));
            putFIXED (
                mNODE + 4 * (COREHALFWORD (mCOMBINE_LOOPSxFIX_LOOP_STACKxINX)),
                numberRHS);
          }
          // TEMP2 = TEMP; (2538)
          {
            int32_t numberRHS
                = (int32_t)(getFIXED (mCOMBINE_LOOPSxFIX_LOOP_STACKxTEMP));
            putFIXED (mCOMBINE_LOOPSxFIX_LOOP_STACKxTEMP2, numberRHS);
          }
          // TMP = A_PARITY(INX); (2539)
          {
            descriptor_t *bitRHS = getBIT (
                8, mA_PARITY
                       + 1 * COREHALFWORD (mCOMBINE_LOOPSxFIX_LOOP_STACKxINX));
            putBIT (8, mCOMBINE_LOOPSxFIX_LOOP_STACKxTMP, bitRHS);
            bitRHS->inUse = 0;
          }
          // A_PARITY(INX) = TMP2; (2540)
          {
            descriptor_t *bitRHS
                = getBIT (8, mCOMBINE_LOOPSxFIX_LOOP_STACKxTMP2);
            putBIT (
                8,
                mA_PARITY
                    + 1 * (COREHALFWORD (mCOMBINE_LOOPSxFIX_LOOP_STACKxINX)),
                bitRHS);
            bitRHS->inUse = 0;
          }
          // TMP2 = TMP; (2541)
          {
            descriptor_t *bitRHS
                = getBIT (8, mCOMBINE_LOOPSxFIX_LOOP_STACKxTMP);
            putBIT (8, mCOMBINE_LOOPSxFIX_LOOP_STACKxTMP2, bitRHS);
            bitRHS->inUse = 0;
          }
        es1s1:;
        } // End of DO block
      // ELSE (2542)
      else
        // DO; (2543)
        {
        rs1s2:;
          // IF SHR(NODE(INX),16) = LOOP_HEAD(1) THEN (2544)
          if (1
              & (xEQ (
                  SHR (getFIXED (mNODE
                                 + 4
                                       * COREHALFWORD (
                                           mCOMBINE_LOOPSxFIX_LOOP_STACKxINX)),
                       16),
                  COREHALFWORD (mLOOP_HEAD + 2 * 1))))
            // DO; (2545)
            {
            rs1s2s1:;
              // NODE(INX) = (NODE(INX) &  4294901760) | LOOP_END; (2546)
              {
                int32_t numberRHS = (int32_t)(xOR (
                    xAND (getFIXED (
                              mNODE
                              + 4
                                    * COREHALFWORD (
                                        mCOMBINE_LOOPSxFIX_LOOP_STACKxINX)),
                          4294901760),
                    COREHALFWORD (mLOOP_END)));
                putFIXED (mNODE
                              + 4
                                    * (COREHALFWORD (
                                        mCOMBINE_LOOPSxFIX_LOOP_STACKxINX)),
                          numberRHS);
              }
              // A_PARITY(INX) = A_PARITY(INX) & TMP2; (2547)
              {
                int32_t numberRHS = (int32_t)(xAND (
                    BYTE0 (mA_PARITY
                           + 1
                                 * COREHALFWORD (
                                     mCOMBINE_LOOPSxFIX_LOOP_STACKxINX)),
                    BYTE0 (mCOMBINE_LOOPSxFIX_LOOP_STACKxTMP2)));
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (8,
                        mA_PARITY
                            + 1
                                  * (COREHALFWORD (
                                      mCOMBINE_LOOPSxFIX_LOOP_STACKxINX)),
                        bitRHS);
                bitRHS->inUse = 0;
              }
              // N_INX = N_INX - 1; (2548)
              {
                int32_t numberRHS
                    = (int32_t)(xsubtract (COREHALFWORD (mN_INX), 1));
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mN_INX, bitRHS);
                bitRHS->inUse = 0;
              }
              // RETURN; (2549)
              {
                reentryGuard = 0;
                return 0;
              }
            es1s2s1:;
            } // End of DO block
        es1s2:;
        } // End of DO block
      // INX = INX - 1; (2550)
      {
        int32_t numberRHS = (int32_t)(xsubtract (
            COREHALFWORD (mCOMBINE_LOOPSxFIX_LOOP_STACKxINX), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mCOMBINE_LOOPSxFIX_LOOP_STACKxINX, bitRHS);
        bitRHS->inUse = 0;
      }
    } // End of DO WHILE block
  // IF C_TRACE THEN (2551)
  if (1 & (bitToFixed (getBIT (8, mC_TRACE))))
    // DO; (2552)
    {
    rs2:;
      // OUTPUT = '########ERROR DETECTED IN FIX_LOOP_STACK '||STT#; (2553)
      {
        descriptor_t *stringRHS;
        stringRHS = xsCAT (
            cToDescriptor (NULL, "########ERROR DETECTED IN FIX_LOOP_STACK "),
            bitToCharacter (getBIT (16, mSTTp)));
        OUTPUT (0, stringRHS);
        stringRHS->inUse = 0;
      }
    es2:;
    } // End of DO block
  {
    reentryGuard = 0;
    return 0;
  }
}
