/*
  File GET_ICQ.c generated by XCOM-I, 2024-08-09 12:38:15.
*/

#include "runtimeC.h"

int32_t
GET_ICQ (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GET_ICQ");
  // IF PTR >= IC_ORG THEN (8920)
  if (1 & (xGE (getFIXED (mGET_ICQxPTR), getFIXED (mIC_ORG))))
    // IF PTR < IC_LIM THEN (8921)
    if (1 & (xLT (getFIXED (mGET_ICQxPTR), getFIXED (mIC_LIM))))
      // RETURN PTR - IC_ORG; (8922)
      {
        reentryGuard = 0;
        return xsubtract (getFIXED (mGET_ICQxPTR), getFIXED (mIC_ORG));
      }
  // FILE(IC_FILE, CUR_IC_BLK) = IC_VAL; (8923)
  {
    lFILE (3, getFIXED (mCUR_IC_BLK), ADDR (NULL, 0, "IC_VAL", 0));
  }
  // CUR_IC_BLK = PTR / IC_SIZE; (8924)
  {
    int32_t numberRHS = (int32_t)(xdivide (getFIXED (mGET_ICQxPTR), 200));
    putFIXED (mCUR_IC_BLK, numberRHS);
  }
  // IC_ORG = CUR_IC_BLK * IC_SIZE; (8925)
  {
    int32_t numberRHS = (int32_t)(xmultiply (getFIXED (mCUR_IC_BLK), 200));
    putFIXED (mIC_ORG, numberRHS);
  }
  // IC_LIM = IC_ORG + IC_SIZE; (8926)
  {
    int32_t numberRHS = (int32_t)(xadd (getFIXED (mIC_ORG), 200));
    putFIXED (mIC_LIM, numberRHS);
  }
  // IF CUR_IC_BLK <= IC_MAX THEN (8927)
  if (1 & (xLE (getFIXED (mCUR_IC_BLK), getFIXED (mIC_MAX))))
    // IC_VAL = FILE(IC_FILE, CUR_IC_BLK); (8928)
    {
      rFILE (ADDR (NULL, 0, "IC_VAL", 0), 3, getFIXED (mCUR_IC_BLK));
    }
  // ELSE (8929)
  else
    // IC_MAX=IC_MAX+1; (8930)
    {
      int32_t numberRHS = (int32_t)(xadd (getFIXED (mIC_MAX), 1));
      putFIXED (mIC_MAX, numberRHS);
    }
  // RETURN PTR - IC_ORG; (8931)
  {
    reentryGuard = 0;
    return xsubtract (getFIXED (mGET_ICQxPTR), getFIXED (mIC_ORG));
  }
}
