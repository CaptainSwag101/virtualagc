/*
  File COMPILATION_LOOP.c generated by XCOM-I, 2024-08-08 04:31:11.
*/

#include "runtimeC.h"

int32_t
COMPILATION_LOOP (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "COMPILATION_LOOP");
  // COMPILING = TRUE; (14028)
  {
    int32_t numberRHS = (int32_t)(1);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (1, mCOMPILING, bitRHS);
    bitRHS->inUse = 0;
  }
// COMP: (14029)
COMP:
  // DO WHILE (COMPILING); (14030)
  while (1 & (bitToFixed (getBIT (1, mCOMPILING))))
    {
      // IF CONTROL( 12) THEN (14031)
      if (1 & (bitToFixed (getBIT (1, mCONTROL + 1 * 12))))
        // OUTPUT = ' COMP: STATE='||STATE||' I='||I||' J='||J; (14032)
        {
          descriptor_t *stringRHS;
          stringRHS = xsCAT (
              xsCAT (
                  xsCAT (xsCAT (xsCAT (cToDescriptor (NULL, " COMP: STATE="),
                                       fixedToCharacter (getFIXED (mSTATE))),
                                cToDescriptor (NULL, " I=")),
                         fixedToCharacter (getFIXED (mCOMPILATION_LOOPxI))),
                  cToDescriptor (NULL, " J=")),
              fixedToCharacter (getFIXED (mCOMPILATION_LOOPxJ)));
          OUTPUT (0, stringRHS);
          stringRHS->inUse = 0;
        }
      // IF STATE <= MAXR# THEN (14033)
      if (1 & (xLE (getFIXED (mSTATE), 441)))
        // DO; (14034)
        {
        rs1s1:;
          // IF NO_LOOK_AHEAD_DONE THEN (14035)
          if (1 & (bitToFixed (getBIT (1, mNO_LOOK_AHEAD_DONE))))
            // CALL CALL_SCAN; (14036)
            CALL_SCAN (0);
          // IF SRN_FLAG THEN (14037)
          if (1 & (bitToFixed (getBIT (1, mSRN_FLAG))))
            // CALL SRN_UPDATE; (14038)
            SRN_UPDATE (0);
          // CALL ADD_TO_STACK; (14039)
          COMPILATION_LOOPxADD_TO_STACK (0);
          // STATE_STACK(SP) = STATE; (14040)
          {
            int32_t numberRHS = (int32_t)(getFIXED (mSTATE));
            putFIXED (mSTATE_STACK + 4 * (getFIXED (mSP)), numberRHS);
          }
          // LOOK_STACK(SP)=LOOK; (14041)
          {
            descriptor_t *bitRHS = getBIT (16, mLOOK);
            putBIT (16, mLOOK_STACK + 2 * (getFIXED (mSP)), bitRHS);
            bitRHS->inUse = 0;
          }
          // LOOK=0; (14042)
          {
            int32_t numberRHS = (int32_t)(0);
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mLOOK, bitRHS);
            bitRHS->inUse = 0;
          }
          // I = INDEX1(STATE); (14043)
          {
            descriptor_t *bitRHS
                = getBIT (16, mINDEX1 + 2 * getFIXED (mSTATE));
            int32_t numberRHS;
            numberRHS = bitToFixed (bitRHS);
            putFIXED (mCOMPILATION_LOOPxI, numberRHS);
            bitRHS->inUse = 0;
          }
          // DO I = I TO I+INDEX2(STATE)-1; (14044)
          {
            int32_t from177, to177, by177;
            from177 = getFIXED (mCOMPILATION_LOOPxI);
            to177 = xsubtract (
                xadd (getFIXED (mCOMPILATION_LOOPxI),
                      COREHALFWORD (mINDEX2 + 2 * getFIXED (mSTATE))),
                1);
            by177 = 1;
            for (putFIXED (mCOMPILATION_LOOPxI, from177);
                 getFIXED (mCOMPILATION_LOOPxI) <= to177;
                 putFIXED (mCOMPILATION_LOOPxI,
                           getFIXED (mCOMPILATION_LOOPxI) + by177))
              {
                // IF READ1(I) = TOKEN THEN (14045)
                if (1
                    & (xEQ (
                        BYTE0 (mREAD1 + 1 * getFIXED (mCOMPILATION_LOOPxI)),
                        getFIXED (mTOKEN))))
                  // DO; (14046)
                  {
                  rs1s1s1s1:;
                    // CALL SAVE_TOKEN(TOKEN, BCD, IMPLIED_TYPE); (14047)
                    {
                      putBITp (16, mSAVE_TOKENxTOKEN,
                               fixedToBit (32, (int32_t)(getFIXED (mTOKEN))));
                      putCHARACTERp (mSAVE_TOKENxCHAR, getCHARACTER (mBCD));
                      putBITp (16, mSAVE_TOKENxTYPE,
                               getBIT (16, mIMPLIED_TYPE));
                      SAVE_TOKEN (0);
                    }
                    // CALL POP_MACRO_XREF; (14048)
                    POP_MACRO_XREF (0);
                    // NO_LOOK_AHEAD_DONE=TRUE; (14049)
                    {
                      int32_t numberRHS = (int32_t)(1);
                      descriptor_t *bitRHS;
                      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                      putBIT (1, mNO_LOOK_AHEAD_DONE, bitRHS);
                      bitRHS->inUse = 0;
                    }
                    // IF TOKEN = SEMI_COLON THEN (14050)
                    if (1 & (xEQ (getFIXED (mTOKEN), getFIXED (mSEMI_COLON))))
                      // DO; (14051)
                      {
                      rs1s1s1s1s1:;
                        // IF SUBSCRIPT_LEVEL = 0 THEN (14052)
                        if (1 & (xEQ (COREHALFWORD (mSUBSCRIPT_LEVEL), 0)))
                          // DO; (14053)
                          {
                          rs1s1s1s1s1s1:;
                            // SQUEEZING = FALSE; (14054)
                            {
                              int32_t numberRHS = (int32_t)(0);
                              descriptor_t *bitRHS;
                              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                              putBIT (1, mSQUEEZING, bitRHS);
                              bitRHS->inUse = 0;
                            }
                            // CONTEXT,TEMPORARY_IMPLIED=0; (14055)
                            {
                              int32_t numberRHS = (int32_t)(0);
                              putFIXED (mCONTEXT, numberRHS);
                              descriptor_t *bitRHS;
                              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                              putBIT (1, mTEMPORARY_IMPLIED, bitRHS);
                              bitRHS->inUse = 0;
                            }
                            // GRAMMAR_FLAGS(STMT_PTR) = GRAMMAR_FLAGS(
                            // STMT_PTR) | STMT_END_FLAG; (14056)
                            {
                              int32_t numberRHS = (int32_t)(xOR (
                                  COREHALFWORD (
                                      mGRAMMAR_FLAGS
                                      + 2 * COREHALFWORD (mSTMT_PTR)),
                                  COREHALFWORD (mSTMT_END_FLAG)));
                              descriptor_t *bitRHS;
                              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                              putBIT (16,
                                      mGRAMMAR_FLAGS
                                          + 2 * (COREHALFWORD (mSTMT_PTR)),
                                      bitRHS);
                              bitRHS->inUse = 0;
                            }
                            // STMT_END_PTR = STMT_PTR; (14057)
                            {
                              descriptor_t *bitRHS = getBIT (16, mSTMT_PTR);
                              putBIT (16, mSTMT_END_PTR, bitRHS);
                              bitRHS->inUse = 0;
                            }
                            // IF CONTROL(7) THEN (14058)
                            if (1
                                & (bitToFixed (getBIT (1, mCONTROL + 1 * 7))))
                              // CALL SYT_DUMP; (14059)
                              SYT_DUMP (0);
                          es1s1s1s1s1s1:;
                          } // End of DO block
                      es1s1s1s1s1:;
                      } // End of DO block
                    // VAR(SP) = BCD; (14060)
                    {
                      descriptor_t *stringRHS;
                      stringRHS = getCHARACTER (mBCD);
                      putCHARACTER (mVAR + 4 * (getFIXED (mSP)), stringRHS);
                      stringRHS->inUse = 0;
                    }
                    // FIXV(SP) = VALUE; (14061)
                    {
                      int32_t numberRHS = (int32_t)(getFIXED (mVALUE));
                      putFIXED (mFIXV + 4 * (getFIXED (mSP)), numberRHS);
                    }
                    // FIXF(SP)=FIXING; (14062)
                    {
                      descriptor_t *bitRHS = getBIT (16, mFIXING);
                      putBIT (16, mFIXF + 2 * (getFIXED (mSP)), bitRHS);
                      bitRHS->inUse = 0;
                    }
                    // FIXL(SP) = SYT_INDEX; (14063)
                    {
                      int32_t numberRHS = (int32_t)(getFIXED (mSYT_INDEX));
                      putFIXED (mFIXL + 4 * (getFIXED (mSP)), numberRHS);
                    }
                    // PARSE_STACK(SP) = TOKEN; (14064)
                    {
                      int32_t numberRHS = (int32_t)(getFIXED (mTOKEN));
                      descriptor_t *bitRHS;
                      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                      putBIT (9, mPARSE_STACK + 2 * (getFIXED (mSP)), bitRHS);
                      bitRHS->inUse = 0;
                    }
                    // STATE = READ2(I); (14065)
                    {
                      descriptor_t *bitRHS = getBIT (
                          16, mREAD2 + 2 * getFIXED (mCOMPILATION_LOOPxI));
                      int32_t numberRHS;
                      numberRHS = bitToFixed (bitRHS);
                      putFIXED (mSTATE, numberRHS);
                      bitRHS->inUse = 0;
                    }
                    // CALL EMIT_EXTERNAL; (14066)
                    EMIT_EXTERNAL (0);
                    // GO TO COMP; (14067)
                    goto COMP;
                  es1s1s1s1:;
                  } // End of DO block
              }
          } // End of DO for-loop block
          // CALL STACK_DUMP; (14068)
          STACK_DUMP (0);
          // CALL SAVE_TOKEN(TOKEN, BCD, IMPLIED_TYPE); (14069)
          {
            putBITp (16, mSAVE_TOKENxTOKEN,
                     fixedToBit (32, (int32_t)(getFIXED (mTOKEN))));
            putCHARACTERp (mSAVE_TOKENxCHAR, getCHARACTER (mBCD));
            putBITp (16, mSAVE_TOKENxTYPE, getBIT (16, mIMPLIED_TYPE));
            SAVE_TOKEN (0);
          }
          // IF (RESERVED_WORD | (TOKEN = CHARACTER_STRING) | (TOKEN =
          // REPLACE_TEXT)) THEN (14070)
          if (1
              & (xOR (
                  xOR (BYTE0 (mRESERVED_WORD),
                       xEQ (getFIXED (mTOKEN), getFIXED (mCHARACTER_STRING))),
                  xEQ (getFIXED (mTOKEN), getFIXED (mREPLACE_TEXT)))))
            // BCD = STRING(VOCAB_INDEX(TOKEN)); (14071)
            {
              descriptor_t *stringRHS;
              stringRHS = getCHARACTER (mVOCAB_INDEX + 4 * getFIXED (mTOKEN));
              putCHARACTER (mBCD, stringRHS);
              stringRHS->inUse = 0;
            }
          // CALL ERROR(CLASS_P,8,BCD); (14072)
          {
            putBITp (16, mERRORxCLASS, getBIT (16, mCLASS_P));
            putBITp (8, mERRORxNUM, fixedToBit (32, (int32_t)(8)));
            putCHARACTERp (mERRORxTEXT, getCHARACTER (mBCD));
            ERROR (0);
          }
          // CALL RECOVER; (14073)
          RECOVER (0);
        es1s1:;
        } // End of DO block
      // ELSE (14074)
      else
        // IF STATE > MAXP# THEN (14075)
        if (1 & (xGT (getFIXED (mSTATE), 810)))
          // DO; (14076)
          {
          rs1s2:;
            // REDUCTIONS = REDUCTIONS + 1; (14077)
            {
              int32_t numberRHS = (int32_t)(xadd (getFIXED (mREDUCTIONS), 1));
              putFIXED (mREDUCTIONS, numberRHS);
            }
            // MP = SP-INDEX2(STATE); (14078)
            {
              int32_t numberRHS = (int32_t)(xsubtract (
                  getFIXED (mSP),
                  COREHALFWORD (mINDEX2 + 2 * getFIXED (mSTATE))));
              putFIXED (mMP, numberRHS);
            }
            // MPP1 = MP+1; (14079)
            {
              int32_t numberRHS = (int32_t)(xadd (getFIXED (mMP), 1));
              putFIXED (mMPP1, numberRHS);
            }
            // CALL SYNTHESIZE (STATE-MAXP#); (14080)
            {
              putFIXED (mSYNTHESIZExPRODUCTION_NUMBER,
                        xsubtract (getFIXED (mSTATE), 810));
              SYNTHESIZE (0);
            }
            // SP = MP; (14081)
            {
              int32_t numberRHS = (int32_t)(getFIXED (mMP));
              putFIXED (mSP, numberRHS);
            }
            // PARSE_STACK(SP)=#PRODUCE_NAME(STATE-MAXP#)& 4095; (14082)
            {
              int32_t numberRHS = (int32_t)(xAND (
                  COREHALFWORD (mpPRODUCE_NAME
                                + 2 * xsubtract (getFIXED (mSTATE), 810)),
                  4095));
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (9, mPARSE_STACK + 2 * (getFIXED (mSP)), bitRHS);
              bitRHS->inUse = 0;
            }
            // I = INDEX1(STATE); (14083)
            {
              descriptor_t *bitRHS
                  = getBIT (16, mINDEX1 + 2 * getFIXED (mSTATE));
              int32_t numberRHS;
              numberRHS = bitToFixed (bitRHS);
              putFIXED (mCOMPILATION_LOOPxI, numberRHS);
              bitRHS->inUse = 0;
            }
            // J = STATE_STACK(SP); (14084)
            {
              int32_t numberRHS
                  = (int32_t)(getFIXED (mSTATE_STACK + 4 * getFIXED (mSP)));
              putFIXED (mCOMPILATION_LOOPxJ, numberRHS);
            }
            // DO WHILE APPLY1(I) ~= 0; (14085)
            while (1
                   & (xNEQ (COREHALFWORD (
                                mAPPLY1 + 2 * getFIXED (mCOMPILATION_LOOPxI)),
                            0)))
              {
                // IF J = APPLY1(I) THEN (14086)
                if (1
                    & (xEQ (
                        getFIXED (mCOMPILATION_LOOPxJ),
                        COREHALFWORD (mAPPLY1
                                      + 2 * getFIXED (mCOMPILATION_LOOPxI)))))
                  // GO TO TOP_MATCH; (14087)
                  goto TOP_MATCH;
                // I = I+1; (14088)
                {
                  int32_t numberRHS
                      = (int32_t)(xadd (getFIXED (mCOMPILATION_LOOPxI), 1));
                  putFIXED (mCOMPILATION_LOOPxI, numberRHS);
                }
              } // End of DO WHILE block
          // TOP_MATCH: (14089)
          TOP_MATCH:
            // IF APPLY2(I) = 0 THEN (14090)
            if (1
                & (xEQ (COREHALFWORD (mAPPLY2
                                      + 2 * getFIXED (mCOMPILATION_LOOPxI)),
                        0)))
              // RETURN; (14091)
              {
                reentryGuard = 0;
                return 0;
              }
            // STATE = APPLY2(I); (14092)
            {
              descriptor_t *bitRHS
                  = getBIT (16, mAPPLY2 + 2 * getFIXED (mCOMPILATION_LOOPxI));
              int32_t numberRHS;
              numberRHS = bitToFixed (bitRHS);
              putFIXED (mSTATE, numberRHS);
              bitRHS->inUse = 0;
            }
            // LOOK=0; (14093)
            {
              int32_t numberRHS = (int32_t)(0);
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (16, mLOOK, bitRHS);
              bitRHS->inUse = 0;
            }
          es1s2:;
          } // End of DO block
        // ELSE (14094)
        else
          // IF STATE <= MAXL# THEN (14095)
          if (1 & (xLE (getFIXED (mSTATE), 666)))
            // DO; (14096)
            {
            rs1s3:;
              // I = INDEX1(STATE); (14097)
              {
                descriptor_t *bitRHS
                    = getBIT (16, mINDEX1 + 2 * getFIXED (mSTATE));
                int32_t numberRHS;
                numberRHS = bitToFixed (bitRHS);
                putFIXED (mCOMPILATION_LOOPxI, numberRHS);
                bitRHS->inUse = 0;
              }
              // LOOK=STATE; (14098)
              {
                int32_t numberRHS = (int32_t)(getFIXED (mSTATE));
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mLOOK, bitRHS);
                bitRHS->inUse = 0;
              }
              // IF NO_LOOK_AHEAD_DONE THEN (14099)
              if (1 & (bitToFixed (getBIT (1, mNO_LOOK_AHEAD_DONE))))
                // CALL CALL_SCAN; (14100)
                CALL_SCAN (0);
              // DO WHILE LOOK1(I) ~= 0; (14101)
              while (
                  1
                  & (xNEQ (BYTE0 (mLOOK1 + 1 * getFIXED (mCOMPILATION_LOOPxI)),
                           0)))
                {
                  // IF LOOK1(I) = TOKEN THEN (14102)
                  if (1
                      & (xEQ (
                          BYTE0 (mLOOK1 + 1 * getFIXED (mCOMPILATION_LOOPxI)),
                          getFIXED (mTOKEN))))
                    // GO TO LOOK_MATCH; (14103)
                    goto LOOK_MATCH;
                  // I = I+1; (14104)
                  {
                    int32_t numberRHS
                        = (int32_t)(xadd (getFIXED (mCOMPILATION_LOOPxI), 1));
                    putFIXED (mCOMPILATION_LOOPxI, numberRHS);
                  }
                } // End of DO WHILE block
            // LOOK_MATCH: (14105)
            LOOK_MATCH:
              // STATE = LOOK2(I); (14106)
              {
                descriptor_t *bitRHS
                    = getBIT (16, mLOOK2 + 2 * getFIXED (mCOMPILATION_LOOPxI));
                int32_t numberRHS;
                numberRHS = bitToFixed (bitRHS);
                putFIXED (mSTATE, numberRHS);
                bitRHS->inUse = 0;
              }
            es1s3:;
            } // End of DO block
          // ELSE (14107)
          else
            // DO; (14108)
            {
            rs1s4:;
              // CALL ADD_TO_STACK; (14109)
              COMPILATION_LOOPxADD_TO_STACK (0);
              // STATE_STACK(SP) = INDEX2(STATE); (14110)
              {
                descriptor_t *bitRHS
                    = getBIT (16, mINDEX2 + 2 * getFIXED (mSTATE));
                int32_t numberRHS;
                numberRHS = bitToFixed (bitRHS);
                putFIXED (mSTATE_STACK + 4 * (getFIXED (mSP)), numberRHS);
                bitRHS->inUse = 0;
              }
              // STATE = INDEX1(STATE); (14111)
              {
                descriptor_t *bitRHS
                    = getBIT (16, mINDEX1 + 2 * getFIXED (mSTATE));
                int32_t numberRHS;
                numberRHS = bitToFixed (bitRHS);
                putFIXED (mSTATE, numberRHS);
                bitRHS->inUse = 0;
              }
              // LOOK_STACK(SP),LOOK=0; (14112)
              {
                int32_t numberRHS = (int32_t)(0);
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mLOOK_STACK + 2 * (getFIXED (mSP)), bitRHS);
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mLOOK, bitRHS);
                bitRHS->inUse = 0;
              }
            es1s4:;
            } // End of DO block
      if (0)
        {
        rs1:
          continue;
        es1:
          break;
        } // block labeled COMP
    }     // End of DO WHILE block
  {
    reentryGuard = 0;
    return 0;
  }
}
