/*
  File OUTPUT_WRITERxPRINT_TEXT.c generated by XCOM-I, 2024-08-08 04:31:11.
*/

#include "runtimeC.h"

int32_t
OUTPUT_WRITERxPRINT_TEXT (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "OUTPUT_WRITERxPRINT_TEXT");
  // WAS_HERE=FALSE; (2503)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (1, mOUTPUT_WRITERxPRINT_TEXTxWAS_HERE, bitRHS);
    bitRHS->inUse = 0;
  }
  // J = MACRO_TEXT(M_CHAR_PTR); (2504)
  {
    descriptor_t *bitRHS = getBIT (
        8, getFIXED (mMACRO_TEXTS) + 1 * (getFIXED (mOUTPUT_WRITERxM_CHAR_PTR))
               + 0 + 1 * (0));
    int32_t numberRHS;
    numberRHS = bitToFixed (bitRHS);
    putFIXED (mJ, numberRHS);
    bitRHS->inUse = 0;
  }
// LINEDONE: (2505)
LINEDONE:
  // DO WHILE J ~=  239 & M_PTR < LINELENGTH; (2506)
  while (1
         & (xAND (xNEQ (getFIXED (mJ), 239),
                  xLT (COREHALFWORD (mOUTPUT_WRITERxM_PTR),
                       COREHALFWORD (mOUTPUT_WRITERxPRINT_TEXTxLINELENGTH)))))
    {
      // IF J =  238 THEN (2507)
      if (1 & (xEQ (getFIXED (mJ), 238)))
        // DO; (2508)
        {
        rs1s1:;
          // M_CHAR_PTR=M_CHAR_PTR+1; (2509)
          {
            int32_t numberRHS
                = (int32_t)(xadd (getFIXED (mOUTPUT_WRITERxM_CHAR_PTR), 1));
            putFIXED (mOUTPUT_WRITERxM_CHAR_PTR, numberRHS);
          }
          // J = MACRO_TEXT(M_CHAR_PTR); (2510)
          {
            descriptor_t *bitRHS
                = getBIT (8, getFIXED (mMACRO_TEXTS)
                                 + 1 * (getFIXED (mOUTPUT_WRITERxM_CHAR_PTR))
                                 + 0 + 1 * (0));
            int32_t numberRHS;
            numberRHS = bitToFixed (bitRHS);
            putFIXED (mJ, numberRHS);
            bitRHS->inUse = 0;
          }
          // IF J=0 THEN (2511)
          if (1 & (xEQ (getFIXED (mJ), 0)))
            // DO; (2512)
            {
            rs1s1s1:;
              // M_CHAR_PTR=M_CHAR_PTR+1; (2513)
              {
                int32_t numberRHS = (int32_t)(xadd (
                    getFIXED (mOUTPUT_WRITERxM_CHAR_PTR), 1));
                putFIXED (mOUTPUT_WRITERxM_CHAR_PTR, numberRHS);
              }
              // RETURN; (2514)
              {
                reentryGuard = 0;
                return 0;
              }
            es1s1s1:;
            } // End of DO block
        // NEXT_LINE: (2515)
        NEXT_LINE:
          // IF (J+M_PTR) >= LINELENGTH THEN (2516)
          if (1
              & (xGE (
                  xadd (getFIXED (mJ), COREHALFWORD (mOUTPUT_WRITERxM_PTR)),
                  COREHALFWORD (mOUTPUT_WRITERxPRINT_TEXTxLINELENGTH))))
            // DO; (2517)
            {
            rs1s1s2:;
              // J = J-LINELENGTH+M_PTR; (2518)
              {
                int32_t numberRHS = (int32_t)(xadd (
                    xsubtract (
                        getFIXED (mJ),
                        COREHALFWORD (mOUTPUT_WRITERxPRINT_TEXTxLINELENGTH)),
                    COREHALFWORD (mOUTPUT_WRITERxM_PTR)));
                putFIXED (mJ, numberRHS);
              }
              // CALL RESET; (2519)
              OUTPUT_WRITERxRESET (0);
              // GO TO NEXT_LINE; (2520)
              goto NEXT_LINE;
            es1s1s2:;
            } // End of DO block
          // ELSE (2521)
          else
            // M_PTR=M_PTR+J; (2522)
            {
              int32_t numberRHS = (int32_t)(xadd (
                  COREHALFWORD (mOUTPUT_WRITERxM_PTR), getFIXED (mJ)));
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (16, mOUTPUT_WRITERxM_PTR, bitRHS);
              bitRHS->inUse = 0;
            }
        es1s1:;
        } // End of DO block
      // ELSE (2523)
      else
        // IF J = BYTE('"') THEN (2524)
        if (1 & (xEQ (getFIXED (mJ), BYTE1 (cToDescriptor (NULL, "\"")))))
          // DO; (2525)
          {
          rs1s2:;
            // IF WAS_HERE THEN (2526)
            if (1
                & (bitToFixed (
                    getBIT (1, mOUTPUT_WRITERxPRINT_TEXTxWAS_HERE))))
              // WAS_HERE = FALSE; (2527)
              {
                int32_t numberRHS = (int32_t)(0);
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (1, mOUTPUT_WRITERxPRINT_TEXTxWAS_HERE, bitRHS);
                bitRHS->inUse = 0;
              }
            // ELSE (2528)
            else
              // DO; (2529)
              {
              rs1s2s1:;
                // WAS_HERE=TRUE; (2530)
                {
                  int32_t numberRHS = (int32_t)(1);
                  descriptor_t *bitRHS;
                  bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                  putBIT (1, mOUTPUT_WRITERxPRINT_TEXTxWAS_HERE, bitRHS);
                  bitRHS->inUse = 0;
                }
                // M_CHAR_PTR=M_CHAR_PTR -1; (2531)
                {
                  int32_t numberRHS = (int32_t)(xsubtract (
                      getFIXED (mOUTPUT_WRITERxM_CHAR_PTR), 1));
                  putFIXED (mOUTPUT_WRITERxM_CHAR_PTR, numberRHS);
                }
              es1s2s1:;
              } // End of DO block
            // BYTE(BUILD_M,M_PTR) = J; (2532)
            {
              int32_t numberRHS = (int32_t)(getFIXED (mJ));
              lBYTEb (ADDR (NULL, 0, "OUTPUT_WRITERxBUILD_M", 0),
                      COREHALFWORD (mOUTPUT_WRITERxM_PTR), getFIXED (mJ));
            }
          es1s2:;
          } // End of DO block
        // ELSE (2533)
        else
          // BYTE(BUILD_M,M_PTR) = J; (2534)
          {
            int32_t numberRHS = (int32_t)(getFIXED (mJ));
            lBYTEb (ADDR (NULL, 0, "OUTPUT_WRITERxBUILD_M", 0),
                    COREHALFWORD (mOUTPUT_WRITERxM_PTR), getFIXED (mJ));
          }
      // M_PTR = M_PTR +1; (2535)
      {
        int32_t numberRHS
            = (int32_t)(xadd (COREHALFWORD (mOUTPUT_WRITERxM_PTR), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mOUTPUT_WRITERxM_PTR, bitRHS);
        bitRHS->inUse = 0;
      }
      // M_CHAR_PTR=M_CHAR_PTR+1; (2536)
      {
        int32_t numberRHS
            = (int32_t)(xadd (getFIXED (mOUTPUT_WRITERxM_CHAR_PTR), 1));
        putFIXED (mOUTPUT_WRITERxM_CHAR_PTR, numberRHS);
      }
      // J = MACRO_TEXT(M_CHAR_PTR); (2537)
      {
        descriptor_t *bitRHS = getBIT (
            8, getFIXED (mMACRO_TEXTS)
                   + 1 * (getFIXED (mOUTPUT_WRITERxM_CHAR_PTR)) + 0 + 1 * (0));
        int32_t numberRHS;
        numberRHS = bitToFixed (bitRHS);
        putFIXED (mJ, numberRHS);
        bitRHS->inUse = 0;
      }
      if (0)
        {
        rs1:
          continue;
        es1:
          break;
        } // block labeled LINEDONE
    }     // End of DO WHILE block
  // IF J ~=  239 THEN (2538)
  if (1 & (xNEQ (getFIXED (mJ), 239)))
    // DO; (2539)
    {
    rs2:;
      // CALL RESET; (2540)
      OUTPUT_WRITERxRESET (0);
      // GO TO LINEDONE; (2541)
      goto LINEDONE;
    es2:;
    } // End of DO block
  // IF M_PTR = LINELENGTH THEN (2542)
  if (1
      & (xEQ (COREHALFWORD (mOUTPUT_WRITERxM_PTR),
              COREHALFWORD (mOUTPUT_WRITERxPRINT_TEXTxLINELENGTH))))
    // CALL RESET; (2543)
    OUTPUT_WRITERxRESET (0);
  {
    reentryGuard = 0;
    return 0;
  }
}
