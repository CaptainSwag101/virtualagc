/*
  File HALMAT_POP.c generated by XCOM-I, 2024-08-09 12:38:15.
*/

#include "runtimeC.h"

int32_t
HALMAT_POP (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "HALMAT_POP");
  // CURRENT_ATOM=SHL(TAG,24)|SHL(PIP#,16)|SHL(POPCODE& 4095,4)| SHL(COPT&
  // 7,1); (7218)
  {
    int32_t numberRHS = (int32_t)(xOR (
        xOR (xOR (SHL (BYTE0 (mHALMAT_POPxTAG), 24),
                  SHL (BYTE0 (mHALMAT_POPxPIPp), 16)),
             SHL (xAND (COREHALFWORD (mHALMAT_POPxPOPCODE), 4095), 4)),
        SHL (xAND (BYTE0 (mHALMAT_POPxCOPT), 7), 1)));
    putFIXED (mCURRENT_ATOM, numberRHS);
  }
  // CALL HALMAT; (7219)
  HALMAT (0);
  // LAST_POP#=NEXT_ATOM#-1; (7220)
  {
    int32_t numberRHS = (int32_t)(xsubtract (getFIXED (mNEXT_ATOMp), 1));
    putFIXED (mLAST_POPp, numberRHS);
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
