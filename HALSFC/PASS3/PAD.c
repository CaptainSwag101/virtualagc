/*
  File PAD.c generated by XCOM-I, 2024-08-09 12:40:16.
*/

#include "runtimeC.h"

descriptor_t *
PAD (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (descriptor_t *)0;
    }
  reentryGuard = guardReentry (reentryGuard, "PAD");
  // L = LENGTH(STRING); (1054)
  {
    int32_t numberRHS = (int32_t)(LENGTH (getCHARACTER (mPADxSTRING)));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mPADxL, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF L < MAX THEN (1055)
  if (1 & (xLT (COREHALFWORD (mPADxL), COREHALFWORD (mPADxMAX))))
    // STRING = STRING || SUBSTR(X72,0,MAX-L); (1056)
    {
      descriptor_t *stringRHS;
      stringRHS = xsCAT (
          getCHARACTER (mPADxSTRING),
          SUBSTR (getCHARACTER (mX72), 0,
                  xsubtract (COREHALFWORD (mPADxMAX), COREHALFWORD (mPADxL))));
      putCHARACTER (mPADxSTRING, stringRHS);
      stringRHS->inUse = 0;
    }
  // ELSE (1057)
  else
    // IF L > MAX THEN (1058)
    if (1 & (xGT (COREHALFWORD (mPADxL), COREHALFWORD (mPADxMAX))))
      // STRING = SUBSTR(STRING,0,MAX); (1059)
      {
        descriptor_t *stringRHS;
        stringRHS
            = SUBSTR (getCHARACTER (mPADxSTRING), 0, COREHALFWORD (mPADxMAX));
        putCHARACTER (mPADxSTRING, stringRHS);
        stringRHS->inUse = 0;
      }
  // RETURN STRING; (1060)
  {
    reentryGuard = 0;
    return getCHARACTER (mPADxSTRING);
  }
}
