/*
  File GENERATExGEN_CLASS0xDOFORSETUP.c generated by XCOM-I, 2024-08-08
  04:34:25.
*/

#include "runtimeC.h"

descriptor_t *
GENERATExGEN_CLASS0xDOFORSETUP (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (descriptor_t *)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GENERATExGEN_CLASS0xDOFORSETUP");
  // IF FORM(PTR) = LIT THEN (12039)
  if (1
      & (xEQ (COREHALFWORD (
                  getFIXED (mIND_STACK)
                  + 73 * (COREHALFWORD (mGENERATExGEN_CLASS0xDOFORSETUPxPTR))
                  + 32 + 2 * (0)),
              BYTE0 (mLIT))))
    // ; (12040)
    ;
  // ELSE (12041)
  else
    // DO; (12042)
    {
    rs1:;
      // CALL FORCE_BY_MODE(PTR, OPTYPE); (12043)
      {
        putBITp (16, mGENERATExFORCE_BY_MODExOP,
                 getBIT (16, mGENERATExGEN_CLASS0xDOFORSETUPxPTR));
        putBITp (16, mGENERATExFORCE_BY_MODExMODE, getBIT (16, mOPTYPE));
        GENERATExFORCE_BY_MODE (0);
      }
      // TEMP = GETFREESPACE(OPTYPE, 1); (12044)
      {
        int32_t numberRHS = (int32_t)((
            putFIXED (mGENERATExGETFREESPACExOPTYPE, COREHALFWORD (mOPTYPE)),
            putFIXED (mGENERATExGETFREESPACExTEMPSPACE, 1),
            GENERATExGETFREESPACE (0)));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mGENERATExGEN_CLASS0xDOFORSETUPxTEMP, bitRHS);
        bitRHS->inUse = 0;
      }
      // CALL EMIT_BY_MODE(STORE, REG(PTR), TEMP, OPTYPE); (12045)
      {
        putBITp (16, mGENERATExEMIT_BY_MODExOP, getBIT (16, mGENERATExSTORE));
        putBITp (
            16, mGENERATExEMIT_BY_MODExR,
            getBIT (
                16,
                getFIXED (mIND_STACK)
                    + 73 * (COREHALFWORD (mGENERATExGEN_CLASS0xDOFORSETUPxPTR))
                    + 46 + 2 * (0)));
        putBITp (16, mGENERATExEMIT_BY_MODExOP2,
                 getBIT (16, mGENERATExGEN_CLASS0xDOFORSETUPxTEMP));
        putBITp (16, mGENERATExEMIT_BY_MODExMODE, getBIT (16, mOPTYPE));
        GENERATExEMIT_BY_MODE (0);
      }
      // CALL DROP_REG(PTR); (12046)
      {
        putBITp (16, mGENERATExDROP_REGxOP,
                 getBIT (16, mGENERATExGEN_CLASS0xDOFORSETUPxPTR));
        GENERATExDROP_REG (0);
      }
      // CALL RETURN_STACK_ENTRY(PTR); (12047)
      {
        putBITp (16, mGENERATExRETURN_STACK_ENTRYxP,
                 getBIT (16, mGENERATExGEN_CLASS0xDOFORSETUPxPTR));
        GENERATExRETURN_STACK_ENTRY (0);
      }
      // PTR = TEMP; (12048)
      {
        descriptor_t *bitRHS
            = getBIT (16, mGENERATExGEN_CLASS0xDOFORSETUPxTEMP);
        putBIT (16, mGENERATExGEN_CLASS0xDOFORSETUPxPTR, bitRHS);
        bitRHS->inUse = 0;
      }
    es1:;
    } // End of DO block
  // RETURN PTR; (12049)
  {
    reentryGuard = 0;
    return getBIT (16, mGENERATExGEN_CLASS0xDOFORSETUPxPTR);
  }
}
