/*
  File GENERATExEMITSIOP.c generated by XCOM-I, 2024-08-09 12:41:32.
*/

#include "runtimeC.h"

int32_t
GENERATExEMITSIOP (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GENERATExEMITSIOP");
  // CALL EMITDELTA(INX_CON(OP)); (3244)
  {
    putFIXED (mGENERATExEMITDELTAxVALUE,
              getFIXED (getFIXED (mIND_STACK)
                        + 73 * (COREHALFWORD (mGENERATExEMITSIOPxOP)) + 4
                        + 4 * (0)));
    GENERATExEMITDELTA (0);
  }
  // DO CASE PACKFORM(FORM(OP)); (3245)
  {
  rs1:
    switch (BYTE0 (
        mPACKFORM
        + 1
              * COREHALFWORD (getFIXED (mIND_STACK)
                              + 73 * (COREHALFWORD (mGENERATExEMITSIOPxOP))
                              + 32 + 2 * (0))))
      {
      case 0:
        // CALL EMITSP(INST, FORM(OP), LOC(OP), VALUE); (3247)
        {
          putBITp (16, mGENERATExEMITSPxINST,
                   getBIT (16, mGENERATExEMITSIOPxINST));
          putBITp (
              16, mGENERATExEMITSPxFLAG,
              getBIT (16, getFIXED (mIND_STACK)
                              + 73 * (COREHALFWORD (mGENERATExEMITSIOPxOP))
                              + 32 + 2 * (0)));
          putBITp (
              16, mGENERATExEMITSPxPTR,
              getBIT (16, getFIXED (mIND_STACK)
                              + 73 * (COREHALFWORD (mGENERATExEMITSIOPxOP))
                              + 40 + 2 * (0)));
          putBITp (16, mGENERATExEMITSPxVALUE,
                   getBIT (16, mGENERATExEMITSIOPxVALUE));
          GENERATExEMITSP (0);
        }
        break;
      case 1:
        // DO; (3248)
        {
        rs1s1:;
          // CALL EMITSI(INST, BASE(OP), DISP(OP), VALUE); (3248)
          {
            putBITp (16, mGENERATExEMITSIxINST,
                     getBIT (16, mGENERATExEMITSIOPxINST));
            putBITp (
                16, mGENERATExEMITSIxXBASE,
                getBIT (16, getFIXED (mIND_STACK)
                                + 73 * (COREHALFWORD (mGENERATExEMITSIOPxOP))
                                + 22 + 2 * (0)));
            putBITp (
                16, mGENERATExEMITSIxXDISP,
                getBIT (16, getFIXED (mIND_STACK)
                                + 73 * (COREHALFWORD (mGENERATExEMITSIOPxOP))
                                + 30 + 2 * (0)));
            putBITp (16, mGENERATExEMITSIxVALUE,
                     getBIT (16, mGENERATExEMITSIOPxVALUE));
            GENERATExEMITSI (0);
          }
          // IF BASE(OP) ~= TEMPBASE THEN (3249)
          if (1
              & (xNEQ (
                  COREHALFWORD (getFIXED (mIND_STACK)
                                + 73 * (COREHALFWORD (mGENERATExEMITSIOPxOP))
                                + 22 + 2 * (0)),
                  BYTE0 (mTEMPBASE))))
            // CALL DROP_BASE(OP); (3250)
            {
              putBITp (16, mGENERATExDROP_BASExOP,
                       getBIT (16, mGENERATExEMITSIOPxOP));
              GENERATExDROP_BASE (0);
            }
          // IF FORM(OP) = WORK THEN (3251)
          if (1
              & (xEQ (
                  COREHALFWORD (getFIXED (mIND_STACK)
                                + 73 * (COREHALFWORD (mGENERATExEMITSIOPxOP))
                                + 32 + 2 * (0)),
                  BYTE0 (mWORK))))
            // SAVED_LINE(LOC(OP)) = NO_BRANCH_AROUND(SAVED_LINE(LOC(OP)));
            // (3252)
            {
              int32_t numberRHS = (int32_t)((
                  putFIXED (
                      mNO_BRANCH_AROUNDxLINE,
                      getFIXED (mSAVED_LINE
                                + 4
                                      * COREHALFWORD (
                                          getFIXED (mIND_STACK)
                                          + 73
                                                * (COREHALFWORD (
                                                    mGENERATExEMITSIOPxOP))
                                          + 40 + 2 * (0)))),
                  NO_BRANCH_AROUND (0)));
              putFIXED (
                  mSAVED_LINE
                      + 4
                            * (COREHALFWORD (
                                getFIXED (mIND_STACK)
                                + 73 * (COREHALFWORD (mGENERATExEMITSIOPxOP))
                                + 40 + 2 * (0))),
                  numberRHS);
            }
        es1s1:;
        } // End of DO block
        break;
      case 2:
        // CALL ERRORS(CLASS_ZO,2); (3254)
        {
          putBITp (16, mERRORSxCLASS, getBIT (8, mCLASS_ZO));
          putBITp (16, mERRORSxNUM, fixedToBit (32, (int32_t)(2)));
          ERRORS (0);
        }
        break;
      }
  } // End of DO CASE block
  {
    reentryGuard = 0;
    return 0;
  }
}
