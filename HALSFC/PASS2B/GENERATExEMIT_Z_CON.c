/*
  File GENERATExEMIT_Z_CON.c generated by XCOM-I, 2024-08-08 04:34:25.
*/

#include "runtimeC.h"

int32_t
GENERATExEMIT_Z_CON (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GENERATExEMIT_Z_CON");
  // IF ID1 > 0 THEN (3314)
  if (1 & (xGT (COREHALFWORD (mGENERATExEMIT_Z_CONxID1), 0)))
    // CALL EMITC(RLD, ID1 + SHL(FLAG1, 12)); (3315)
    {
      putBITp (16, mEMITCxTYPE, getBIT (8, mRLD));
      putBITp (
          16, mEMITCxINST,
          fixedToBit (
              32, (int32_t)(xadd (
                      COREHALFWORD (mGENERATExEMIT_Z_CONxID1),
                      SHL (COREHALFWORD (mGENERATExEMIT_Z_CONxFLAG1), 12)))));
      EMITC (0);
    }
  // IF ID2 > 0 THEN (3316)
  if (1 & (xGT (COREHALFWORD (mGENERATExEMIT_Z_CONxID2), 0)))
    // DO; (3317)
    {
    rs1:;
      // IF ADR < 0 THEN (3318)
      if (1 & (xLT (getFIXED (mGENERATExEMIT_Z_CONxADR), 0)))
        // DO; (3319)
        {
        rs1s1:;
          // ADR = -ADR; (3320)
          {
            int32_t numberRHS
                = (int32_t)(xminus (getFIXED (mGENERATExEMIT_Z_CONxADR)));
            putFIXED (mGENERATExEMIT_Z_CONxADR, numberRHS);
          }
          // FLAG2 = FLAG2 | 8; (3321)
          {
            int32_t numberRHS = (int32_t)(xOR (
                COREHALFWORD (mGENERATExEMIT_Z_CONxFLAG2), 8));
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mGENERATExEMIT_Z_CONxFLAG2, bitRHS);
            bitRHS->inUse = 0;
          }
        es1s1:;
        } // End of DO block
      // CALL EMITC(RLD, ID2 + SHL(FLAG2, 12)); (3322)
      {
        putBITp (16, mEMITCxTYPE, getBIT (8, mRLD));
        putBITp (
            16, mEMITCxINST,
            fixedToBit (32, (int32_t)(xadd (
                                COREHALFWORD (mGENERATExEMIT_Z_CONxID2),
                                SHL (COREHALFWORD (mGENERATExEMIT_Z_CONxFLAG2),
                                     12)))));
        EMITC (0);
      }
    es1:;
    } // End of DO block
  // CALL EMITC(ZADDR, REL); (3323)
  {
    putBITp (16, mEMITCxTYPE, getBIT (8, mZADDR));
    putBITp (16, mEMITCxINST, getBIT (16, mGENERATExEMIT_Z_CONxREL));
    EMITC (0);
  }
  // CALL EMITW(SHL(ADR,16) | SHL(FLAG,8)); (3324)
  {
    putFIXED (mEMITWxDATA,
              xOR (SHL (getFIXED (mGENERATExEMIT_Z_CONxADR), 16),
                   SHL (COREHALFWORD (mGENERATExEMIT_Z_CONxFLAG), 8)));
    EMITW (0);
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
