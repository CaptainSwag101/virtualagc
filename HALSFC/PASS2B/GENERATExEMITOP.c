/*
  File GENERATExEMITOP.c generated by XCOM-I, 2024-08-08 04:34:25.
*/

#include "runtimeC.h"

int32_t
GENERATExEMITOP (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GENERATExEMITOP");
  // IF DATA_REMOTE THEN (3186)
  if (1 & (bitToFixed (getBIT (1, mDATA_REMOTE))))
    // DO; (3187)
    {
    rs1:;
      // IF (INST = LA) THEN (3188)
      if (1 & (xEQ (COREHALFWORD (mGENERATExEMITOPxINST), BYTE0 (mLA))))
        // CALL REG_STAT(OP,XREG,LOADADDR); (3189)
        {
          putBITp (16, mGENERATExREG_STATxOP,
                   getBIT (16, mGENERATExEMITOPxOP));
          putBITp (16, mGENERATExREG_STATxR,
                   getBIT (16, mGENERATExEMITOPxXREG));
          putBITp (8, mGENERATExREG_STATxTYPE_LOAD,
                   fixedToBit (32, (int32_t)(3)));
          GENERATExREG_STAT (0);
        }
      // IF (NR_DEREF(OP)|NR_DEREF_TMP(OP)) & (BASE(OP)=3) THEN (3190)
      if (1
          & (xAND (
              xOR (BYTE0 (getFIXED (mIND_STACK)
                          + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 60
                          + 1 * (0)),
                   BYTE0 (getFIXED (mIND_STACK)
                          + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 61
                          + 1 * (0))),
              xEQ (COREHALFWORD (getFIXED (mIND_STACK)
                                 + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                 + 22 + 2 * (0)),
                   3))))
        // DO; (3191)
        {
        rs1s1:;
          // CALL COPY_REG_INFO(1,3,USAGE(1)); (3192)
          {
            putBITp (16, mGENERATExCOPY_REG_INFOxRF,
                     fixedToBit (32, (int32_t)(1)));
            putBITp (16, mGENERATExCOPY_REG_INFOxRT,
                     fixedToBit (32, (int32_t)(3)));
            putBITp (16, mGENERATExCOPY_REG_INFOxUSG,
                     getBIT (16, mUSAGE + 2 * 1));
            GENERATExCOPY_REG_INFO (0);
          }
          // CALL EMITRR(LR, 1, 3); (3193)
          {
            putBITp (16, mGENERATExEMITRRxINST, getBIT (8, mLR));
            putBITp (16, mGENERATExEMITRRxREG1, fixedToBit (32, (int32_t)(1)));
            putBITp (16, mGENERATExEMITRRxREG2, fixedToBit (32, (int32_t)(3)));
            GENERATExEMITRR (0);
          }
          // BASE(OP) = 1; (3194)
          {
            int32_t numberRHS = (int32_t)(1);
            putBIT (16,
                    getFIXED (mIND_STACK)
                        + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 22
                        + 2 * (0),
                    fixedToBit (16, numberRHS));
          }
          // CALL CHECK_RESTORE_R1R3(INST,CSYM,3,XREG,LOADADDR); (3195)
          {
            putBITp (16, mGENERATExCHECK_RESTORE_R1R3xINST,
                     getBIT (16, mGENERATExEMITOPxINST));
            putBITp (16, mGENERATExCHECK_RESTORE_R1R3xFLAG, getBIT (8, mCSYM));
            putBITp (16, mGENERATExCHECK_RESTORE_R1R3xXBASE,
                     fixedToBit (32, (int32_t)(3)));
            putBITp (16, mGENERATExCHECK_RESTORE_R1R3xCOND,
                     getBIT (16, mGENERATExEMITOPxXREG));
            putBITp (16, mGENERATExCHECK_RESTORE_R1R3xINSTYPE,
                     fixedToBit (32, (int32_t)(3)));
            GENERATExCHECK_RESTORE_R1R3 (0);
          }
          // D_R1_CHANGE = SHL(D_R1_CHANGE,1) | TRUE; (3196)
          {
            int32_t numberRHS
                = (int32_t)(xOR (SHL (BYTE0 (mD_R1_CHANGE), 1), 1));
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (8, mD_R1_CHANGE, bitRHS);
            bitRHS->inUse = 0;
          }
        es1s1:;
        } // End of DO block
    es1:;
    } // End of DO block
  // IF NR_DEREF(OP) & (NR_DELTA(OP)>0) THEN (3197)
  if (1
      & (xAND (BYTE0 (getFIXED (mIND_STACK)
                      + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 60
                      + 1 * (0)),
               xGT (COREHALFWORD (getFIXED (mIND_STACK)
                                  + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                  + 58 + 2 * (0)),
                    0))))
    // DO; (3198)
    {
    rs2:;
      // INX_CON(OP) = INX_CON(OP)+NR_DELTA(OP); (3199)
      {
        int32_t numberRHS = (int32_t)(xadd (
            getFIXED (getFIXED (mIND_STACK)
                      + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 4
                      + 4 * (0)),
            COREHALFWORD (getFIXED (mIND_STACK)
                          + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 58
                          + 2 * (0))));
        putFIXED (getFIXED (mIND_STACK)
                      + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 4
                      + 4 * (0),
                  numberRHS);
      }
      // NR_DELTA(OP)=0; (3200)
      {
        int32_t numberRHS = (int32_t)(0);
        putBIT (16,
                getFIXED (mIND_STACK)
                    + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 58 + 2 * (0),
                fixedToBit (16, numberRHS));
      }
    es2:;
    } // End of DO block
  // CALL EMITDELTA(INX_CON(OP)); (3201)
  {
    putFIXED (mGENERATExEMITDELTAxVALUE,
              getFIXED (getFIXED (mIND_STACK)
                        + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 4
                        + 4 * (0)));
    GENERATExEMITDELTA (0);
  }
  // DO CASE PACKFORM(FORM(OP)); (3202)
  {
  rs3:
    switch (BYTE0 (
        mPACKFORM
        + 1
              * COREHALFWORD (getFIXED (mIND_STACK)
                              + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 32
                              + 2 * (0))))
      {
      case 0:
        // CALL EMITP( INST, XREG, INX(OP), FORM(OP), LOC(OP), 0, NR_DEREF(OP)
        // ); (3204)
        {
          putBITp (16, mGENERATExEMITPxINST,
                   getBIT (16, mGENERATExEMITOPxINST));
          putBITp (16, mGENERATExEMITPxXREG,
                   getBIT (16, mGENERATExEMITOPxXREG));
          putBITp (16, mGENERATExEMITPxINDEX,
                   getBIT (16, getFIXED (mIND_STACK)
                                   + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                   + 34 + 2 * (0)));
          putBITp (16, mGENERATExEMITPxFLAG,
                   getBIT (16, getFIXED (mIND_STACK)
                                   + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                   + 32 + 2 * (0)));
          putBITp (16, mGENERATExEMITPxPTR,
                   getBIT (16, getFIXED (mIND_STACK)
                                   + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                   + 40 + 2 * (0)));
          putBITp (16, mGENERATExEMITPxINSTYPE, fixedToBit (32, (int32_t)(0)));
          putBITp (1, mGENERATExEMITPxNRDEREF,
                   getBIT (8, getFIXED (mIND_STACK)
                                  + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                  + 60 + 1 * (0)));
          GENERATExEMITP (0);
        }
        break;
      case 1:
        // DO; (3205)
        {
        rs3s1:;
          // CALL EMITRX(INST, XREG, INX(OP), BASE(OP), DISP(OP), NR_DEREF(OP)
          // ); (3205)
          {
            putBITp (16, mGENERATExEMITRXxINST,
                     getBIT (16, mGENERATExEMITOPxINST));
            putBITp (16, mGENERATExEMITRXxXREG,
                     getBIT (16, mGENERATExEMITOPxXREG));
            putBITp (
                16, mGENERATExEMITRXxINDEX,
                getBIT (16, getFIXED (mIND_STACK)
                                + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                + 34 + 2 * (0)));
            putBITp (
                16, mGENERATExEMITRXxXBASE,
                getBIT (16, getFIXED (mIND_STACK)
                                + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                + 22 + 2 * (0)));
            putBITp (
                16, mGENERATExEMITRXxXDISP,
                getBIT (16, getFIXED (mIND_STACK)
                                + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                + 30 + 2 * (0)));
            putBITp (1, mGENERATExEMITRXxNRDEREF,
                     getBIT (8, getFIXED (mIND_STACK)
                                    + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                    + 60 + 1 * (0)));
            GENERATExEMITRX (0);
          }
          // IF BASE(OP) ~= TEMPBASE THEN (3206)
          if (1
              & (xNEQ (
                  COREHALFWORD (getFIXED (mIND_STACK)
                                + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                + 22 + 2 * (0)),
                  BYTE0 (mTEMPBASE))))
            // CALL DROP_BASE(OP); (3207)
            {
              putBITp (16, mGENERATExDROP_BASExOP,
                       getBIT (16, mGENERATExEMITOPxOP));
              GENERATExDROP_BASE (0);
            }
          // IF FORM(OP) = WORK THEN (3208)
          if (1
              & (xEQ (COREHALFWORD (getFIXED (mIND_STACK)
                                    + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                    + 32 + 2 * (0)),
                      BYTE0 (mWORK))))
            // IF NR_DEREF(OP) = 0 THEN (3209)
            if (1
                & (xEQ (BYTE0 (getFIXED (mIND_STACK)
                               + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 60
                               + 1 * (0)),
                        0)))
              // SAVED_LINE(LOC(OP)) = NO_BRANCH_AROUND(SAVED_LINE(LOC(OP)));
              // (3210)
              {
                int32_t numberRHS = (int32_t)((
                    putFIXED (
                        mNO_BRANCH_AROUNDxLINE,
                        getFIXED (mSAVED_LINE
                                  + 4
                                        * COREHALFWORD (
                                            getFIXED (mIND_STACK)
                                            + 73
                                                  * (COREHALFWORD (
                                                      mGENERATExEMITOPxOP))
                                            + 40 + 2 * (0)))),
                    NO_BRANCH_AROUND (0)));
                putFIXED (
                    mSAVED_LINE
                        + 4
                              * (COREHALFWORD (
                                  getFIXED (mIND_STACK)
                                  + 73 * (COREHALFWORD (mGENERATExEMITOPxOP))
                                  + 40 + 2 * (0))),
                    numberRHS);
              }
        es3s1:;
        } // End of DO block
        break;
      case 2:
        // CALL ERRORS(CLASS_ZO,2); (3212)
        {
          putBITp (16, mERRORSxCLASS, getBIT (8, mCLASS_ZO));
          putBITp (16, mERRORSxNUM, fixedToBit (32, (int32_t)(2)));
          ERRORS (0);
        }
        break;
      }
  } // End of DO CASE block
  // IF (DOUBLE_TYPE(XREG) > 0) & (XREG >= FR0) & ( (INST= 121) | (INST= 112) )
  // THEN (3212)
  if (1
      & (xAND (xAND (xGT (BYTE0 (mDOUBLE_TYPE
                                 + 1 * COREHALFWORD (mGENERATExEMITOPxXREG)),
                          0),
                     xGE (COREHALFWORD (mGENERATExEMITOPxXREG), BYTE0 (mFR0))),
               xOR (xEQ (COREHALFWORD (mGENERATExEMITOPxINST), 121),
                    xEQ (COREHALFWORD (mGENERATExEMITOPxINST), 112)))))
    // R_TYPE(XREG)=DOUBLE_TYPE(XREG); (3213)
    {
      descriptor_t *bitRHS = getBIT (
          8, mDOUBLE_TYPE + 1 * COREHALFWORD (mGENERATExEMITOPxXREG));
      putBIT (8, mR_TYPE + 1 * (COREHALFWORD (mGENERATExEMITOPxXREG)), bitRHS);
      bitRHS->inUse = 0;
    }
  // IF NR_BASE(OP) > 0 THEN (3214)
  if (1
      & (xGT (COREHALFWORD (getFIXED (mIND_STACK)
                            + 73 * (COREHALFWORD (mGENERATExEMITOPxOP)) + 62
                            + 2 * (0)),
              0)))
    // CALL NR_CHECKPOINT(1,OP); (3215)
    {
      putBITp (16, mGENERATExNR_CHECKPOINTxR, fixedToBit (32, (int32_t)(1)));
      putBITp (16, mGENERATExNR_CHECKPOINTxOP,
               getBIT (16, mGENERATExEMITOPxOP));
      GENERATExNR_CHECKPOINT (0);
    }
  {
    reentryGuard = 0;
    return 0;
  }
}
