/*
  File GENERATExGEN_CLASS0xBLOCK_CLOSE.c generated by XCOM-I, 2024-08-09
  12:41:32.
*/

#include "runtimeC.h"

int32_t
GENERATExGEN_CLASS0xBLOCK_CLOSE (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard
      = guardReentry (reentryGuard, "GENERATExGEN_CLASS0xBLOCK_CLOSE");
  // INDEX = PROC_LEVEL(INDEXNEST); (11932)
  {
    descriptor_t *bitRHS
        = getBIT (16, mPROC_LEVEL + 2 * COREHALFWORD (mINDEXNEST));
    putBIT (16, mINDEX, bitRHS);
    bitRHS->inUse = 0;
  }
  // TYPE(0) = SYT_TYPE(INDEX); (11933)
  {
    descriptor_t *bitRHS = getBIT (
        8, getFIXED (mSYM_TAB) + 34 * (COREHALFWORD (mINDEX)) + 32 + 1 * (0));
    putBIT (16, getFIXED (mIND_STACK) + 73 * (0) + 50 + 2 * (0), bitRHS);
    bitRHS->inUse = 0;
  }
  // IF ~STOPPERFLAG THEN (11934)
  if (1 & (xNOT (BYTE0 (mSTOPPERFLAG))))
    // IF TYPE(0) < ANY_LABEL THEN (11935)
    if (1
        & (xLT (COREHALFWORD (getFIXED (mIND_STACK) + 73 * (0) + 50 + 2 * (0)),
                BYTE0 (mANY_LABEL))))
      // CALL ERRCALL(14, 'CLOSE REACHED IN FUNCTION'); (11936)
      {
        putBITp (16, mGENERATExERRCALLxERRp, fixedToBit (32, (int32_t)(14)));
        putCHARACTERp (mGENERATExERRCALLxMSG,
                       cToDescriptor (NULL, "CLOSE REACHED IN FUNCTION"));
        GENERATExERRCALL (0);
      }
  // IF TYPE(0) ~= COMPOOL_LABEL THEN (11937)
  if (1
      & (xNEQ (COREHALFWORD (getFIXED (mIND_STACK) + 73 * (0) + 50 + 2 * (0)),
               BYTE0 (mCOMPOOL_LABEL))))
    // DO; (11938)
    {
    rs1:;
      // CALL SET_LABEL(SYT_LABEL(INDEX)+1); (11939)
      {
        putBITp (
            16, mGENERATExSET_LABELxSTMTNO,
            fixedToBit (32, (int32_t)(xadd (
                                COREHALFWORD (getFIXED (mSYM_TAB)
                                              + 34 * (COREHALFWORD (mINDEX))
                                              + 26 + 2 * (0)),
                                1))));
        GENERATExSET_LABEL (0);
      }
      // CALL MARKER; (11940)
      GENERATExMARKER (0);
      // IF CALL#(INDEXNEST) = 4 THEN (11941)
      if (1 & (xEQ (BYTE0 (mCALLp + 1 * COREHALFWORD (mINDEXNEST)), 4)))
        // GO TO UNIMPLEMENTED; (11942)
        {
          resetAllReentryGuards ();
          longjmp (jbUNIMPLEMENTED, 1);
        }
      // CALL EMIT_RETURN; (11943)
      GENERATExGEN_CLASS0xEMIT_RETURN (0);
    es1:;
    } // End of DO block
  // CALL EMITC(SMADDR, LINE#); (11944)
  {
    putBITp (16, mEMITCxTYPE, getBIT (8, mSMADDR));
    putBITp (16, mEMITCxINST, fixedToBit (32, (int32_t)(getFIXED (mLINEp))));
    EMITC (0);
  }
  // ADDRS_ISSUED = TRUE; (11945)
  {
    int32_t numberRHS = (int32_t)(1);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (1, mADDRS_ISSUED, bitRHS);
    bitRHS->inUse = 0;
  }
  // MARKER_ISSUED = TRUE; (11946)
  {
    int32_t numberRHS = (int32_t)(1);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (1, mMARKER_ISSUED, bitRHS);
    bitRHS->inUse = 0;
  }
  // UPPER(PROC_LINK(INDEXNEST)) = -1; (11947)
  {
    int32_t numberRHS = (int32_t)(-1);
    putFIXED (
        mUPPER
            + 4 * (COREHALFWORD (mPROC_LINK + 2 * COREHALFWORD (mINDEXNEST))),
        numberRHS);
  }
  // ERRPTR = ERRPTR(INDEXNEST); (11948)
  {
    descriptor_t *bitRHS
        = getBIT (16, mGENERATExERRPTR + 2 * COREHALFWORD (mINDEXNEST));
    putBIT (16, mGENERATExERRPTR, bitRHS);
    bitRHS->inUse = 0;
  }
  // FIRST_TIME = FIRST_TIME(INDEXNEST); (11949)
  {
    descriptor_t *bitRHS
        = getBIT (1, mFIRST_TIME + 1 * COREHALFWORD (mINDEXNEST));
    putBIT (1, mFIRST_TIME, bitRHS);
    bitRHS->inUse = 0;
  }
  // LAST_SVCI = LAST_SVCI(INDEXNEST); (11950)
  {
    descriptor_t *bitRHS
        = getBIT (16, mLAST_SVCI + 2 * COREHALFWORD (mINDEXNEST));
    putBIT (16, mLAST_SVCI, bitRHS);
    bitRHS->inUse = 0;
  }
  // LAST_LOGICAL_STMT= LAST_LOGICAL_STMT(INDEXNEST); (11951)
  {
    descriptor_t *bitRHS
        = getBIT (16, mLAST_LOGICAL_STMT + 2 * COREHALFWORD (mINDEXNEST));
    putBIT (16, mLAST_LOGICAL_STMT, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF CALL#(INDEXNEST) = 4 THEN (11952)
  if (1 & (xEQ (BYTE0 (mCALLp + 1 * COREHALFWORD (mINDEXNEST)), 4)))
    // GO TO UNIMPLEMENTED; (11953)
    {
      resetAllReentryGuards ();
      longjmp (jbUNIMPLEMENTED, 1);
    }
  // CALL RESUME_LOCCTR(INDEXNEST(NARGINDEX)); (11954)
  {
    putBITp (16, mGENERATExRESUME_LOCCTRxNEST,
             getBIT (16, mINDEXNEST + 2 * COREHALFWORD (mNARGINDEX)));
    GENERATExRESUME_LOCCTR (0);
  }
  // NARGINDEX = INDEXNEST; (11955)
  {
    descriptor_t *bitRHS = getBIT (16, mINDEXNEST);
    putBIT (16, mNARGINDEX, bitRHS);
    bitRHS->inUse = 0;
  }
  // CALL CLEAR_REGS; (11956)
  CLEAR_REGS (0);
  {
    reentryGuard = 0;
    return 0;
  }
}
