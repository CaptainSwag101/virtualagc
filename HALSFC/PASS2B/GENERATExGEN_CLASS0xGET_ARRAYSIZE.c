/*
  File GENERATExGEN_CLASS0xGET_ARRAYSIZE.c generated by XCOM-I, 2024-08-09
  12:41:32.
*/

#include "runtimeC.h"

descriptor_t *
GENERATExGEN_CLASS0xGET_ARRAYSIZE (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (descriptor_t *)0;
    }
  reentryGuard
      = guardReentry (reentryGuard, "GENERATExGEN_CLASS0xGET_ARRAYSIZE");
  // IF COPY(OP) = 0 THEN (10799)
  if (1
      & (xEQ (COREHALFWORD (
                  getFIXED (mIND_STACK)
                  + 73 * (COREHALFWORD (mGENERATExGEN_CLASS0xGET_ARRAYSIZExOP))
                  + 26 + 2 * (0)),
              0)))
    // RETURN 1; (10800)
    {
      reentryGuard = 0;
      return fixedToBit (32, (int32_t)(1));
    }
  // IF SYMFORM(FORM(OP))  | (NR_DEREF(OP) & FORM(OP) = NRTEMP) THEN (10801)
  if (1
      & (xOR (
          BYTE0 (mSYMFORM
                 + 1
                       * COREHALFWORD (
                           getFIXED (mIND_STACK)
                           + 73
                                 * (COREHALFWORD (
                                     mGENERATExGEN_CLASS0xGET_ARRAYSIZExOP))
                           + 32 + 2 * (0))),
          xAND (
              BYTE0 (
                  getFIXED (mIND_STACK)
                  + 73 * (COREHALFWORD (mGENERATExGEN_CLASS0xGET_ARRAYSIZExOP))
                  + 60 + 1 * (0)),
              xEQ (COREHALFWORD (
                       getFIXED (mIND_STACK)
                       + 73
                             * (COREHALFWORD (
                                 mGENERATExGEN_CLASS0xGET_ARRAYSIZExOP))
                       + 32 + 2 * (0)),
                   BYTE0 (mWORK))))))
    // IF MAJOR_STRUCTURE(OP) THEN (10802)
    if (1
        & (bitToFixed (
            (putBITp (16, mGENERATExMAJOR_STRUCTURExOP,
                      getBIT (16, mGENERATExGEN_CLASS0xGET_ARRAYSIZExOP)),
             GENERATExMAJOR_STRUCTURE (0)))))
      // RETURN GETSTRUCT#(LOC(OP)); (10803)
      {
        reentryGuard = 0;
        return (
            putBITp (
                16, mGENERATExGEN_CLASS0xGETSTRUCTpxOP,
                getBIT (16,
                        getFIXED (mIND_STACK)
                            + 73
                                  * (COREHALFWORD (
                                      mGENERATExGEN_CLASS0xGET_ARRAYSIZExOP))
                            + 40 + 2 * (0))),
            GENERATExGEN_CLASS0xGETSTRUCTp (0));
      }
    // ELSE (10804)
    else
      // RETURN LUMP_ARRAYSIZE(LOC2(OP)); (10805)
      {
        reentryGuard = 0;
        return fixedToBit (
            32,
            (int32_t)((
                putBITp (
                    16, mGENERATExLUMP_ARRAYSIZExOP,
                    getBIT (
                        16,
                        getFIXED (mIND_STACK)
                            + 73
                                  * (COREHALFWORD (
                                      mGENERATExGEN_CLASS0xGET_ARRAYSIZExOP))
                            + 42 + 2 * (0))),
                GENERATExLUMP_ARRAYSIZE (0))));
      }
  // COP = 1; (10806)
  {
    int32_t numberRHS = (int32_t)(1);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mGENERATExGEN_CLASS0xGET_ARRAYSIZExCOP, bitRHS);
    bitRHS->inUse = 0;
  }
  // DO I = VAL(OP) TO VAL(OP) + COPY(OP) - 1; (10807)
  {
    int32_t from108, to108, by108;
    from108 = getFIXED (
        getFIXED (mIND_STACK)
        + 73 * (COREHALFWORD (mGENERATExGEN_CLASS0xGET_ARRAYSIZExOP)) + 12
        + 4 * (0));
    to108 = xsubtract (
        xadd (getFIXED (
                  getFIXED (mIND_STACK)
                  + 73 * (COREHALFWORD (mGENERATExGEN_CLASS0xGET_ARRAYSIZExOP))
                  + 12 + 4 * (0)),
              COREHALFWORD (
                  getFIXED (mIND_STACK)
                  + 73 * (COREHALFWORD (mGENERATExGEN_CLASS0xGET_ARRAYSIZExOP))
                  + 26 + 2 * (0))),
        1);
    by108 = 1;
    for (putBIT (16, mGENERATExGEN_CLASS0xGET_ARRAYSIZExI,
                 fixedToBit (16, from108));
         bitToFixed (getBIT (16, mGENERATExGEN_CLASS0xGET_ARRAYSIZExI))
         <= to108;
         putBIT (16, mGENERATExGEN_CLASS0xGET_ARRAYSIZExI,
                 fixedToBit (16, bitToFixed (getBIT (
                                     16, mGENERATExGEN_CLASS0xGET_ARRAYSIZExI))
                                     + by108)))
      {
        // COP = COP * SF_RANGE(I); (10808)
        {
          int32_t numberRHS = (int32_t)(xmultiply (
              COREHALFWORD (mGENERATExGEN_CLASS0xGET_ARRAYSIZExCOP),
              COREHALFWORD (
                  mGENERATExSF_RANGE
                  + 2 * COREHALFWORD (mGENERATExGEN_CLASS0xGET_ARRAYSIZExI))));
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (16, mGENERATExGEN_CLASS0xGET_ARRAYSIZExCOP, bitRHS);
          bitRHS->inUse = 0;
        }
      }
  } // End of DO for-loop block
  // RETURN COP; (10809)
  {
    reentryGuard = 0;
    return getBIT (16, mGENERATExGEN_CLASS0xGET_ARRAYSIZExCOP);
  }
}
