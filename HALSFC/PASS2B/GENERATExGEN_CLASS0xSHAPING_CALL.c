/*
  File GENERATExGEN_CLASS0xSHAPING_CALL.c generated by XCOM-I, 2024-08-09
  12:41:32.
*/

#include "runtimeC.h"

int32_t
GENERATExGEN_CLASS0xSHAPING_CALL (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard
      = guardReentry (reentryGuard, "GENERATExGEN_CLASS0xSHAPING_CALL");
  // D_RTL_SETUP = TRUE; (11499)
  {
    int32_t numberRHS = (int32_t)(1);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mD_RTL_SETUP, bitRHS);
    bitRHS->inUse = 0;
  }
  // CHAROP = TYPE(OP) = CHAR; (11500)
  {
    int32_t numberRHS = (int32_t)(xEQ (
        COREHALFWORD (
            getFIXED (mIND_STACK)
            + 73 * (COREHALFWORD (mGENERATExGEN_CLASS0xSHAPING_CALLxOP)) + 50
            + 2 * (0)),
        BYTE0 (mCHAR)));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (1, mGENERATExGEN_CLASS0xSHAPING_CALLxCHAROP, bitRHS);
    bitRHS->inUse = 0;
  }
  // CALL TRUE_INX(OP); (11501)
  {
    putBITp (16, mGENERATExTRUE_INXxOP,
             getBIT (16, mGENERATExGEN_CLASS0xSHAPING_CALLxOP));
    GENERATExTRUE_INX (0);
  }
  // INTCALL = 2 + INTRINSIC(NAME(CHAROP)); (11502)
  {
    int32_t numberRHS = (int32_t)(xadd (
        2,
        bitToFixed (
            (putCHARACTERp (
                 mINTRINSICxNAME,
                 getCHARACTER (
                     mGENERATExGEN_CLASS0xSHAPING_CALLxNAME
                     + 4 * BYTE0 (mGENERATExGEN_CLASS0xSHAPING_CALLxCHAROP))),
             INTRINSIC (0)))));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mGENERATExINTCALL, bitRHS);
    bitRHS->inUse = 0;
  }
  // CALL STACK_REG_PARM(FORCE_ADDRESS(SYSARG1(INTCALL), OP, 1)); (11503)
  {
    putBITp (
        16, mGENERATExSTACK_REG_PARMxR,
        fixedToBit (
            32,
            (int32_t)((
                putBITp (
                    16, mGENERATExFORCE_ADDRESSxTR,
                    getBIT (8,
                            mSYSARG1 + 1 * COREHALFWORD (mGENERATExINTCALL))),
                putBITp (16, mGENERATExFORCE_ADDRESSxOP,
                         getBIT (16, mGENERATExGEN_CLASS0xSHAPING_CALLxOP)),
                putBITp (1, mGENERATExFORCE_ADDRESSxFLAG,
                         fixedToBit (32, (int32_t)(1))),
                GENERATExFORCE_ADDRESS (0)))));
    GENERATExSTACK_REG_PARM (0);
  }
  // CALL FORCE_ADDRESS(SYSARG0(INTCALL), RESULT); (11504)
  {
    putBITp (16, mGENERATExFORCE_ADDRESSxTR,
             getBIT (8, mSYSARG0 + 1 * COREHALFWORD (mGENERATExINTCALL)));
    putBITp (16, mGENERATExFORCE_ADDRESSxOP, getBIT (16, mRESULT));
    GENERATExFORCE_ADDRESS (0);
  }
  // COPY(0) = GET_ARRAYSIZE(OP); (11505)
  {
    descriptor_t *bitRHS
        = (putBITp (16, mGENERATExGEN_CLASS0xGET_ARRAYSIZExOP,
                    getBIT (16, mGENERATExGEN_CLASS0xSHAPING_CALLxOP)),
           GENERATExGEN_CLASS0xGET_ARRAYSIZE (0));
    putBIT (16, getFIXED (mIND_STACK) + 73 * (0) + 26 + 2 * (0), bitRHS);
    bitRHS->inUse = 0;
  }
  // CALL SET_AREA(OP); (11506)
  {
    putBITp (16, mGENERATExSET_AREAxPTR,
             getBIT (16, mGENERATExGEN_CLASS0xSHAPING_CALLxOP));
    GENERATExSET_AREA (0);
  }
  // IF CHAROP THEN (11507)
  if (1 & (bitToFixed (getBIT (1, mGENERATExGEN_CLASS0xSHAPING_CALLxCHAROP))))
    // DO; (11508)
    {
    rs1:;
      // IF AREASAVE > 0 THEN (11509)
      if (1 & (xGT (getFIXED (mAREASAVE), 0)))
        // CALL FORCE_NUM(FIXARG3, AREASAVE); (11510)
        {
          putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG3));
          putFIXED (mGENERATExFORCE_NUMxNUM, getFIXED (mAREASAVE));
          GENERATExFORCE_NUM (0);
        }
      // ELSE (11511)
      else
        // DO; (11512)
        {
        rs1s1:;
          // CALL CHECKPOINT_REG(FIXARG3); (11513)
          {
            putBITp (16, mGENERATExCHECKPOINT_REGxR, getBIT (8, mFIXARG3));
            GENERATExCHECKPOINT_REG (0);
          }
          // SIZOP = SET_ARRAY_SIZE(-AREASAVE, 2); (11514)
          {
            descriptor_t *bitRHS
                = (putBITp (16, mGENERATExSET_ARRAY_SIZExOP,
                            fixedToBit (
                                32, (int32_t)(xminus (getFIXED (mAREASAVE))))),
                   putBITp (16, mGENERATExSET_ARRAY_SIZExCON,
                            fixedToBit (32, (int32_t)(2))),
                   GENERATExSET_ARRAY_SIZE (0));
            putBIT (16, mGENERATExGEN_CLASS0xSHAPING_CALLxSIZOP, bitRHS);
            bitRHS->inUse = 0;
          }
          // CALL CHECK_ADDR_NEST(FIXARG3, SIZOP); (11515)
          {
            putBITp (16, mGENERATExCHECK_ADDR_NESTxTR, getBIT (8, mFIXARG3));
            putBITp (16, mGENERATExCHECK_ADDR_NESTxOP,
                     getBIT (16, mGENERATExGEN_CLASS0xSHAPING_CALLxSIZOP));
            GENERATExCHECK_ADDR_NEST (0);
          }
          // CALL EMITOP(L, FIXARG3, SIZOP); (11516)
          {
            putBITp (16, mGENERATExEMITOPxINST, getBIT (8, mL));
            putBITp (16, mGENERATExEMITOPxXREG, getBIT (8, mFIXARG3));
            putBITp (16, mGENERATExEMITOPxOP,
                     getBIT (16, mGENERATExGEN_CLASS0xSHAPING_CALLxSIZOP));
            GENERATExEMITOP (0);
          }
          // CALL RETURN_STACK_ENTRY(SIZOP); (11517)
          {
            putBITp (16, mGENERATExRETURN_STACK_ENTRYxP,
                     getBIT (16, mGENERATExGEN_CLASS0xSHAPING_CALLxSIZOP));
            GENERATExRETURN_STACK_ENTRY (0);
          }
        es1s1:;
        } // End of DO block
      // AREASAVE = 1; (11518)
      {
        int32_t numberRHS = (int32_t)(1);
        putFIXED (mAREASAVE, numberRHS);
      }
      // SF_FLAG = OPMODE(OPTYPE)-1; (11519)
      {
        int32_t numberRHS = (int32_t)(xsubtract (
            BYTE0 (mOPMODE + 1 * COREHALFWORD (mOPTYPE)), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mGENERATExGEN_CLASS0xSHAPING_CALLxSF_FLAG, bitRHS);
        bitRHS->inUse = 0;
      }
    es1:;
    } // End of DO block
  // ELSE (11520)
  else
    // DO; (11521)
    {
    rs2:;
      // SF_FLAG = SHL(OPMODE(TYPE(OP))-1, 8) + OPMODE(OPTYPE)-1; (11522)
      {
        int32_t numberRHS = (int32_t)(xsubtract (
            xadd (
                SHL (
                    xsubtract (
                        BYTE0 (
                            mOPMODE
                            + 1
                                  * COREHALFWORD (
                                      getFIXED (mIND_STACK)
                                      + 73
                                            * (COREHALFWORD (
                                                mGENERATExGEN_CLASS0xSHAPING_CALLxOP))
                                      + 50 + 2 * (0))),
                        1),
                    8),
                BYTE0 (mOPMODE + 1 * COREHALFWORD (mOPTYPE))),
            1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mGENERATExGEN_CLASS0xSHAPING_CALLxSF_FLAG, bitRHS);
        bitRHS->inUse = 0;
      }
    es2:;
    } // End of DO block
  // CALL FORCE_NUM(FIXARG2, SF_FLAG); (11523)
  {
    putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG2));
    putFIXED (mGENERATExFORCE_NUMxNUM,
              COREHALFWORD (mGENERATExGEN_CLASS0xSHAPING_CALLxSF_FLAG));
    GENERATExFORCE_NUM (0);
  }
  // CALL FORCE_NUM(FIXARG1, COPY(0) * AREASAVE); (11524)
  {
    putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG1));
    putFIXED (mGENERATExFORCE_NUMxNUM,
              xmultiply (COREHALFWORD (getFIXED (mIND_STACK) + 73 * (0) + 26
                                       + 2 * (0)),
                         getFIXED (mAREASAVE)));
    GENERATExFORCE_NUM (0);
  }
  // CALL DROP_PARM_STACK; (11525)
  GENERATExDROP_PARM_STACK (0);
  // CALL GENLIBCALL(NAME(CHAROP)); (11526)
  {
    putCHARACTERp (
        mGENERATExGENLIBCALLxNAME,
        getCHARACTER (mGENERATExGEN_CLASS0xSHAPING_CALLxNAME
                      + 4 * BYTE0 (mGENERATExGEN_CLASS0xSHAPING_CALLxCHAROP)));
    GENERATExGENLIBCALL (0);
  }
  // AREA = COPY(0) * AREASAVE * SF_DISP; (11527)
  {
    int32_t numberRHS = (int32_t)(xmultiply (
        xmultiply (
            COREHALFWORD (getFIXED (mIND_STACK) + 73 * (0) + 26 + 2 * (0)),
            getFIXED (mAREASAVE)),
        COREHALFWORD (mSF_DISP)));
    putFIXED (mAREA, numberRHS);
  }
  // LASTRESULT = 0; (11528)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mLASTRESULT, bitRHS);
    bitRHS->inUse = 0;
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
