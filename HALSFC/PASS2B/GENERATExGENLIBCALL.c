/*
  File GENERATExGENLIBCALL.c generated by XCOM-I, 2024-08-09 12:41:32.
*/

#include "runtimeC.h"

int32_t
GENERATExGENLIBCALL (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GENERATExGENLIBCALL");
  // INT = INTRINSIC(NAME); (6040)
  {
    descriptor_t *bitRHS
        = (putCHARACTERp (mINTRINSICxNAME,
                          getCHARACTER (mGENERATExGENLIBCALLxNAME)),
           INTRINSIC (0));
    putBIT (1, mGENERATExGENLIBCALLxINT, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF INT THEN (6041)
  if (1 & (bitToFixed (getBIT (1, mGENERATExGENLIBCALLxINT))))
    // MAXARG = FIXARG3; (6042)
    {
      descriptor_t *bitRHS = getBIT (8, mFIXARG3);
      putBIT (16, mGENERATExGENLIBCALLxMAXARG, bitRHS);
      bitRHS->inUse = 0;
    }
  // ELSE (6043)
  else
    // MAXARG = FIXARG1; (6044)
    {
      descriptor_t *bitRHS = getBIT (8, mFIXARG1);
      putBIT (16, mGENERATExGENLIBCALLxMAXARG, bitRHS);
      bitRHS->inUse = 0;
    }
  // IF LIB_POINTER = 0 | OLD_LINKAGE THEN (6045)
  if (1 & (xOR (xEQ (COREHALFWORD (mLIB_POINTER), 0), BYTE0 (mOLD_LINKAGE))))
    // CALL SAVE_REGS(MAXARG, 3); (6046)
    {
      putBITp (16, mGENERATExSAVE_REGSxN1,
               getBIT (16, mGENERATExGENLIBCALLxMAXARG));
      putBITp (1, mGENERATExSAVE_REGSxFLT, fixedToBit (32, (int32_t)(3)));
      GENERATExSAVE_REGS (0);
    }
  // ELSE (6047)
  else
    // DO; (6048)
    {
    rs1:;
      // REGBITS = LIB_REGS(ABS(LIB_POINTER)); (6049)
      {
        descriptor_t *bitRHS
            = getBIT (16, mLIB_REGS + 2 * ABS (COREHALFWORD (mLIB_POINTER)));
        putBIT (16, mGENERATExGENLIBCALLxREGBITS, bitRHS);
        bitRHS->inUse = 0;
      }
      // DO I = 1 TO 15; (6050)
      {
        int32_t from77, to77, by77;
        from77 = 1;
        to77 = 15;
        by77 = 1;
        for (putBIT (16, mGENERATExGENLIBCALLxI, fixedToBit (16, from77));
             bitToFixed (getBIT (16, mGENERATExGENLIBCALLxI)) <= to77;
             putBIT (16, mGENERATExGENLIBCALLxI,
                     fixedToBit (
                         16, bitToFixed (getBIT (16, mGENERATExGENLIBCALLxI))
                                 + by77)))
          {
            // IF (POW_OF_2(I) & REGBITS) ~= 0 THEN (6051)
            if (1
                & (xNEQ (xAND (SHL (1, COREHALFWORD (mGENERATExGENLIBCALLxI)),
                               COREHALFWORD (mGENERATExGENLIBCALLxREGBITS)),
                         0)))
              // CALL CHECKPOINT_REG(I); (6052)
              {
                putBITp (16, mGENERATExCHECKPOINT_REGxR,
                         getBIT (16, mGENERATExGENLIBCALLxI));
                GENERATExCHECKPOINT_REG (0);
              }
          }
      } // End of DO for-loop block
    es1:;
    } // End of DO block
  // CALL EMIT_CALL(ENTER_CALL(NAME), INT); (6053)
  {
    putBITp (16, mGENERATExEMIT_CALLxESID,
             (putCHARACTERp (mGENERATExENTER_CALLxNAME,
                             getCHARACTER (mGENERATExGENLIBCALLxNAME)),
              GENERATExENTER_CALL (0)));
    putBITp (1, mGENERATExEMIT_CALLxINTSIC,
             getBIT (1, mGENERATExGENLIBCALLxINT));
    GENERATExEMIT_CALL (0);
  }
  // IF LIB_POINTER = 0 | OLD_LINKAGE THEN (6054)
  if (1 & (xOR (xEQ (COREHALFWORD (mLIB_POINTER), 0), BYTE0 (mOLD_LINKAGE))))
    // CALL CLEAR_CALL_REGS(MAXARG, INT); (6055)
    {
      putBITp (16, mGENERATExCLEAR_CALL_REGSxN1,
               getBIT (16, mGENERATExGENLIBCALLxMAXARG));
      putBITp (1, mGENERATExCLEAR_CALL_REGSxINT,
               getBIT (1, mGENERATExGENLIBCALLxINT));
      GENERATExCLEAR_CALL_REGS (0);
    }
  // ELSE (6056)
  else
    // DO I = 1 TO 15; (6057)
    {
      int32_t from78, to78, by78;
      from78 = 1;
      to78 = 15;
      by78 = 1;
      for (putBIT (16, mGENERATExGENLIBCALLxI, fixedToBit (16, from78));
           bitToFixed (getBIT (16, mGENERATExGENLIBCALLxI)) <= to78; putBIT (
               16, mGENERATExGENLIBCALLxI,
               fixedToBit (16, bitToFixed (getBIT (16, mGENERATExGENLIBCALLxI))
                                   + by78)))
        {
          // IF (POW_OF_2(I) & REGBITS) ~= 0 THEN (6058)
          if (1
              & (xNEQ (xAND (SHL (1, COREHALFWORD (mGENERATExGENLIBCALLxI)),
                             COREHALFWORD (mGENERATExGENLIBCALLxREGBITS)),
                       0)))
            // USAGE(I) = 0; (6059)
            {
              int32_t numberRHS = (int32_t)(0);
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (16, mUSAGE + 2 * (COREHALFWORD (mGENERATExGENLIBCALLxI)),
                      bitRHS);
              bitRHS->inUse = 0;
            }
        }
    } // End of DO for-loop block
  // D_RTL_SETUP = FALSE; (6060)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mD_RTL_SETUP, bitRHS);
    bitRHS->inUse = 0;
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
