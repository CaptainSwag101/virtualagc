/*
  File ENTER_XREF.c generated by XCOM-I, 2024-08-09 12:40:41.
*/

#include "runtimeC.h"

descriptor_t *
ENTER_XREF (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (descriptor_t *)0;
    }
  reentryGuard = guardReentry (reentryGuard, "ENTER_XREF");
  // IF ((XREF(ROOT)&XREF_MASK)=STMT_NUM) & (((XREF(ROOT) &  57344) ~= 0) |
  // NO_NEW_XREF) THEN (1247)
  if (1
      & (xAND (xEQ (xAND (getFIXED (getFIXED (mCROSS_REF)
                                    + 4 * (getFIXED (mENTER_XREFxROOT)) + 0
                                    + 4 * (0)),
                          getFIXED (mXREF_MASK)),
                    getFIXED (mCOMM + 4 * 3)),
               xOR (xNEQ (xAND (getFIXED (getFIXED (mCROSS_REF)
                                          + 4 * (getFIXED (mENTER_XREFxROOT))
                                          + 0 + 4 * (0)),
                                57344),
                          0),
                    BYTE0 (mNO_NEW_XREF)))))
    // XREF(ROOT)=XREF(ROOT)|FLAG; (1248)
    {
      int32_t numberRHS = (int32_t)(xOR (
          getFIXED (getFIXED (mCROSS_REF) + 4 * (getFIXED (mENTER_XREFxROOT))
                    + 0 + 4 * (0)),
          getFIXED (mENTER_XREFxFLAG)));
      putFIXED (getFIXED (mCROSS_REF) + 4 * (getFIXED (mENTER_XREFxROOT)) + 0
                    + 4 * (0),
                numberRHS);
    }
  // ELSE (1249)
  else
    // DO; (1250)
    {
    rs1:;
      // DO ; (1251)
      {
      rs1s1:;
        // IF COREWORD ( ADDR ( CROSS_REF ) + 12 ) >= COREWORD ( ADDR (
        // CROSS_REF ) + 8 ) THEN (1252)
        if (1
            & (xGE (
                COREWORD (xadd (ADDR ("CROSS_REF", 0x80000000, NULL, 0), 12)),
                COREWORD (xadd (ADDR ("CROSS_REF", 0x80000000, NULL, 0), 8)))))
          // CALL _NEEDMORE_SPACE ( ADDR ( CROSS_REF )  ) ; (1253)
          {
            putFIXED (m_NEEDMORE_SPACExDOPE,
                      ADDR ("CROSS_REF", 0x80000000, NULL, 0));
            _NEEDMORE_SPACE (0);
          }
        // COREWORD ( ADDR ( CROSS_REF ) + 12 ) = COREWORD ( ADDR ( CROSS_REF )
        // + 12 ) + 1 ; (1254)
        {
          int32_t numberRHS = (int32_t)(xadd (
              COREWORD (xadd (ADDR ("CROSS_REF", 0x80000000, NULL, 0), 12)),
              1));
          COREWORD2 (xadd (ADDR ("CROSS_REF", 0x80000000, NULL, 0), 12),
                     numberRHS);
        }
      es1s1:;
      } // End of DO block
      // XREF_INDEX=XREF_INDEX+1; (1255)
      {
        int32_t numberRHS = (int32_t)(xadd (getFIXED (mCOMM + 4 * 8), 1));
        putFIXED (mCOMM + 4 * (8), numberRHS);
      }
      // XREF(0)=SHL(XREF_INDEX,16); (1256)
      {
        int32_t numberRHS = (int32_t)(SHL (getFIXED (mCOMM + 4 * 8), 16));
        putFIXED (getFIXED (mCROSS_REF) + 4 * (0) + 0 + 4 * (0), numberRHS);
      }
      // XREF(XREF_INDEX)=(XREF(ROOT)& 4294901760)|STMT_NUM|FLAG; (1257)
      {
        int32_t numberRHS = (int32_t)(xOR (
            xOR (xAND (getFIXED (getFIXED (mCROSS_REF)
                                 + 4 * (getFIXED (mENTER_XREFxROOT)) + 0
                                 + 4 * (0)),
                       4294901760),
                 getFIXED (mCOMM + 4 * 3)),
            getFIXED (mENTER_XREFxFLAG)));
        putFIXED (getFIXED (mCROSS_REF) + 4 * (getFIXED (mCOMM + 4 * 8)) + 0
                      + 4 * (0),
                  numberRHS);
      }
      // XREF(ROOT)=(XREF(ROOT)& 65535)|XREF(0); (1258)
      {
        int32_t numberRHS = (int32_t)(xOR (
            xAND (getFIXED (getFIXED (mCROSS_REF)
                            + 4 * (getFIXED (mENTER_XREFxROOT)) + 0 + 4 * (0)),
                  65535),
            getFIXED (getFIXED (mCROSS_REF) + 4 * (0) + 0 + 4 * (0))));
        putFIXED (getFIXED (mCROSS_REF) + 4 * (getFIXED (mENTER_XREFxROOT)) + 0
                      + 4 * (0),
                  numberRHS);
      }
      // ROOT=XREF_INDEX; (1259)
      {
        int32_t numberRHS = (int32_t)(getFIXED (mCOMM + 4 * 8));
        putFIXED (mENTER_XREFxROOT, numberRHS);
      }
    es1:;
    } // End of DO block
  // RETURN ROOT; (1260)
  {
    reentryGuard = 0;
    return fixedToBit (32, (int32_t)(getFIXED (mENTER_XREFxROOT)));
  }
}
