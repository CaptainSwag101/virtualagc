/*
  File PASS1xCLASS_0xCLASS_03.c generated by XCOM-I, 2024-08-08 04:32:08.
*/

#include "runtimeC.h"

int32_t
PASS1xCLASS_0xCLASS_03 (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "PASS1xCLASS_0xCLASS_03");
  // DO CASE OPCODE_CASE_DECODE(HALRATOR &  15); (2226)
  {
  rs1:
    switch (BYTE0 (mPASS1xCLASS_0xCLASS_03xOPCODE_CASE_DECODE
                   + 1 * xAND (COREHALFWORD (mHALRATOR), 15)))
      {
      case 0:
          // ; (2228)
          ;
        break;
      case 1:
        // CALL POP_BLOCK_FRAME; (2229)
        PASS1xPOP_BLOCK_FRAME (0);
        break;
      case 2:
        // DO; (2230)
        {
        rs1s1:;
          // IF FRAME_TYPE(STACK_PTR) ~= BLOCK_TYPE THEN (2230)
          if (1
              & (xNEQ (BYTE0 (getFIXED (mSTACK_FRAME)
                              + 32 * (COREHALFWORD (mSTACK_PTR)) + 30
                              + 1 * (0)),
                       1)))
            // CALL STACK_ERROR('EDCL', FRAME_TYPE(STACK_PTR), CCURRENT);
            // (2231)
            {
              putCHARACTERp (mPASS1xSTACK_ERRORxHALMAT_TYPE,
                             cToDescriptor (NULL, "EDCL"));
              putBITp (16, mPASS1xSTACK_ERRORxFRM_TYPE,
                       getBIT (8, getFIXED (mSTACK_FRAME)
                                      + 32 * (COREHALFWORD (mSTACK_PTR)) + 30
                                      + 1 * (0)));
              putCHARACTERp (mPASS1xSTACK_ERRORxWHICH_FRAME,
                             getCHARACTER (mCCURRENT));
              PASS1xSTACK_ERROR (0);
            }
          // CALL ADD_TO_VAC_BOUNDS(FRAME_START(STACK_PTR), HALMAT_PTR); (2232)
          {
            putBITp (16, mPASS1xADD_TO_VAC_BOUNDSxSTART,
                     getBIT (16, getFIXED (mSTACK_FRAME)
                                     + 32 * (COREHALFWORD (mSTACK_PTR)) + 4
                                     + 2 * (0)));
            putBITp (16, mPASS1xADD_TO_VAC_BOUNDSxFINISH,
                     getBIT (16, mHALMAT_PTR));
            PASS1xADD_TO_VAC_BOUNDS (0);
          }
        es1s1:;
        } // End of DO block
        break;
      case 3:
        // DO; (2234)
        {
        rs1s2:;
          // TEMP_PTR = STACK_PTR; (2234)
          {
            descriptor_t *bitRHS = getBIT (16, mSTACK_PTR);
            putBIT (16, mPASS1xCLASS_0xCLASS_03xTEMP_PTR, bitRHS);
            bitRHS->inUse = 0;
          }
          // DO WHILE TRUE; (2235)
          while (1 & (1))
            {
              // IF FRAME_TYPE(TEMP_PTR) = CASE_TYPE THEN (2236)
              if (1
                  & (xEQ (BYTE0 (getFIXED (mSTACK_FRAME)
                                 + 32
                                       * (COREHALFWORD (
                                           mPASS1xCLASS_0xCLASS_03xTEMP_PTR))
                                 + 30 + 1 * (0)),
                          3)))
                // GO TO EXIT_SEARCH_LOOP; (2237)
                goto EXIT_SEARCH_LOOP;
              // IF FRAME_TYPE(TEMP_PTR) = BLOCK_TYPE THEN (2238)
              if (1
                  & (xEQ (BYTE0 (getFIXED (mSTACK_FRAME)
                                 + 32
                                       * (COREHALFWORD (
                                           mPASS1xCLASS_0xCLASS_03xTEMP_PTR))
                                 + 30 + 1 * (0)),
                          1)))
                // RETURN; (2239)
                {
                  reentryGuard = 0;
                  return 0;
                }
              // TEMP_PTR = TEMP_PTR - 1; (2240)
              {
                int32_t numberRHS = (int32_t)(xsubtract (
                    COREHALFWORD (mPASS1xCLASS_0xCLASS_03xTEMP_PTR), 1));
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mPASS1xCLASS_0xCLASS_03xTEMP_PTR, bitRHS);
                bitRHS->inUse = 0;
              }
            } // End of DO WHILE block
        // EXIT_SEARCH_LOOP: (2241)
        EXIT_SEARCH_LOOP:
          // IF (FRAME_FLAGS(TEMP_PTR) & ZAP_FLAG) ~= 0 THEN (2242)
          if (1
              & (xNEQ (
                  xAND (BYTE0 (getFIXED (mSTACK_FRAME)
                               + 32
                                     * (COREHALFWORD (
                                         mPASS1xCLASS_0xCLASS_03xTEMP_PTR))
                               + 31 + 1 * (0)),
                        1),
                  0)))
            // FRAME_FLAGS(TEMP_PTR) = (FRAME_FLAGS(TEMP_PTR) & ~ZAP_FLAG) |
            // FLUSH_FLAG; (2243)
            {
              int32_t numberRHS = (int32_t)(xOR (
                  xAND (BYTE0 (getFIXED (mSTACK_FRAME)
                               + 32
                                     * (COREHALFWORD (
                                         mPASS1xCLASS_0xCLASS_03xTEMP_PTR))
                               + 31 + 1 * (0)),
                        4294967294),
                  4));
              putBIT (
                  8,
                  getFIXED (mSTACK_FRAME)
                      + 32 * (COREHALFWORD (mPASS1xCLASS_0xCLASS_03xTEMP_PTR))
                      + 31 + 1 * (0),
                  fixedToBit (8, numberRHS));
            }
        es1s2:;
        } // End of DO block
        break;
      }
  } // End of DO CASE block
  {
    reentryGuard = 0;
    return 0;
  }
}
