/*
  File STREAMxCHOP.c generated by XCOM-I, 2024-08-09 12:38:15.
*/

#include "runtimeC.h"

int32_t
STREAMxCHOP (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "STREAMxCHOP");
  // INDEX = INDEX + 1; (4634)
  {
    int32_t numberRHS = (int32_t)(xadd (COREHALFWORD (mSTREAMxINDEX), 1));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mSTREAMxINDEX, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF INDEX > TEXT_LIMIT THEN (4635)
  if (1 & (xGT (COREHALFWORD (mSTREAMxINDEX), COREHALFWORD (mTEXT_LIMIT))))
    // IF ~INCLUDING | ~TEMPLATE_FLAG |  (INCLUDING & TEMPLATE_FLAG &  (INDEX >
    // (TPL_LRECL-1))) THEN (4636)
    if (1
        & (xOR (xOR (xNOT (BYTE0 (mINCLUDING)),
                     xNOT (BYTE0 (mSTREAMxTEMPLATE_FLAG))),
                xAND (xAND (BYTE0 (mINCLUDING), BYTE0 (mSTREAMxTEMPLATE_FLAG)),
                      xGT (COREHALFWORD (mSTREAMxINDEX),
                           xsubtract (COREHALFWORD (mTPL_LRECL), 1))))))
      // IF (CARD_TYPE(BYTE(CURRENT_CARD)) >= 4) | INCLUDE_END THEN (4637)
      if (1
          & (xOR (
              xGE (COREHALFWORD (mCARD_TYPE
                                 + 2 * BYTE1 (getCHARACTER (mCURRENT_CARD))),
                   4),
              BYTE0 (mINCLUDE_END))))
        // GROUP_NEEDED = TRUE; (4638)
        {
          int32_t numberRHS = (int32_t)(1);
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (1, mGROUP_NEEDED, bitRHS);
          bitRHS->inUse = 0;
        }
      // ELSE (4639)
      else
        // DO; (4640)
        {
        rs1:;
          // CALL GET_GROUP; (4641)
          STREAMxGET_GROUP (0);
          // INDEX = 1; (4642)
          {
            int32_t numberRHS = (int32_t)(1);
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mSTREAMxINDEX, bitRHS);
            bitRHS->inUse = 0;
          }
        es1:;
        } // End of DO block
  {
    reentryGuard = 0;
    return 0;
  }
}
