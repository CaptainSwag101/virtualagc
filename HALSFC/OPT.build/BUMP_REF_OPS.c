/*
  File BUMP_REF_OPS.c generated by XCOM-I, 2024-08-09 12:38:53.
*/

#include "runtimeC.h"

int32_t
BUMP_REF_OPS (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "BUMP_REF_OPS");
  // IF C_TRACE THEN (2403)
  if (1 & (bitToFixed (getBIT (8, mC_TRACE))))
    // OUTPUT = 'BUMP_REF_OPS: ' || PTR; (2404)
    {
      descriptor_t *stringRHS;
      stringRHS = xsCAT (cToDescriptor (NULL, "BUMP_REF_OPS: "),
                         bitToCharacter (getBIT (16, mBUMP_REF_OPSxPTR)));
      OUTPUT (0, stringRHS);
      stringRHS->inUse = 0;
    }
  // IF ARRAYNESS_CONFLICT THEN (2405)
  if (1 & (bitToFixed (getBIT (8, mARRAYNESS_CONFLICT))))
    // RETURN; (2406)
    {
      reentryGuard = 0;
      return 0;
    }
  // IF ASSIGN_FLAG THEN (2407)
  if (1 & (bitToFixed (getBIT (8, mBUMP_REF_OPSxASSIGN_FLAG))))
    // DO; (2408)
    {
    rs1:;
      // DO FOR K = 1 TO CR_INX; (2409)
      {
        int32_t from55, to55, by55;
        from55 = 1;
        to55 = bitToFixed (getBIT (16, mCR_INX));
        by55 = 1;
        for (putBIT (16, mBUMP_REF_OPSxK, fixedToBit (16, from55));
             bitToFixed (getBIT (16, mBUMP_REF_OPSxK)) <= to55;
             putBIT (16, mBUMP_REF_OPSxK,
                     fixedToBit (16, bitToFixed (getBIT (16, mBUMP_REF_OPSxK))
                                         + by55)))
          {
            // IF POP_COMPARE(PTR,CONF_REFERENCES(K)) THEN (2410)
            if (1
                & (bitToFixed ((
                    putBITp (16, mPOP_COMPARExPTR1,
                             getBIT (16, mBUMP_REF_OPSxPTR)),
                    putBITp (
                        16, mPOP_COMPARExPTR2,
                        getBIT (16, mCONF_REFERENCES
                                        + 2 * COREHALFWORD (mBUMP_REF_OPSxK))),
                    POP_COMPARE (0)))))
              // DO; (2411)
              {
              rs1s1s1:;
                // IF C_TRACE THEN (2412)
                if (1 & (bitToFixed (getBIT (8, mC_TRACE))))
                  // OUTPUT = 'ARRAYNESS_CONFLICT: '||PTR; (2413)
                  {
                    descriptor_t *stringRHS;
                    stringRHS = xsCAT (
                        cToDescriptor (NULL, "ARRAYNESS_CONFLICT: "),
                        bitToCharacter (getBIT (16, mBUMP_REF_OPSxPTR)));
                    OUTPUT (0, stringRHS);
                    stringRHS->inUse = 0;
                  }
                // ARRAYNESS_CONFLICT = TRUE; (2414)
                {
                  int32_t numberRHS = (int32_t)(1);
                  descriptor_t *bitRHS;
                  bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                  putBIT (8, mARRAYNESS_CONFLICT, bitRHS);
                  bitRHS->inUse = 0;
                }
                // RETURN; (2415)
                {
                  reentryGuard = 0;
                  return 0;
                }
              es1s1s1:;
              } // End of DO block
          }
      } // End of DO for-loop block
      // CA_INX = CA_INX + 1; (2416)
      {
        int32_t numberRHS = (int32_t)(xadd (COREHALFWORD (mCA_INX), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mCA_INX, bitRHS);
        bitRHS->inUse = 0;
      }
      // CONF_ASSIGNS(CA_INX) = PTR ; (2417)
      {
        descriptor_t *bitRHS = getBIT (16, mBUMP_REF_OPSxPTR);
        putBIT (16, mCONF_ASSIGNS + 2 * (COREHALFWORD (mCA_INX)), bitRHS);
        bitRHS->inUse = 0;
      }
    es1:;
    } // End of DO block
  // ELSE (2418)
  else
    // DO; (2419)
    {
    rs2:;
      // DO FOR K = 1 TO CA_INX; (2420)
      {
        int32_t from56, to56, by56;
        from56 = 1;
        to56 = bitToFixed (getBIT (16, mCA_INX));
        by56 = 1;
        for (putBIT (16, mBUMP_REF_OPSxK, fixedToBit (16, from56));
             bitToFixed (getBIT (16, mBUMP_REF_OPSxK)) <= to56;
             putBIT (16, mBUMP_REF_OPSxK,
                     fixedToBit (16, bitToFixed (getBIT (16, mBUMP_REF_OPSxK))
                                         + by56)))
          {
            // IF POP_COMPARE(PTR,CONF_ASSIGNS(K)) THEN (2421)
            if (1
                & (bitToFixed ((
                    putBITp (16, mPOP_COMPARExPTR1,
                             getBIT (16, mBUMP_REF_OPSxPTR)),
                    putBITp (
                        16, mPOP_COMPARExPTR2,
                        getBIT (16, mCONF_ASSIGNS
                                        + 2 * COREHALFWORD (mBUMP_REF_OPSxK))),
                    POP_COMPARE (0)))))
              // DO; (2422)
              {
              rs2s1s1:;
                // IF C_TRACE THEN (2423)
                if (1 & (bitToFixed (getBIT (8, mC_TRACE))))
                  // OUTPUT = 'ARRAYNESS_CONFLICT: '||PTR; (2424)
                  {
                    descriptor_t *stringRHS;
                    stringRHS = xsCAT (
                        cToDescriptor (NULL, "ARRAYNESS_CONFLICT: "),
                        bitToCharacter (getBIT (16, mBUMP_REF_OPSxPTR)));
                    OUTPUT (0, stringRHS);
                    stringRHS->inUse = 0;
                  }
                // ARRAYNESS_CONFLICT = TRUE; (2425)
                {
                  int32_t numberRHS = (int32_t)(1);
                  descriptor_t *bitRHS;
                  bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                  putBIT (8, mARRAYNESS_CONFLICT, bitRHS);
                  bitRHS->inUse = 0;
                }
                // RETURN; (2426)
                {
                  reentryGuard = 0;
                  return 0;
                }
              es2s1s1:;
              } // End of DO block
          }
      } // End of DO for-loop block
      // CR_INX = CR_INX + 1; (2427)
      {
        int32_t numberRHS = (int32_t)(xadd (COREHALFWORD (mCR_INX), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mCR_INX, bitRHS);
        bitRHS->inUse = 0;
      }
      // CONF_REFERENCES(CR_INX) = PTR; (2428)
      {
        descriptor_t *bitRHS = getBIT (16, mBUMP_REF_OPSxPTR);
        putBIT (16, mCONF_REFERENCES + 2 * (COREHALFWORD (mCR_INX)), bitRHS);
        bitRHS->inUse = 0;
      }
    es2:;
    } // End of DO block
  {
    reentryGuard = 0;
    return 0;
  }
}
