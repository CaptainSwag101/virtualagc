/*
  File PUSH_LOOP_STACKS.c generated by XCOM-I, 2024-08-09 12:38:53.
*/

#include "runtimeC.h"

int32_t
PUSH_LOOP_STACKS (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "PUSH_LOOP_STACKS");
  // IF C_TRACE THEN (2468)
  if (1 & (bitToFixed (getBIT (8, mC_TRACE))))
    // OUTPUT = 'PUSH_LOOP_STACKS(' ||PTR||','||VM||'):'; (2469)
    {
      descriptor_t *stringRHS;
      stringRHS = xsCAT (
          xsCAT (xsCAT (xsCAT (cToDescriptor (NULL, "PUSH_LOOP_STACKS("),
                               bitToCharacter (
                                   getBIT (16, mPUSH_LOOP_STACKSxPTR))),
                        cToDescriptor (NULL, ",")),
                 bitToCharacter (getBIT (8, mPUSH_LOOP_STACKSxVM))),
          cToDescriptor (NULL, "):"));
      OUTPUT (0, stringRHS);
      stringRHS->inUse = 0;
    }
  // IF STACKED_VDLPS >= 2 AND VM THEN (2470)
  if (1
      & (xAND (xGE (COREHALFWORD (mSTACKED_VDLPS), 2),
               BYTE0 (mPUSH_LOOP_STACKSxVM))))
    // ST = 1; (2471)
    {
      int32_t numberRHS = (int32_t)(1);
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (16, mST, bitRHS);
      bitRHS->inUse = 0;
    }
  // ELSE (2472)
  else
    // ST = 3; (2473)
    {
      int32_t numberRHS = (int32_t)(3);
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (16, mST, bitRHS);
      bitRHS->inUse = 0;
    }
  // IF VM THEN (2474)
  if (1 & (bitToFixed (getBIT (8, mPUSH_LOOP_STACKSxVM))))
    // DO; (2475)
    {
    rs1:;
      // STACKED_VDLPS = STACKED_VDLPS + 1; (2476)
      {
        int32_t numberRHS = (int32_t)(xadd (COREHALFWORD (mSTACKED_VDLPS), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mSTACKED_VDLPS, bitRHS);
        bitRHS->inUse = 0;
      }
      // IF STACKED_VDLPS > 2 THEN (2477)
      if (1 & (xGT (COREHALFWORD (mSTACKED_VDLPS), 2)))
        // STACKED_VDLPS = 2; (2478)
        {
          int32_t numberRHS = (int32_t)(2);
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (16, mSTACKED_VDLPS, bitRHS);
          bitRHS->inUse = 0;
        }
    es1:;
    } // End of DO block
  // ELSE (2479)
  else
    // STACKED_VDLPS = 0; (2480)
    {
      int32_t numberRHS = (int32_t)(0);
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (16, mSTACKED_VDLPS, bitRHS);
      bitRHS->inUse = 0;
    }
  // DO WHILE ST >= 1; (2481)
  while (1 & (xGE (COREHALFWORD (mST), 1)))
    {
      // ST1 = ST-1; (2482)
      {
        int32_t numberRHS = (int32_t)(xsubtract (COREHALFWORD (mST), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mST1, bitRHS);
        bitRHS->inUse = 0;
      }
      // CALL MOVE_LOOP_STACK; (2483)
      MOVE_LOOP_STACK (0);
      // ST = ST -1; (2484)
      {
        int32_t numberRHS = (int32_t)(xsubtract (COREHALFWORD (mST), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mST, bitRHS);
        bitRHS->inUse = 0;
      }
    } // End of DO WHILE block
  // CALL BUMP_LOOPSTACK(SHL(PTR,16),VM); (2485)
  {
    putFIXED (mBUMP_LOOPSTACKxNODEWORD,
              SHL (COREHALFWORD (mPUSH_LOOP_STACKSxPTR), 16));
    putBITp (8, mBUMP_LOOPSTACKxVM, getBIT (8, mPUSH_LOOP_STACKSxVM));
    BUMP_LOOPSTACK (0);
  }
  // LOOP_HEAD = PTR; (2486)
  {
    descriptor_t *bitRHS = getBIT (16, mPUSH_LOOP_STACKSxPTR);
    putBIT (16, mLOOP_HEAD, bitRHS);
    bitRHS->inUse = 0;
  }
  // ADJACENT = CHECK_ADJACENT_LOOPS(PTR); (2487)
  {
    descriptor_t *bitRHS = (putBITp (16, mCHECK_ADJACENT_LOOPSxPTR,
                                     getBIT (16, mPUSH_LOOP_STACKSxPTR)),
                            CHECK_ADJACENT_LOOPS (0));
    putBIT (8, mADJACENT, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF ~ADJACENT THEN (2488)
  if (1 & (xNOT (BYTE0 (mADJACENT))))
    // IF (VM AND ~IN_AR) OR ~VM THEN (2489)
    if (1
        & (xOR (xAND (BYTE0 (mPUSH_LOOP_STACKSxVM), xNOT (BYTE0 (mIN_AR))),
                xNOT (BYTE0 (mPUSH_LOOP_STACKSxVM)))))
      // DO; (2490)
      {
      rs3:;
        // CALL INIT_ARCONFS; (2491)
        INIT_ARCONFS (0);
        // STRUC_TEMPL, REF_TO_STRUC = 0; (2492)
        {
          int32_t numberRHS = (int32_t)(0);
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (16, mSTRUC_TEMPL, bitRHS);
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (8, mREF_TO_STRUC, bitRHS);
          bitRHS->inUse = 0;
        }
      es3:;
      } // End of DO block
  // VM,REF_TO_DSUB,ASSIGN = 0; (2493)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mPUSH_LOOP_STACKSxVM, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mREF_TO_DSUB, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mASSIGN, bitRHS);
    bitRHS->inUse = 0;
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
