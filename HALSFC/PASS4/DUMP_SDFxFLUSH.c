/*
  File DUMP_SDFxFLUSH.c generated by XCOM-I, 2024-08-08 04:33:20.
*/

#include "runtimeC.h"

int32_t
DUMP_SDFxFLUSH (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "DUMP_SDFxFLUSH");
  // IF STMT_VARS & LENGTH(S)>0 THEN (2043)
  if (1
      & (xAND (COREHALFWORD (mDUMP_SDFxFLUSHxSTMT_VARS),
               xGT (LENGTH (getCHARACTER (mS)), 0))))
    // DO; (2044)
    {
    rs1:;
      // I = LENGTH(S); (2045)
      {
        int32_t numberRHS = (int32_t)(LENGTH (getCHARACTER (mS)));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mDUMP_SDFxFLUSHxI, bitRHS);
        bitRHS->inUse = 0;
      }
      // DO K = 1 TO LAST; (2046)
      {
        int32_t from36, to36, by36;
        from36 = 1;
        to36 = bitToFixed (getBIT (16, mDUMP_SDFxFLUSHxLAST));
        by36 = 1;
        for (putBIT (16, mDUMP_SDFxFLUSHxK, fixedToBit (16, from36));
             bitToFixed (getBIT (16, mDUMP_SDFxFLUSHxK)) <= to36; putBIT (
                 16, mDUMP_SDFxFLUSHxK,
                 fixedToBit (16, bitToFixed (getBIT (16, mDUMP_SDFxFLUSHxK))
                                     + by36)))
          {
            // I = I + LENGTH(S(K)); (2047)
            {
              int32_t numberRHS = (int32_t)(xadd (
                  COREHALFWORD (mDUMP_SDFxFLUSHxI),
                  LENGTH (getCHARACTER (
                      mS + 4 * COREHALFWORD (mDUMP_SDFxFLUSHxK)))));
              descriptor_t *bitRHS;
              bitRHS = fixedToBit (32, (int32_t)(numberRHS));
              putBIT (16, mDUMP_SDFxFLUSHxI, bitRHS);
              bitRHS->inUse = 0;
            }
          }
      } // End of DO for-loop block
      // IF I < LINELENGTH THEN (2048)
      if (1 & (xLT (COREHALFWORD (mDUMP_SDFxFLUSHxI), 131)))
        // DO; (2049)
        {
        rs1s2:;
          // STRING = ''; (2050)
          {
            descriptor_t *stringRHS;
            stringRHS = cToDescriptor (NULL, "");
            putCHARACTER (mDUMP_SDFxFLUSHxSTRING, stringRHS);
            stringRHS->inUse = 0;
          }
          // GO TO IT_FITS; (2051)
          goto IT_FITS;
        es1s2:;
        } // End of DO block
      // OUTPUT = S; (2052)
      {
        descriptor_t *stringRHS;
        stringRHS = getCHARACTER (mS);
        OUTPUT (0, stringRHS);
        stringRHS->inUse = 0;
      }
      // S = ''; (2053)
      {
        descriptor_t *stringRHS;
        stringRHS = cToDescriptor (NULL, "");
        putCHARACTER (mS, stringRHS);
        stringRHS->inUse = 0;
      }
      // J = 1; (2054)
      {
        int32_t numberRHS = (int32_t)(1);
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mDUMP_SDFxFLUSHxJ, bitRHS);
        bitRHS->inUse = 0;
      }
    es1:;
    } // End of DO block
  // STRING = X10; (2055)
  {
    descriptor_t *stringRHS;
    stringRHS = getCHARACTER (mX10);
    putCHARACTER (mDUMP_SDFxFLUSHxSTRING, stringRHS);
    stringRHS->inUse = 0;
  }
// IT_FITS: (2056)
IT_FITS:
  // DO WHILE J <= LAST; (2057)
  while (1
         & (xLE (COREHALFWORD (mDUMP_SDFxFLUSHxJ),
                 COREHALFWORD (mDUMP_SDFxFLUSHxLAST))))
    {
      // IF LENGTH(STRING) + LENGTH(S(J)) < LINELENGTH THEN (2058)
      if (1
          & (xLT (xadd (LENGTH (getCHARACTER (mDUMP_SDFxFLUSHxSTRING)),
                        LENGTH (getCHARACTER (
                            mS + 4 * COREHALFWORD (mDUMP_SDFxFLUSHxJ)))),
                  131)))
        // DO; (2059)
        {
        rs2s1:;
          // STRING = STRING || S(J); (2060)
          {
            descriptor_t *stringRHS;
            stringRHS = xsCAT (
                getCHARACTER (mDUMP_SDFxFLUSHxSTRING),
                getCHARACTER (mS + 4 * COREHALFWORD (mDUMP_SDFxFLUSHxJ)));
            putCHARACTER (mDUMP_SDFxFLUSHxSTRING, stringRHS);
            stringRHS->inUse = 0;
          }
          // S(J) = ''; (2061)
          {
            descriptor_t *stringRHS;
            stringRHS = cToDescriptor (NULL, "");
            putCHARACTER (mS + 4 * (COREHALFWORD (mDUMP_SDFxFLUSHxJ)),
                          stringRHS);
            stringRHS->inUse = 0;
          }
          // J = J + 1; (2062)
          {
            int32_t numberRHS
                = (int32_t)(xadd (COREHALFWORD (mDUMP_SDFxFLUSHxJ), 1));
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mDUMP_SDFxFLUSHxJ, bitRHS);
            bitRHS->inUse = 0;
          }
        es2s1:;
        } // End of DO block
      // ELSE (2063)
      else
        // DO; (2064)
        {
        rs2s2:;
          // I,K = LINELENGTH - LENGTH(STRING) - 1; (2065)
          {
            int32_t numberRHS = (int32_t)(xsubtract (
                xsubtract (131,
                           LENGTH (getCHARACTER (mDUMP_SDFxFLUSHxSTRING))),
                1));
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mDUMP_SDFxFLUSHxI, bitRHS);
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mDUMP_SDFxFLUSHxK, bitRHS);
            bitRHS->inUse = 0;
          }
          // DO WHILE BYTE(S(J),I)~=BYTE(' ') & BYTE(S(J),I)~=BYTE(',') & I>0;
          // (2066)
          while (
              1
              & (xAND (
                  xAND (
                      xNEQ (
                          BYTE (getCHARACTER (
                                    mS + 4 * COREHALFWORD (mDUMP_SDFxFLUSHxJ)),
                                COREHALFWORD (mDUMP_SDFxFLUSHxI)),
                          BYTE1 (cToDescriptor (NULL, " "))),
                      xNEQ (
                          BYTE (getCHARACTER (
                                    mS + 4 * COREHALFWORD (mDUMP_SDFxFLUSHxJ)),
                                COREHALFWORD (mDUMP_SDFxFLUSHxI)),
                          BYTE1 (cToDescriptor (NULL, ",")))),
                  xGT (COREHALFWORD (mDUMP_SDFxFLUSHxI), 0))))
            {
              // I = I - 1; (2067)
              {
                int32_t numberRHS = (int32_t)(xsubtract (
                    COREHALFWORD (mDUMP_SDFxFLUSHxI), 1));
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mDUMP_SDFxFLUSHxI, bitRHS);
                bitRHS->inUse = 0;
              }
            } // End of DO WHILE block
          // IF I=0 THEN (2068)
          if (1 & (xEQ (COREHALFWORD (mDUMP_SDFxFLUSHxI), 0)))
            // DO; (2069)
            {
            rs2s2s2:;
              // I = K; (2070)
              {
                descriptor_t *bitRHS = getBIT (16, mDUMP_SDFxFLUSHxK);
                putBIT (16, mDUMP_SDFxFLUSHxI, bitRHS);
                bitRHS->inUse = 0;
              }
              // DO WHILE BYTE(S(J),I)~=BYTE('.') & I>0; (2071)
              while (
                  1
                  & (xAND (
                      xNEQ (
                          BYTE (getCHARACTER (
                                    mS + 4 * COREHALFWORD (mDUMP_SDFxFLUSHxJ)),
                                COREHALFWORD (mDUMP_SDFxFLUSHxI)),
                          BYTE1 (cToDescriptor (NULL, "."))),
                      xGT (COREHALFWORD (mDUMP_SDFxFLUSHxI), 0))))
                {
                  // I = I - 1; (2072)
                  {
                    int32_t numberRHS = (int32_t)(xsubtract (
                        COREHALFWORD (mDUMP_SDFxFLUSHxI), 1));
                    descriptor_t *bitRHS;
                    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                    putBIT (16, mDUMP_SDFxFLUSHxI, bitRHS);
                    bitRHS->inUse = 0;
                  }
                } // End of DO WHILE block
              // IF I = 0 THEN (2073)
              if (1 & (xEQ (COREHALFWORD (mDUMP_SDFxFLUSHxI), 0)))
                // I = K; (2074)
                {
                  descriptor_t *bitRHS = getBIT (16, mDUMP_SDFxFLUSHxK);
                  putBIT (16, mDUMP_SDFxFLUSHxI, bitRHS);
                  bitRHS->inUse = 0;
                }
            es2s2s2:;
            } // End of DO block
          // OUTPUT = STRING || SUBSTR(S(J),0,I+1); (2075)
          {
            descriptor_t *stringRHS;
            stringRHS = xsCAT (
                getCHARACTER (mDUMP_SDFxFLUSHxSTRING),
                SUBSTR (
                    getCHARACTER (mS + 4 * COREHALFWORD (mDUMP_SDFxFLUSHxJ)),
                    0, xadd (COREHALFWORD (mDUMP_SDFxFLUSHxI), 1)));
            OUTPUT (0, stringRHS);
            stringRHS->inUse = 0;
          }
          // S(J) = SUBSTR(S(J),I+1); (2076)
          {
            descriptor_t *stringRHS;
            stringRHS = SUBSTR2 (
                getCHARACTER (mS + 4 * COREHALFWORD (mDUMP_SDFxFLUSHxJ)),
                xadd (COREHALFWORD (mDUMP_SDFxFLUSHxI), 1));
            putCHARACTER (mS + 4 * (COREHALFWORD (mDUMP_SDFxFLUSHxJ)),
                          stringRHS);
            stringRHS->inUse = 0;
          }
          // STRING = X13; (2077)
          {
            descriptor_t *stringRHS;
            stringRHS = getCHARACTER (mDUMP_SDFxFLUSHxX13);
            putCHARACTER (mDUMP_SDFxFLUSHxSTRING, stringRHS);
            stringRHS->inUse = 0;
          }
        es2s2:;
        } // End of DO block
      if (0)
        {
        rs2:
          continue;
        es2:
          break;
        } // block labeled IT_FITS
    }     // End of DO WHILE block
  // J,L,STMT_VARS = 0; (2078)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mDUMP_SDFxFLUSHxJ, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mDUMP_SDFxL, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mDUMP_SDFxFLUSHxSTMT_VARS, bitRHS);
    bitRHS->inUse = 0;
  }
  // OUTPUT = STRING; (2079)
  {
    descriptor_t *stringRHS;
    stringRHS = getCHARACTER (mDUMP_SDFxFLUSHxSTRING);
    OUTPUT (0, stringRHS);
    stringRHS->inUse = 0;
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
