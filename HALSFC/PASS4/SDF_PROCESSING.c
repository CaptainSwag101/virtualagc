/*
  File SDF_PROCESSING.c generated by XCOM-I, 2024-08-08 04:33:20.
*/

#include "runtimeC.h"

int32_t
SDF_PROCESSING (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "SDF_PROCESSING");
  // IF STAND_ALONE THEN (2541)
  if (1 & (bitToFixed (getBIT (1, mSTAND_ALONE))))
    // DO; (2542)
    {
    rs1:;
      // MISC=MISC_VAL; (2543)
      {
        int32_t numberRHS = (int32_t)(9);
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, getFIXED (mCOMMTABL_HALFWORD) + 2 * (6), bitRHS);
        bitRHS->inUse = 0;
      }
      // CALL MOVE(8, 'HALSDF  ', SDFNAM); (2544)
      {
        putBITp (16, mMOVExLEGNTH, fixedToBit (32, (int32_t)(8)));
        putFIXED (mMOVExFROM, 134217720);
        putFIXED (mMOVExINTO, xadd (getFIXED (mCOMMTABL_ADDR), 32));
        MOVE (0);
      }
    es1:;
    } // End of DO block
  // ELSE (2545)
  else
    // MISC = MISC_VAL | 4; (2546)
    {
      int32_t numberRHS = (int32_t)(13);
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (16, getFIXED (mCOMMTABL_HALFWORD) + 2 * (6), bitRHS);
      bitRHS->inUse = 0;
    }
  // CALL MONITOR(22,0,COMMTABL_ADDR); (2547)
  MONITOR22A (getFIXED (mCOMMTABL_ADDR));
  // IF CRETURN ~= 0 THEN (2548)
  if (1 & (xNEQ (COREHALFWORD (getFIXED (mCOMMTABL_HALFWORD) + 2 * 7), 0)))
    // DO; (2549)
    {
    rs2:;
      // OUTPUT = X1; (2550)
      {
        descriptor_t *stringRHS;
        stringRHS = getCHARACTER (mX1);
        OUTPUT (0, stringRHS);
        stringRHS->inUse = 0;
      }
      // OUTPUT = '**** OPEN ERROR DETECTED FOR SDF PDS -- CORRECT JCL AND
      // RESUBMIT ****'; (2551)
      {
        descriptor_t *stringRHS;
        stringRHS
            = cToDescriptor (NULL, "**** OPEN ERROR DETECTED FOR SDF PDS -- "
                                   "CORRECT JCL AND RESUBMIT ****");
        OUTPUT (0, stringRHS);
        stringRHS->inUse = 0;
      }
      // GO TO BAIL_OUT; (2552)
      {
        resetAllReentryGuards ();
        longjmp (jbBAIL_OUT, 1);
      }
    es2:;
    } // End of DO block
  // COREWORD(ADDR(DATABUF_BYTE)) = ADDRESS; (2553)
  {
    int32_t numberRHS
        = (int32_t)(getFIXED (getFIXED (mCOMMTABL_FULLWORD) + 4 * 7));
    COREWORD2 (ADDR ("DATABUF_BYTE", 0x80000000, NULL, 0), numberRHS);
  }
  // COREWORD(ADDR(DATABUF_HALFWORD)) = ADDRESS; (2554)
  {
    int32_t numberRHS
        = (int32_t)(getFIXED (getFIXED (mCOMMTABL_FULLWORD) + 4 * 7));
    COREWORD2 (ADDR ("DATABUF_HALFWORD", 0x80000000, NULL, 0), numberRHS);
  }
  // COREWORD(ADDR(DATABUF_FULLWORD)) = ADDRESS; (2555)
  {
    int32_t numberRHS
        = (int32_t)(getFIXED (getFIXED (mCOMMTABL_FULLWORD) + 4 * 7));
    COREWORD2 (ADDR ("DATABUF_FULLWORD", 0x80000000, NULL, 0), numberRHS);
  }
  // IF ALL THEN (2556)
  if (1 & (bitToFixed (getBIT (1, mALL))))
    // DO; (2557)
    {
    rs3:;
      // FFSTRING = STRING( 117440512 + ADDR(FFBUFF)); (2558)
      {
        int32_t numberRHS = (int32_t)(xadd (
            117440512, ADDR (NULL, 0, "SDF_PROCESSINGxFFBUFF", 0)));
        descriptor_t *stringRHS = getCHARACTERd (
            xadd (117440512, ADDR (NULL, 0, "SDF_PROCESSINGxFFBUFF", 0)));
        putCHARACTER (mSDF_PROCESSINGxFFSTRING, stringRHS);
        stringRHS->inUse = 0;
      }
      // IF ((TABLST|TABDMP) = 0) THEN (2559)
      if (1 & (xEQ (xOR (BYTE0 (mTABLST), BYTE0 (mTABDMP)), 0)))
        // TABLST = TRUE; (2560)
        {
          int32_t numberRHS = (int32_t)(1);
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (1, mTABLST, bitRHS);
          bitRHS->inUse = 0;
        }
      // DO FOREVER; (2561)
      while (1 & (1))
        {
          // BUFFER = INPUT(3); (2562)
          {
            descriptor_t *stringRHS;
            stringRHS = INPUT (3);
            putCHARACTER (mSDF_PROCESSINGxBUFFER, stringRHS);
            stringRHS->inUse = 0;
          }
          // IF BUFFER = '' THEN (2563)
          if (1
              & (xsEQ (getCHARACTER (mSDF_PROCESSINGxBUFFER),
                       cToDescriptor (NULL, ""))))
            // GO TO STATISTICS; (2564)
            goto STATISTICS;
          // RECORD_ADDR = ADDR(ALIGNED_BUFFER); (2565)
          {
            int32_t numberRHS = (int32_t)(ADDR (
                NULL, 0, "SDF_PROCESSINGxALIGNED_BUFFER", 0));
            putFIXED (mSDF_PROCESSINGxRECORD_ADDR, numberRHS);
          }
          // CALL MOVE(LENGTH(BUFFER),BUFFER,RECORD_ADDR); (2566)
          {
            putBITp (16, mMOVExLEGNTH,
                     fixedToBit (32, (int32_t)(LENGTH (getCHARACTER (
                                         mSDF_PROCESSINGxBUFFER)))));
            putFIXED (mMOVExFROM, getFIXED (mSDF_PROCESSINGxBUFFER));
            putFIXED (mMOVExINTO, getFIXED (mSDF_PROCESSINGxRECORD_ADDR));
            MOVE (0);
          }
          // OFFSET = 2; (2567)
          {
            int32_t numberRHS = (int32_t)(2);
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mSDF_PROCESSINGxOFFSET, bitRHS);
            bitRHS->inUse = 0;
          }
          // MAX_OFFSET = SHR(COREWORD(RECORD_ADDR),16)& 65535; (2568)
          {
            int32_t numberRHS = (int32_t)(xAND (
                SHR (COREWORD (getFIXED (mSDF_PROCESSINGxRECORD_ADDR)), 16),
                65535));
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mSDF_PROCESSINGxMAX_OFFSET, bitRHS);
            bitRHS->inUse = 0;
          }
          // DO WHILE OFFSET < MAX_OFFSET; (2569)
          while (1
                 & (xLT (COREHALFWORD (mSDF_PROCESSINGxOFFSET),
                         COREHALFWORD (mSDF_PROCESSINGxMAX_OFFSET))))
            {
              // SDF_NAME = STRING( 117440512 + RECORD_ADDR + OFFSET); (2570)
              {
                int32_t numberRHS = (int32_t)(xadd (
                    xadd (117440512, getFIXED (mSDF_PROCESSINGxRECORD_ADDR)),
                    COREHALFWORD (mSDF_PROCESSINGxOFFSET)));
                descriptor_t *stringRHS = getCHARACTERd (xadd (
                    xadd (117440512, getFIXED (mSDF_PROCESSINGxRECORD_ADDR)),
                    COREHALFWORD (mSDF_PROCESSINGxOFFSET)));
                putCHARACTER (mSDF_NAME, stringRHS);
                stringRHS->inUse = 0;
              }
              // IF SDF_NAME = FFSTRING THEN (2571)
              if (1
                  & (xsEQ (getCHARACTER (mSDF_NAME),
                           getCHARACTER (mSDF_PROCESSINGxFFSTRING))))
                // GO TO STATISTICS; (2572)
                goto STATISTICS;
              // CALL MOVE(8,SDF_NAME,SDFNAM); (2573)
              {
                putBITp (16, mMOVExLEGNTH, fixedToBit (32, (int32_t)(8)));
                putFIXED (mMOVExFROM, getFIXED (mSDF_NAME));
                putFIXED (mMOVExINTO, xadd (getFIXED (mCOMMTABL_ADDR), 32));
                MOVE (0);
              }
              // CALL DUMP_SDF; (2574)
              DUMP_SDF (0);
              // TMP = COREBYTE(RECORD_ADDR+OFFSET+11); (2575)
              {
                int32_t numberRHS = (int32_t)(COREBYTE (
                    xadd (xadd (getFIXED (mSDF_PROCESSINGxRECORD_ADDR),
                                COREHALFWORD (mSDF_PROCESSINGxOFFSET)),
                          11)));
                putFIXED (mTMP, numberRHS);
              }
              // OFFSET = OFFSET + 12 + SHL(TMP& 31,1); (2576)
              {
                int32_t numberRHS = (int32_t)(xadd (
                    xadd (COREHALFWORD (mSDF_PROCESSINGxOFFSET), 12),
                    SHL (xAND (getFIXED (mTMP), 31), 1)));
                descriptor_t *bitRHS;
                bitRHS = fixedToBit (32, (int32_t)(numberRHS));
                putBIT (16, mSDF_PROCESSINGxOFFSET, bitRHS);
                bitRHS->inUse = 0;
              }
            } // End of DO WHILE block
        }     // End of DO WHILE block
    es3:;
    } // End of DO block
  // ELSE (2577)
  else
    // IF STAND_ALONE THEN (2578)
    if (1 & (bitToFixed (getBIT (1, mSTAND_ALONE))))
      // DO; (2579)
      {
      rs4:;
        // IF ((TABLST|TABDMP) = 0) THEN (2580)
        if (1 & (xEQ (xOR (BYTE0 (mTABLST), BYTE0 (mTABDMP)), 0)))
          // TABLST = TRUE; (2581)
          {
            int32_t numberRHS = (int32_t)(1);
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (1, mTABLST, bitRHS);
            bitRHS->inUse = 0;
          }
        // DO FOREVER; (2582)
        while (1 & (1))
          {
            // SDF_NAME = INPUT; (2583)
            {
              descriptor_t *stringRHS;
              stringRHS = INPUT (0);
              putCHARACTER (mSDF_NAME, stringRHS);
              stringRHS->inUse = 0;
            }
            // DO WHILE SUBSTR(SDF_NAME,0,1) = X1; (2584)
            while (1
                   & (xsEQ (SUBSTR (getCHARACTER (mSDF_NAME), 0, 1),
                            getCHARACTER (mX1))))
              {
                // SDF_NAME = SUBSTR(SDF_NAME,1); (2585)
                {
                  descriptor_t *stringRHS;
                  stringRHS = SUBSTR2 (getCHARACTER (mSDF_NAME), 1);
                  putCHARACTER (mSDF_NAME, stringRHS);
                  stringRHS->inUse = 0;
                }
              } // End of DO WHILE block
            // IF SDF_NAME = '' THEN (2586)
            if (1
                & (xsEQ (getCHARACTER (mSDF_NAME), cToDescriptor (NULL, ""))))
              // GO TO STATISTICS; (2587)
              goto STATISTICS;
            // SDF_NAME = PAD(SDF_NAME,8); (2588)
            {
              descriptor_t *stringRHS;
              stringRHS
                  = (putCHARACTERp (mPADxSTRING, getCHARACTER (mSDF_NAME)),
                     putBITp (16, mPADxMAX, fixedToBit (32, (int32_t)(8))),
                     PAD (0));
              putCHARACTER (mSDF_NAME, stringRHS);
              stringRHS->inUse = 0;
            }
            // CALL MOVE(8,SDF_NAME,SDFNAM); (2589)
            {
              putBITp (16, mMOVExLEGNTH, fixedToBit (32, (int32_t)(8)));
              putFIXED (mMOVExFROM, getFIXED (mSDF_NAME));
              putFIXED (mMOVExINTO, xadd (getFIXED (mCOMMTABL_ADDR), 32));
              MOVE (0);
            }
            // CALL MONITOR(22, 2147483655); (2590)
            MONITOR22 (2147483655);
            // IF CRETURN = 0 THEN (2591)
            if (1
                & (xEQ (COREHALFWORD (getFIXED (mCOMMTABL_HALFWORD) + 2 * 7),
                        0)))
              // CALL DUMP_SDF; (2592)
              DUMP_SDF (0);
            // ELSE (2593)
            else
              // DO; (2594)
              {
              rs4s1s2:;
                // OUTPUT='*** SDF '||SDF_NAME||' NOT FOUND -- REQUEST IGNORED
                // ***'; (2595)
                {
                  descriptor_t *stringRHS;
                  stringRHS
                      = xsCAT (xsCAT (cToDescriptor (NULL, "*** SDF "),
                                      getCHARACTER (mSDF_NAME)),
                               cToDescriptor (
                                   NULL, " NOT FOUND -- REQUEST IGNORED ***"));
                  OUTPUT (0, stringRHS);
                  stringRHS->inUse = 0;
                }
                // OUTPUT = X1; (2596)
                {
                  descriptor_t *stringRHS;
                  stringRHS = getCHARACTER (mX1);
                  OUTPUT (0, stringRHS);
                  stringRHS->inUse = 0;
                }
              es4s1s2:;
              } // End of DO block
          }     // End of DO WHILE block
      es4:;
      } // End of DO block
    // ELSE (2597)
    else
      // DO; (2598)
      {
      rs5:;
        // CALL MOVE(8,ADDR(SDF_NAM1),SDFNAM); (2599)
        {
          putBITp (16, mMOVExLEGNTH, fixedToBit (32, (int32_t)(8)));
          putFIXED (mMOVExFROM, ADDR (NULL, 0, "COMM", 40));
          putFIXED (mMOVExINTO, xadd (getFIXED (mCOMMTABL_ADDR), 32));
          MOVE (0);
        }
        // COREWORD(ADDR(SDF_NAME)) =  117440512 + ADDR(SDF_NAM1); (2600)
        {
          int32_t numberRHS
              = (int32_t)(xadd (117440512, ADDR (NULL, 0, "COMM", 40)));
          COREWORD2 (ADDR (NULL, 0, "SDF_NAME", 0), numberRHS);
        }
        // CALL MONITOR(22, 2147483655); (2601)
        MONITOR22 (2147483655);
        // IF CRETURN = 0 THEN (2602)
        if (1
            & (xEQ (COREHALFWORD (getFIXED (mCOMMTABL_HALFWORD) + 2 * 7), 0)))
          // CALL DUMP_SDF; (2603)
          DUMP_SDF (0);
        // ELSE (2604)
        else
          // DO; (2605)
          {
          rs5s1:;
            // OUTPUT = '*** SDF '||SDF_NAME||' NOT FOUND -- PROCESSING
            // ABANDONED ***'; (2606)
            {
              descriptor_t *stringRHS;
              stringRHS = xsCAT (
                  xsCAT (cToDescriptor (NULL, "*** SDF "),
                         getCHARACTER (mSDF_NAME)),
                  cToDescriptor (NULL,
                                 " NOT FOUND -- PROCESSING ABANDONED ***"));
              OUTPUT (0, stringRHS);
              stringRHS->inUse = 0;
            }
          es5s1:;
          } // End of DO block
      es5:;
      } // End of DO block
// STATISTICS: (2607)
STATISTICS:
  // SDFPKG_LOCATES = LOCCNT; (2608)
  {
    int32_t numberRHS
        = (int32_t)(getFIXED (getFIXED (mDATABUF_FULLWORD) + 4 * 0));
    putFIXED (mSDFPKG_LOCATES, numberRHS);
  }
  // SDFPKG_READS = READS; (2609)
  {
    int32_t numberRHS
        = (int32_t)(getFIXED (getFIXED (mDATABUF_FULLWORD) + 4 * 15));
    putFIXED (mSDFPKG_READS, numberRHS);
  }
  // SDFPKG_SLECTCNT = SLECTCNT; (2610)
  {
    int32_t numberRHS
        = (int32_t)(getFIXED (getFIXED (mDATABUF_FULLWORD) + 4 * 17));
    putFIXED (mSDFPKG_SLECTCNT, numberRHS);
  }
  // SDFPKG_FCBAREA = TOTFCBLN; (2611)
  {
    int32_t numberRHS
        = (int32_t)(getFIXED (getFIXED (mDATABUF_FULLWORD) + 4 * 13));
    putFIXED (mSDFPKG_FCBAREA, numberRHS);
  }
  // SDFPKG_PGAREA = NUMOFPGS; (2612)
  {
    descriptor_t *bitRHS = getBIT (16, getFIXED (mDATABUF_HALFWORD) + 2 * 19);
    putBIT (16, mSDFPKG_PGAREA, bitRHS);
    bitRHS->inUse = 0;
  }
  // SDFPKG_NUMGETM = NUMGETM; (2613)
  {
    descriptor_t *bitRHS = getBIT (16, getFIXED (mDATABUF_HALFWORD) + 2 * 18);
    putBIT (16, mSDFPKG_NUMGETM, bitRHS);
    bitRHS->inUse = 0;
  }
  // CALL MONITOR(22,1); (2614)
  MONITOR22 (1);
  {
    reentryGuard = 0;
    return 0;
  }
}
