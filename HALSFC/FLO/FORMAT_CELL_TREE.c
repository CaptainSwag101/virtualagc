/*
  File FORMAT_CELL_TREE.c generated by XCOM-I, 2024-08-08 04:31:35.
*/

#include "runtimeC.h"

int32_t
FORMAT_CELL_TREE (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "FORMAT_CELL_TREE");
  // DO WHILE PTR_INX > 0; (2656)
  while (1 & (xGT (COREHALFWORD (mPTR_INX), 0)))
    {
      // PTR = EXP_PTRS(PTR_INX); (2657)
      {
        int32_t numberRHS
            = (int32_t)(getFIXED (mEXP_PTRS + 4 * COREHALFWORD (mPTR_INX)));
        putFIXED (mFORMAT_CELL_TREExPTR, numberRHS);
      }
      // LEVEL = EXP_VARS(PTR_INX); (2658)
      {
        descriptor_t *bitRHS
            = getBIT (16, mEXP_VARS + 2 * COREHALFWORD (mPTR_INX));
        putBIT (16, mLEVEL, bitRHS);
        bitRHS->inUse = 0;
      }
      // PTR_INX = PTR_INX - 1; (2659)
      {
        int32_t numberRHS = (int32_t)(xsubtract (COREHALFWORD (mPTR_INX), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mPTR_INX, bitRHS);
        bitRHS->inUse = 0;
      }
      // PTR_TYPE = SHR(PTR,30) & 3; (2660)
      {
        int32_t numberRHS
            = (int32_t)(xAND (SHR (getFIXED (mFORMAT_CELL_TREExPTR), 30), 3));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (8, mFORMAT_CELL_TREExPTR_TYPE, bitRHS);
        bitRHS->inUse = 0;
      }
      // PTR = PTR &  1073741823; (2661)
      {
        int32_t numberRHS
            = (int32_t)(xAND (getFIXED (mFORMAT_CELL_TREExPTR), 1073741823));
        putFIXED (mFORMAT_CELL_TREExPTR, numberRHS);
      }
      // IF PTR ~= 0 THEN (2662)
      if (1 & (xNEQ (getFIXED (mFORMAT_CELL_TREExPTR), 0)))
        // DO CASE PTR_TYPE; (2663)
        {
        rs1s1:
          switch (BYTE0 (mFORMAT_CELL_TREExPTR_TYPE))
            {
            case 0:
              // CALL FORMAT_VAR_REF_CELL(PTR); (2665)
              {
                putFIXED (mFORMAT_VAR_REF_CELLxPTR,
                          getFIXED (mFORMAT_CELL_TREExPTR));
                FORMAT_VAR_REF_CELL (0);
              }
              break;
            case 1:
              // CALL FORMAT_PF_INV_CELL(PTR); (2666)
              {
                putFIXED (mFORMAT_PF_INV_CELLxPTR,
                          getFIXED (mFORMAT_CELL_TREExPTR));
                FORMAT_PF_INV_CELL (0);
              }
              break;
            case 2:
              // CALL FORMAT_EXP_VARS_CELL(PTR); (2667)
              {
                putFIXED (mFORMAT_EXP_VARS_CELLxPTR,
                          getFIXED (mFORMAT_CELL_TREExPTR));
                FORMAT_EXP_VARS_CELL (0);
              }
              break;
            case 3:
                // ; (2668)
                ;
              break;
            }
        } // End of DO CASE block
    }     // End of DO WHILE block
  {
    reentryGuard = 0;
    return 0;
  }
}
