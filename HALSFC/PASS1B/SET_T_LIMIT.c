/*
  File SET_T_LIMIT.c generated by XCOM-I, 2024-08-08 04:33:34.
*/

#include "runtimeC.h"

descriptor_t *
SET_T_LIMIT (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (descriptor_t *)0;
    }
  reentryGuard = guardReentry (reentryGuard, "SET_T_LIMIT");
  // IF LRECL<0 THEN (1521)
  if (1 & (xLT (COREHALFWORD (mSET_T_LIMITxLRECL), 0)))
    // CALL ERROR(CLASS_B,3); (1522)
    {
      putBITp (16, mERRORxCLASS, getBIT (16, mCLASS_B));
      putBITp (8, mERRORxNUM, fixedToBit (32, (int32_t)(3)));
      ERROR (0);
    }
  // IF SDL_OPTION THEN (1523)
  if (1 & (bitToFixed (getBIT (1, mSDL_OPTION))))
    // T_LIMIT=71; (1524)
    {
      int32_t numberRHS = (int32_t)(71);
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (16, mSET_T_LIMITxT_LIMIT, bitRHS);
      bitRHS->inUse = 0;
    }
  // ELSE (1525)
  else
    // DO; (1526)
    {
    rs1:;
      // T_LIMIT=LRECL; (1527)
      {
        descriptor_t *bitRHS = getBIT (16, mSET_T_LIMITxLRECL);
        putBIT (16, mSET_T_LIMITxT_LIMIT, bitRHS);
        bitRHS->inUse = 0;
      }
      // IF SRN_PRESENT THEN (1528)
      if (1 & (bitToFixed (getBIT (1, mSRN_PRESENT))))
        // T_LIMIT=T_LIMIT-8; (1529)
        {
          int32_t numberRHS
              = (int32_t)(xsubtract (COREHALFWORD (mSET_T_LIMITxT_LIMIT), 8));
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (16, mSET_T_LIMITxT_LIMIT, bitRHS);
          bitRHS->inUse = 0;
        }
    es1:;
    } // End of DO block
  // RETURN T_LIMIT; (1530)
  {
    reentryGuard = 0;
    return getBIT (16, mSET_T_LIMITxT_LIMIT);
  }
}
