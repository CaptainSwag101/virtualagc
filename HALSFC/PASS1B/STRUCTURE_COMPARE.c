/*
  File STRUCTURE_COMPARE.c generated by XCOM-I, 2024-08-08 04:33:34.
*/

#include "runtimeC.h"

int32_t
STRUCTURE_COMPARE (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "STRUCTURE_COMPARE");
  // IF ((SYT_FLAGS(A)|SYT_FLAGS(B))&EVIL_FLAG)~=0 THEN (7465)
  if (1
      & (xNEQ (
          xAND (xOR (getFIXED (getFIXED (mSYM_TAB)
                               + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExA)) + 8
                               + 4 * (0)),
                     getFIXED (getFIXED (mSYM_TAB)
                               + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExB)) + 8
                               + 4 * (0))),
                2097152),
          0)))
    // RETURN; (7466)
    {
      reentryGuard = 0;
      return 0;
    }
  // IF A=B THEN (7467)
  if (1
      & (xEQ (COREHALFWORD (mSTRUCTURE_COMPARExA),
              COREHALFWORD (mSTRUCTURE_COMPARExB))))
    // RETURN; (7468)
    {
      reentryGuard = 0;
      return 0;
    }
  // AX=A; (7469)
  {
    descriptor_t *bitRHS = getBIT (16, mSTRUCTURE_COMPARExA);
    putBIT (16, mSTRUCTURE_COMPARExAX, bitRHS);
    bitRHS->inUse = 0;
  }
  // BX=B; (7470)
  {
    descriptor_t *bitRHS = getBIT (16, mSTRUCTURE_COMPARExB);
    putBIT (16, mSTRUCTURE_COMPARExBX, bitRHS);
    bitRHS->inUse = 0;
  }
  // DO FOREVER; (7471)
  while (1 & (1))
    {
      // DO WHILE SYT_LINK1(AX)>0; (7472)
      while (
          1
          & (xGT (COREHALFWORD (getFIXED (mSYM_TAB)
                                + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExAX))
                                + 24 + 2 * (0)),
                  0)))
        {
          // AX=SYT_LINK1(AX); (7473)
          {
            descriptor_t *bitRHS
                = getBIT (16, getFIXED (mSYM_TAB)
                                  + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExAX))
                                  + 24 + 2 * (0));
            putBIT (16, mSTRUCTURE_COMPARExAX, bitRHS);
            bitRHS->inUse = 0;
          }
          // BX=SYT_LINK1(BX); (7474)
          {
            descriptor_t *bitRHS
                = getBIT (16, getFIXED (mSYM_TAB)
                                  + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExBX))
                                  + 24 + 2 * (0));
            putBIT (16, mSTRUCTURE_COMPARExBX, bitRHS);
            bitRHS->inUse = 0;
          }
          // IF BX=0 THEN (7475)
          if (1 & (xEQ (COREHALFWORD (mSTRUCTURE_COMPARExBX), 0)))
            // GO TO STRUC_ERR; (7476)
            goto STRUC_ERR;
        } // End of DO WHILE block
      // IF SYT_LINK1(BX)~=0 THEN (7477)
      if (1
          & (xNEQ (COREHALFWORD (getFIXED (mSYM_TAB)
                                 + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExBX))
                                 + 24 + 2 * (0)),
                   0)))
        // GO TO STRUC_ERR; (7478)
        goto STRUC_ERR;
      // IF SYT_TYPE(AX)~=SYT_TYPE(BX) THEN (7479)
      if (1
          & (xNEQ (BYTE0 (getFIXED (mSYM_TAB)
                          + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExAX)) + 32
                          + 1 * (0)),
                   BYTE0 (getFIXED (mSYM_TAB)
                          + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExBX)) + 32
                          + 1 * (0)))))
        // GO TO STRUC_ERR; (7480)
        goto STRUC_ERR;
      // IF VAR_LENGTH(AX)~=VAR_LENGTH(BX) THEN (7481)
      if (1
          & (xNEQ (COREHALFWORD (getFIXED (mSYM_TAB)
                                 + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExAX))
                                 + 18 + 2 * (0)),
                   COREHALFWORD (getFIXED (mSYM_TAB)
                                 + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExBX))
                                 + 18 + 2 * (0)))))
        // GO TO STRUC_ERR; (7482)
        goto STRUC_ERR;
      // IF (SYT_FLAGS(AX)&SM_FLAGS)~=(SYT_FLAGS(BX)&SM_FLAGS) THEN (7483)
      if (1
          & (xNEQ (
              xAND (getFIXED (getFIXED (mSYM_TAB)
                              + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExAX)) + 8
                              + 4 * (0)),
                    2428633228),
              xAND (getFIXED (getFIXED (mSYM_TAB)
                              + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExBX)) + 8
                              + 4 * (0)),
                    2428633228))))
        // GO TO STRUC_ERR; (7484)
        goto STRUC_ERR;
      // DO I=0 TO EXT_ARRAY(SYT_ARRAY(AX)); (7485)
      {
        int32_t from118, to118, by118;
        from118 = 0;
        to118 = bitToFixed (getBIT (
            16, mEXT_ARRAY
                    + 2
                          * COREHALFWORD (
                              getFIXED (mSYM_TAB)
                              + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExAX))
                              + 20 + 2 * (0))));
        by118 = 1;
        for (putBIT (16, mSTRUCTURE_COMPARExI, fixedToBit (16, from118));
             bitToFixed (getBIT (16, mSTRUCTURE_COMPARExI)) <= to118; putBIT (
                 16, mSTRUCTURE_COMPARExI,
                 fixedToBit (16, bitToFixed (getBIT (16, mSTRUCTURE_COMPARExI))
                                     + by118)))
          {
            // IF EXT_ARRAY(SYT_ARRAY(AX)+I)~=EXT_ARRAY(SYT_ARRAY(BX)+I) THEN
            // (7486)
            if (1
                & (xNEQ (
                    COREHALFWORD (
                        mEXT_ARRAY
                        + 2
                              * xadd (COREHALFWORD (
                                          getFIXED (mSYM_TAB)
                                          + 34
                                                * (COREHALFWORD (
                                                    mSTRUCTURE_COMPARExAX))
                                          + 20 + 2 * (0)),
                                      COREHALFWORD (mSTRUCTURE_COMPARExI))),
                    COREHALFWORD (
                        mEXT_ARRAY
                        + 2
                              * xadd (COREHALFWORD (
                                          getFIXED (mSYM_TAB)
                                          + 34
                                                * (COREHALFWORD (
                                                    mSTRUCTURE_COMPARExBX))
                                          + 20 + 2 * (0)),
                                      COREHALFWORD (mSTRUCTURE_COMPARExI))))))
              // GO TO STRUC_ERR; (7487)
              goto STRUC_ERR;
          }
      } // End of DO for-loop block
      // DO WHILE SYT_LINK2(AX)<0; (7488)
      while (
          1
          & (xLT (COREHALFWORD (getFIXED (mSYM_TAB)
                                + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExAX))
                                + 26 + 2 * (0)),
                  0)))
        {
          // AX=-SYT_LINK2(AX); (7489)
          {
            int32_t numberRHS = (int32_t)(xminus (
                COREHALFWORD (getFIXED (mSYM_TAB)
                              + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExAX))
                              + 26 + 2 * (0))));
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mSTRUCTURE_COMPARExAX, bitRHS);
            bitRHS->inUse = 0;
          }
          // BX=-SYT_LINK2(BX); (7490)
          {
            int32_t numberRHS = (int32_t)(xminus (
                COREHALFWORD (getFIXED (mSYM_TAB)
                              + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExBX))
                              + 26 + 2 * (0))));
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (16, mSTRUCTURE_COMPARExBX, bitRHS);
            bitRHS->inUse = 0;
          }
          // IF AX=A THEN (7491)
          if (1
              & (xEQ (COREHALFWORD (mSTRUCTURE_COMPARExAX),
                      COREHALFWORD (mSTRUCTURE_COMPARExA))))
            // DO; (7492)
            {
            rs1s3s1:;
              // IF BX~=B THEN (7493)
              if (1
                  & (xNEQ (COREHALFWORD (mSTRUCTURE_COMPARExBX),
                           COREHALFWORD (mSTRUCTURE_COMPARExB))))
                // GO TO STRUC_ERR; (7494)
                goto STRUC_ERR;
              // RETURN; (7495)
              {
                reentryGuard = 0;
                return 0;
              }
            es1s3s1:;
            } // End of DO block
          // IF BX<=0 THEN (7496)
          if (1 & (xLE (COREHALFWORD (mSTRUCTURE_COMPARExBX), 0)))
            // GO TO STRUC_ERR; (7497)
            goto STRUC_ERR;
        } // End of DO WHILE block
      // AX=SYT_LINK2(AX); (7498)
      {
        descriptor_t *bitRHS
            = getBIT (16, getFIXED (mSYM_TAB)
                              + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExAX))
                              + 26 + 2 * (0));
        putBIT (16, mSTRUCTURE_COMPARExAX, bitRHS);
        bitRHS->inUse = 0;
      }
      // BX=SYT_LINK2(BX); (7499)
      {
        descriptor_t *bitRHS
            = getBIT (16, getFIXED (mSYM_TAB)
                              + 34 * (COREHALFWORD (mSTRUCTURE_COMPARExBX))
                              + 26 + 2 * (0));
        putBIT (16, mSTRUCTURE_COMPARExBX, bitRHS);
        bitRHS->inUse = 0;
      }
      // IF BX<=0 THEN (7500)
      if (1 & (xLE (COREHALFWORD (mSTRUCTURE_COMPARExBX), 0)))
        // GO TO STRUC_ERR; (7501)
        goto STRUC_ERR;
    } // End of DO WHILE block
// STRUC_ERR: (7502)
STRUC_ERR:
  // CALL ERROR(ERR_CLASS,ERR_NUM); (7503)
  {
    putBITp (16, mERRORxCLASS, getBIT (16, mSTRUCTURE_COMPARExERR_CLASS));
    putBITp (8, mERRORxNUM, getBIT (16, mSTRUCTURE_COMPARExERR_NUM));
    ERROR (0);
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
