/*
  File GENERATExEMITPFW.c generated by XCOM-I, 2024-08-09 12:39:31.
*/

#include "runtimeC.h"

int32_t
GENERATExEMITPFW (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GENERATExEMITPFW");
  // DEST = LOCATION(VAL(PTR)); (3305)
  {
    int32_t numberRHS = (int32_t)(getFIXED (
        getFIXED (mLAB_LOC)
        + 8
              * (getFIXED (getFIXED (mIND_STACK)
                           + 73 * (COREHALFWORD (mGENERATExEMITPFWxPTR)) + 12
                           + 4 * (0)))
        + 0 + 4 * (0)));
    putFIXED (mGENERATExEMITPFWxDEST, numberRHS);
  }
  // DIFF = LOCCTR(INDEXNEST)+1 - DEST; (3306)
  {
    int32_t numberRHS = (int32_t)(xsubtract (
        xadd (getFIXED (mLOCCTR + 4 * COREHALFWORD (mINDEXNEST)), 1),
        getFIXED (mGENERATExEMITPFWxDEST)));
    putFIXED (mGENERATExEMITPFWxDIFF, numberRHS);
  }
  // IF (INST=BC|INST=BCT) & DEST~=0 & DIFF>=0 & DIFF<=55 THEN (3307)
  if (1
      & (xAND (xAND (xAND (xOR (xEQ (COREHALFWORD (mGENERATExEMITPFWxINST),
                                     BYTE0 (mBC)),
                                xEQ (COREHALFWORD (mGENERATExEMITPFWxINST),
                                     BYTE0 (mBCT))),
                           xNEQ (getFIXED (mGENERATExEMITPFWxDEST), 0)),
                     xGE (getFIXED (mGENERATExEMITPFWxDIFF), 0)),
               xLE (getFIXED (mGENERATExEMITPFWxDIFF), 55))))
    // CALL EMITP(INST+ 64, XREG, 0, FORM(PTR), LOC(PTR), SRSTYPE); (3308)
    {
      putBITp (
          16, mGENERATExEMITPxINST,
          fixedToBit (32, (int32_t)(xadd (
                              COREHALFWORD (mGENERATExEMITPFWxINST), 64))));
      putBITp (16, mGENERATExEMITPxXREG, getBIT (16, mGENERATExEMITPFWxXREG));
      putBITp (16, mGENERATExEMITPxINDEX, fixedToBit (32, (int32_t)(0)));
      putBITp (16, mGENERATExEMITPxFLAG,
               getBIT (16, getFIXED (mIND_STACK)
                               + 73 * (COREHALFWORD (mGENERATExEMITPFWxPTR))
                               + 32 + 2 * (0)));
      putBITp (16, mGENERATExEMITPxPTR,
               getBIT (16, getFIXED (mIND_STACK)
                               + 73 * (COREHALFWORD (mGENERATExEMITPFWxPTR))
                               + 40 + 2 * (0)));
      putBITp (16, mGENERATExEMITPxINSTYPE, getBIT (8, mSRSTYPE));
      GENERATExEMITP (0);
    }
  // ELSE (3309)
  else
    // CALL EMITP(INST, XREG, 0, FORM(PTR), LOC(PTR)); (3310)
    {
      putBITp (16, mGENERATExEMITPxINST, getBIT (16, mGENERATExEMITPFWxINST));
      putBITp (16, mGENERATExEMITPxXREG, getBIT (16, mGENERATExEMITPFWxXREG));
      putBITp (16, mGENERATExEMITPxINDEX, fixedToBit (32, (int32_t)(0)));
      putBITp (16, mGENERATExEMITPxFLAG,
               getBIT (16, getFIXED (mIND_STACK)
                               + 73 * (COREHALFWORD (mGENERATExEMITPFWxPTR))
                               + 32 + 2 * (0)));
      putBITp (16, mGENERATExEMITPxPTR,
               getBIT (16, getFIXED (mIND_STACK)
                               + 73 * (COREHALFWORD (mGENERATExEMITPFWxPTR))
                               + 40 + 2 * (0)));
      GENERATExEMITP (0);
    }
  // CALL RETURN_STACK_ENTRY(PTR); (3311)
  {
    putBITp (16, mGENERATExRETURN_STACK_ENTRYxP,
             getBIT (16, mGENERATExEMITPFWxPTR));
    GENERATExRETURN_STACK_ENTRY (0);
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
