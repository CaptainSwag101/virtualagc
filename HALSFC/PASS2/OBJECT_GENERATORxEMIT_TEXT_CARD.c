/*
  File OBJECT_GENERATORxEMIT_TEXT_CARD.c generated by XCOM-I, 2024-08-08
  04:32:26.
*/

#include "runtimeC.h"

int32_t
OBJECT_GENERATORxEMIT_TEXT_CARD (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard
      = guardReentry (reentryGuard, "OBJECT_GENERATORxEMIT_TEXT_CARD");
  // IF BYTES_REMAINING < I | CARDIMAGE ~= TEXT_CARD THEN (15744)
  if (1
      & (xOR (xLT (COREHALFWORD (mOBJECT_GENERATORxBYTES_REMAINING),
                   COREHALFWORD (mOBJECT_GENERATORxEMIT_TEXT_CARDxI)),
              xNEQ (getFIXED (mOBJECT_GENERATORxCARDIMAGE),
                    getFIXED (mOBJECT_GENERATORxTEXT_CARD)))))
    // DO; (15745)
    {
    rs1:;
      // CALL EMIT_CARD; (15746)
      OBJECT_GENERATORxEMIT_CARD (0);
      // CARDIMAGE,CARDIMAGE(1)=TEXT_CARD; (15747)
      {
        int32_t numberRHS = (int32_t)(getFIXED (mOBJECT_GENERATORxTEXT_CARD));
        putFIXED (mOBJECT_GENERATORxCARDIMAGE, numberRHS);
        putFIXED (mOBJECT_GENERATORxCARDIMAGE + 4 * (1), numberRHS);
      }
      // CARDIMAGE(2)= 1073741824+SHL(CURRENT_ADDRESS,1); (15748)
      {
        int32_t numberRHS = (int32_t)(xadd (
            1073741824,
            SHL (getFIXED (mWORKSEG + 4 * getFIXED (mCURRENT_ESDID)), 1)));
        putFIXED (mOBJECT_GENERATORxCARDIMAGE + 4 * (2), numberRHS);
      }
      // CARDIMAGE(4)= 1077936128 + CURRENT_ESDID; (15749)
      {
        int32_t numberRHS
            = (int32_t)(xadd (1077936128, getFIXED (mCURRENT_ESDID)));
        putFIXED (mOBJECT_GENERATORxCARDIMAGE + 4 * (4), numberRHS);
      }
      // CURRENT_SIZE, BYTES_REMAINING=TEXT_SIZE; (15750)
      {
        descriptor_t *bitRHS = getBIT (16, mOBJECT_GENERATORxTEXT_SIZE);
        putBIT (16, mOBJECT_GENERATORxCURRENT_SIZE, bitRHS);
        putBIT (16, mOBJECT_GENERATORxBYTES_REMAINING, bitRHS);
        bitRHS->inUse = 0;
      }
    es1:;
    } // End of DO block
  // TEMP=72-BYTES_REMAINING; (15751)
  {
    int32_t numberRHS = (int32_t)(xsubtract (
        72, COREHALFWORD (mOBJECT_GENERATORxBYTES_REMAINING)));
    putFIXED (mTEMP, numberRHS);
  }
  // DO L=1 TO I; (15752)
  {
    int32_t from154, to154, by154;
    from154 = 1;
    to154 = bitToFixed (getBIT (16, mOBJECT_GENERATORxEMIT_TEXT_CARDxI));
    by154 = 1;
    for (putFIXED (mOBJECT_GENERATORxL, from154);
         getFIXED (mOBJECT_GENERATORxL) <= to154; putFIXED (
             mOBJECT_GENERATORxL, getFIXED (mOBJECT_GENERATORxL) + by154))
      {
        // IF L THEN (15753)
        if (1 & (getFIXED (mOBJECT_GENERATORxL)))
          // COLUMN(TEMP)=SHR(RHS(SHR(L,1)),8); (15754)
          {
            int32_t numberRHS = (int32_t)(SHR (
                COREHALFWORD (mRHS
                              + 2 * SHR (getFIXED (mOBJECT_GENERATORxL), 1)),
                8));
            descriptor_t *bitRHS;
            bitRHS = fixedToBit (32, (int32_t)(numberRHS));
            putBIT (8, mOBJECT_GENERATORxCOLUMN + 1 * (getFIXED (mTEMP)),
                    bitRHS);
            bitRHS->inUse = 0;
          }
        // ELSE (15755)
        else
          // COLUMN(TEMP)=RHS(SHR(L-1,1)); (15756)
          {
            descriptor_t *bitRHS = getBIT (
                16,
                mRHS
                    + 2
                          * SHR (xsubtract (getFIXED (mOBJECT_GENERATORxL), 1),
                                 1));
            putBIT (8, mOBJECT_GENERATORxCOLUMN + 1 * (getFIXED (mTEMP)),
                    bitRHS);
            bitRHS->inUse = 0;
          }
        // TEMP=TEMP+1; (15757)
        {
          int32_t numberRHS = (int32_t)(xadd (getFIXED (mTEMP), 1));
          putFIXED (mTEMP, numberRHS);
        }
      }
  } // End of DO for-loop block
  // BYTES_REMAINING=BYTES_REMAINING-I; (15758)
  {
    int32_t numberRHS = (int32_t)(xsubtract (
        COREHALFWORD (mOBJECT_GENERATORxBYTES_REMAINING),
        COREHALFWORD (mOBJECT_GENERATORxEMIT_TEXT_CARDxI)));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mOBJECT_GENERATORxBYTES_REMAINING, bitRHS);
    bitRHS->inUse = 0;
  }
  // CALL PRINT_LINE(I); (15759)
  {
    putBITp (16, mOBJECT_GENERATORxPRINT_LINExI,
             getBIT (16, mOBJECT_GENERATORxEMIT_TEXT_CARDxI));
    OBJECT_GENERATORxPRINT_LINE (0);
  }
  // CURRENT_ADDRESS=CURRENT_ADDRESS+SHR(I+1,1); (15760)
  {
    int32_t numberRHS = (int32_t)(xadd (
        getFIXED (mWORKSEG + 4 * getFIXED (mCURRENT_ESDID)),
        SHR (xadd (COREHALFWORD (mOBJECT_GENERATORxEMIT_TEXT_CARDxI), 1), 1)));
    putFIXED (mWORKSEG + 4 * (getFIXED (mCURRENT_ESDID)), numberRHS);
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
