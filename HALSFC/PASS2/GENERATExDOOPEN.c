/*
  File GENERATExDOOPEN.c generated by XCOM-I, 2024-08-09 12:39:31.
*/

#include "runtimeC.h"

int32_t
GENERATExDOOPEN (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GENERATExDOOPEN");
  // ADOPTR = ADOPTR + 1; (5886)
  {
    int32_t numberRHS = (int32_t)(xadd (COREHALFWORD (mGENERATExADOPTR), 1));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mGENERATExADOPTR, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF ADOPTR > DOLOOPS THEN (5887)
  if (1 & (xGT (COREHALFWORD (mGENERATExADOPTR), 20)))
    // CALL ERRORS(CLASS_BS,119); (5888)
    {
      putBITp (16, mERRORSxCLASS, getBIT (8, mCLASS_BS));
      putBITp (16, mERRORSxNUM, fixedToBit (32, (int32_t)(119)));
      ERRORS (0);
    }
  // DOLABEL(ADOPTR) = GETSTATNO; (5889)
  {
    descriptor_t *bitRHS = GETSTATNO (0);
    putBIT (16, mGENERATExDOLABEL + 2 * (COREHALFWORD (mGENERATExADOPTR)),
            bitRHS);
    bitRHS->inUse = 0;
  }
  // DOSTEP(ADOPTR) = STEP; (5890)
  {
    int32_t numberRHS = (int32_t)(getFIXED (mGENERATExDOOPENxSTEP));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mGENERATExDOSTEP + 2 * (COREHALFWORD (mGENERATExADOPTR)),
            bitRHS);
    bitRHS->inUse = 0;
  }
  // CALL RESUME_LOCCTR(NARGINDEX); (5891)
  {
    putBITp (16, mGENERATExRESUME_LOCCTRxNEST, getBIT (16, mNARGINDEX));
    GENERATExRESUME_LOCCTR (0);
  }
  // PTR, DOINDEX(ADOPTR) = GET_VAC(-1); (5892)
  {
    descriptor_t *bitRHS
        = (putBITp (16, mGENERATExGET_VACxR, fixedToBit (32, (int32_t)(-1))),
           GENERATExGET_VAC (0));
    putBIT (16, mGENERATExDOOPENxPTR, bitRHS);
    putBIT (16, mGENERATExDOINDEX + 2 * (COREHALFWORD (mGENERATExADOPTR)),
            bitRHS);
    bitRHS->inUse = 0;
  }
  // TMP, BACKUP_REG(PTR) = REG(PTR); (5893)
  {
    descriptor_t *bitRHS = getBIT (
        16, getFIXED (mIND_STACK) + 73 * (COREHALFWORD (mGENERATExDOOPENxPTR))
                + 46 + 2 * (0));
    int32_t numberRHS;
    numberRHS = bitToFixed (bitRHS);
    putFIXED (mTMP, numberRHS);
    putBIT (16,
            getFIXED (mIND_STACK) + 73 * (COREHALFWORD (mGENERATExDOOPENxPTR))
                + 20 + 2 * (0),
            bitRHS);
    bitRHS->inUse = 0;
  }
  // IF STOP < 0 THEN (5894)
  if (1 & (xLT (getFIXED (mGENERATExDOOPENxSTOP), 0)))
    // DORANGE(ADOPTR) = SET_ARRAY_SIZE(-STOP); (5895)
    {
      descriptor_t *bitRHS
          = (putBITp (16, mGENERATExSET_ARRAY_SIZExOP,
                      fixedToBit (32, (int32_t)(xminus (
                                          getFIXED (mGENERATExDOOPENxSTOP))))),
             GENERATExSET_ARRAY_SIZE (0));
      putBIT (16, mGENERATExDORANGE + 2 * (COREHALFWORD (mGENERATExADOPTR)),
              bitRHS);
      bitRHS->inUse = 0;
    }
  // ELSE (5896)
  else
    // DORANGE(ADOPTR) = GET_INTEGER_LITERAL(STOP); (5897)
    {
      descriptor_t *bitRHS = (putFIXED (mGENERATExGET_INTEGER_LITERALxVALUE,
                                        getFIXED (mGENERATExDOOPENxSTOP)),
                              GENERATExGET_INTEGER_LITERAL (0));
      putBIT (16, mGENERATExDORANGE + 2 * (COREHALFWORD (mGENERATExADOPTR)),
              bitRHS);
      bitRHS->inUse = 0;
    }
  // IF STEP = 1 & NEW_INSTRUCTIONS THEN (5898)
  if (1
      & (xAND (xEQ (getFIXED (mGENERATExDOOPENxSTEP), 1),
               BYTE0 (mNEW_INSTRUCTIONS))))
    // DO; (5899)
    {
    rs1:;
      // TYPE(PTR) = DINTEGER; (5900)
      {
        descriptor_t *bitRHS = getBIT (8, mDINTEGER);
        putBIT (16,
                getFIXED (mIND_STACK)
                    + 73 * (COREHALFWORD (mGENERATExDOOPENxPTR)) + 50
                    + 2 * (0),
                bitRHS);
        bitRHS->inUse = 0;
      }
      // BIX_CNTR = BIX_CNTR + 1; (5901)
      {
        int32_t numberRHS
            = (int32_t)(xadd (COREHALFWORD (mGENERATExBIX_CNTR), 1));
        descriptor_t *bitRHS;
        bitRHS = fixedToBit (32, (int32_t)(numberRHS));
        putBIT (16, mGENERATExBIX_CNTR, bitRHS);
        bitRHS->inUse = 0;
      }
      // IF STOP < 0 THEN (5902)
      if (1 & (xLT (getFIXED (mGENERATExDOOPENxSTOP), 0)))
        // DO; (5903)
        {
        rs1s1:;
          // CALL LOAD_NUM(TMP, START, 1); (5904)
          {
            putBITp (16, mGENERATExLOAD_NUMxR,
                     fixedToBit (32, (int32_t)(getFIXED (mTMP))));
            putFIXED (mGENERATExLOAD_NUMxNUM,
                      getFIXED (mGENERATExDOOPENxSTART));
            putBITp (1, mGENERATExLOAD_NUMxFLAG,
                     fixedToBit (32, (int32_t)(1)));
            GENERATExLOAD_NUM (0);
          }
          // CALL CHECK_ADDR_NEST(-1, DORANGE(ADOPTR)); (5905)
          {
            putBITp (16, mGENERATExCHECK_ADDR_NESTxTR,
                     fixedToBit (32, (int32_t)(-1)));
            putBITp (16, mGENERATExCHECK_ADDR_NESTxOP,
                     getBIT (16, mGENERATExDORANGE
                                     + 2 * COREHALFWORD (mGENERATExADOPTR)));
            GENERATExCHECK_ADDR_NEST (0);
          }
          // CALL EMITOP(IHL, TMP, DORANGE(ADOPTR)); (5906)
          {
            putBITp (16, mGENERATExEMITOPxINST, getBIT (8, mIHL));
            putBITp (16, mGENERATExEMITOPxXREG,
                     fixedToBit (32, (int32_t)(getFIXED (mTMP))));
            putBITp (16, mGENERATExEMITOPxOP,
                     getBIT (16, mGENERATExDORANGE
                                     + 2 * COREHALFWORD (mGENERATExADOPTR)));
            GENERATExEMITOP (0);
          }
          // CONST(PTR) = -1; (5907)
          {
            int32_t numberRHS = (int32_t)(-1);
            putFIXED (getFIXED (mIND_STACK)
                          + 73 * (COREHALFWORD (mGENERATExDOOPENxPTR)) + 0
                          + 4 * (0),
                      numberRHS);
          }
          // CALL INCORPORATE(PTR); (5908)
          {
            putBITp (16, mGENERATExINCORPORATExOP,
                     getBIT (16, mGENERATExDOOPENxPTR));
            GENERATExINCORPORATE (0);
          }
        es1s1:;
        } // End of DO block
      // ELSE (5909)
      else
        // CALL LOAD_NUM(TMP, SHL(START,16) + STOP - 1, 9); (5910)
        {
          putBITp (16, mGENERATExLOAD_NUMxR,
                   fixedToBit (32, (int32_t)(getFIXED (mTMP))));
          putFIXED (
              mGENERATExLOAD_NUMxNUM,
              xsubtract (xadd (SHL (getFIXED (mGENERATExDOOPENxSTART), 16),
                               getFIXED (mGENERATExDOOPENxSTOP)),
                         1));
          putBITp (1, mGENERATExLOAD_NUMxFLAG, fixedToBit (32, (int32_t)(9)));
          GENERATExLOAD_NUM (0);
        }
      // R_TYPE(TMP) = DINTEGER; (5911)
      {
        descriptor_t *bitRHS = getBIT (8, mDINTEGER);
        putBIT (8, mR_TYPE + 1 * (getFIXED (mTMP)), bitRHS);
        bitRHS->inUse = 0;
      }
    es1:;
    } // End of DO block
  // ELSE (5912)
  else
    // CALL LOAD_NUM(TMP, START, 1); (5913)
    {
      putBITp (16, mGENERATExLOAD_NUMxR,
               fixedToBit (32, (int32_t)(getFIXED (mTMP))));
      putFIXED (mGENERATExLOAD_NUMxNUM, getFIXED (mGENERATExDOOPENxSTART));
      putBITp (1, mGENERATExLOAD_NUMxFLAG, fixedToBit (32, (int32_t)(1)));
      GENERATExLOAD_NUM (0);
    }
  // CALL SET_LABEL(DOLABEL(ADOPTR), 1); (5914)
  {
    putBITp (
        16, mGENERATExSET_LABELxSTMTNO,
        getBIT (16, mGENERATExDOLABEL + 2 * COREHALFWORD (mGENERATExADOPTR)));
    putBITp (1, mGENERATExSET_LABELxFLAG1, fixedToBit (32, (int32_t)(1)));
    GENERATExSET_LABEL (0);
  }
  // CALL SET_USAGE(TMP, AIDX, PTR); (5915)
  {
    putBITp (16, mGENERATExSET_USAGExR,
             fixedToBit (32, (int32_t)(getFIXED (mTMP))));
    putBITp (16, mGENERATExSET_USAGExRFORM, getBIT (8, mAIDX));
    putFIXED (mGENERATExSET_USAGExRVAR, COREHALFWORD (mGENERATExDOOPENxPTR));
    GENERATExSET_USAGE (0);
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
