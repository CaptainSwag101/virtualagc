/*
  File OBJECT_GENERATORxFORM_BDxFORM_BADDR.c generated by XCOM-I, 2024-08-08
  04:32:26.
*/

#include "runtimeC.h"

int32_t
OBJECT_GENERATORxFORM_BDxFORM_BADDR (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard
      = guardReentry (reentryGuard, "OBJECT_GENERATORxFORM_BDxFORM_BADDR");
  // PTR = REAL_LABEL(PTR); (15967)
  {
    descriptor_t *bitRHS
        = (putBITp (16, mREAL_LABELxLBL,
                    getBIT (16, mOBJECT_GENERATORxFORM_BDxFORM_BADDRxPTR)),
           REAL_LABEL (0));
    putBIT (16, mOBJECT_GENERATORxFORM_BDxFORM_BADDRxPTR, bitRHS);
    bitRHS->inUse = 0;
  }
  // DEST = LOCATION(PTR) + ADDRESS_MOD + ORIGIN(CURRENT_ESDID); (15968)
  {
    int32_t numberRHS = (int32_t)(xadd (
        xadd (
            getFIXED (
                getFIXED (mLAB_LOC)
                + 8 * (COREHALFWORD (mOBJECT_GENERATORxFORM_BDxFORM_BADDRxPTR))
                + 0 + 4 * (0)),
            getFIXED (mOBJECT_GENERATORxADDRESS_MOD)),
        getFIXED (mORIGIN + 4 * getFIXED (mCURRENT_ESDID))));
    putFIXED (mOBJECT_GENERATORxFORM_BDxFORM_BADDRxDEST, numberRHS);
  }
  // ADDRESS_MOD = 0; (15969)
  {
    int32_t numberRHS = (int32_t)(0);
    putFIXED (mOBJECT_GENERATORxADDRESS_MOD, numberRHS);
  }
  // CALL FORM_EFFAD(DEST); (15970)
  {
    putFIXED (mOBJECT_GENERATORxFORM_EFFADxI,
              getFIXED (mOBJECT_GENERATORxFORM_BDxFORM_BADDRxDEST));
    OBJECT_GENERATORxFORM_EFFAD (0);
  }
  // IF LHS = SRSTYPE THEN (15971)
  if (1 & (xEQ (COREHALFWORD (mLHS), BYTE0 (mSRSTYPE))))
    // DO; (15972)
    {
    rs1:;
      // B = -1; (15973)
      {
        int32_t numberRHS = (int32_t)(-1);
        putFIXED (mB, numberRHS);
      }
      // D = DEST - CURRENT_ADDRESS - 1; (15974)
      {
        int32_t numberRHS = (int32_t)(xsubtract (
            xsubtract (getFIXED (mOBJECT_GENERATORxFORM_BDxFORM_BADDRxDEST),
                       getFIXED (mWORKSEG + 4 * getFIXED (mCURRENT_ESDID))),
            1));
        putFIXED (mD, numberRHS);
      }
      // IF D < 0 THEN (15975)
      if (1 & (xLT (getFIXED (mD), 0)))
        // D = -D; (15976)
        {
          int32_t numberRHS = (int32_t)(xminus (getFIXED (mD)));
          putFIXED (mD, numberRHS);
        }
      // ELSE (15977)
      else
        // RHS = RHS - 2; (15978)
        {
          int32_t numberRHS = (int32_t)(xsubtract (COREHALFWORD (mRHS), 2));
          descriptor_t *bitRHS;
          bitRHS = fixedToBit (32, (int32_t)(numberRHS));
          putBIT (16, mRHS, bitRHS);
          bitRHS->inUse = 0;
        }
    es1:;
    } // End of DO block
  // ELSE (15979)
  else
    // DO; (15980)
    {
    rs2:;
      // B = 3; (15981)
      {
        int32_t numberRHS = (int32_t)(3);
        putFIXED (mB, numberRHS);
      }
      // AM = 1; (15982)
      {
        int32_t numberRHS = (int32_t)(1);
        putFIXED (mAM, numberRHS);
      }
      // IF DEST >= CURRENT_ADDRESS+2 THEN (15983)
      if (1
          & (xGE (
              getFIXED (mOBJECT_GENERATORxFORM_BDxFORM_BADDRxDEST),
              xadd (getFIXED (mWORKSEG + 4 * getFIXED (mCURRENT_ESDID)), 2))))
        // D = DEST - CURRENT_ADDRESS-2; (15984)
        {
          int32_t numberRHS = (int32_t)(xsubtract (
              xsubtract (getFIXED (mOBJECT_GENERATORxFORM_BDxFORM_BADDRxDEST),
                         getFIXED (mWORKSEG + 4 * getFIXED (mCURRENT_ESDID))),
              2));
          putFIXED (mD, numberRHS);
        }
      // ELSE (15985)
      else
        // DO; (15986)
        {
        rs2s1:;
          // D = CURRENT_ADDRESS+2 - DEST; (15987)
          {
            int32_t numberRHS = (int32_t)(xsubtract (
                xadd (getFIXED (mWORKSEG + 4 * getFIXED (mCURRENT_ESDID)), 2),
                getFIXED (mOBJECT_GENERATORxFORM_BDxFORM_BADDRxDEST)));
            putFIXED (mD, numberRHS);
          }
          // F = 1; (15988)
          {
            int32_t numberRHS = (int32_t)(1);
            putFIXED (mF, numberRHS);
          }
        es2s1:;
        } // End of DO block
      // IF D >= PCRELMAX THEN (15989)
      if (1
          & (xGE (
              getFIXED (mD),
              COREHALFWORD (mOBJECT_GENERATORxFORM_BDxFORM_BADDRxPCRELMAX))))
        // DO; (15990)
        {
        rs2s2:;
          // D = DEST; (15991)
          {
            int32_t numberRHS = (int32_t)(getFIXED (
                mOBJECT_GENERATORxFORM_BDxFORM_BADDRxDEST));
            putFIXED (mD, numberRHS);
          }
          // AM, F = 0; (15992)
          {
            int32_t numberRHS = (int32_t)(0);
            putFIXED (mAM, numberRHS);
            putFIXED (mF, numberRHS);
          }
          // IF CURRENT_ESDID<= PROCLIMIT THEN (15993)
          if (1 & (xLE (getFIXED (mCURRENT_ESDID), COREHALFWORD (mPROCLIMIT))))
            // DO; (15994)
            {
            rs2s2s1:;
              // IF LOCATION_LINK(PTR) < 0 THEN (15995)
              if (1
                  & (xLT (
                      COREHALFWORD (
                          getFIXED (mLAB_LOC)
                          + 8
                                * (COREHALFWORD (
                                    mOBJECT_GENERATORxFORM_BDxFORM_BADDRxPTR))
                          + 6 + 2 * (0)),
                      0)))
                // CALL EMIT_RLD(CURRENT_ESDID+SDELTA, CURRENT_ADDRESS+1);
                // (15996)
                {
                  putBITp (16, mOBJECT_GENERATORxEMIT_RLDxREL,
                           fixedToBit (
                               32, (int32_t)(xadd (getFIXED (mCURRENT_ESDID),
                                                   COREHALFWORD (mSDELTA)))));
                  putFIXED (mOBJECT_GENERATORxEMIT_RLDxADR,
                            xadd (getFIXED (mWORKSEG
                                            + 4 * getFIXED (mCURRENT_ESDID)),
                                  1));
                  OBJECT_GENERATORxEMIT_RLD (0);
                }
              // ELSE (15997)
              else
                // CALL EMIT_RLD(CURRENT_ESDID, CURRENT_ADDRESS+1); (15998)
                {
                  putBITp (
                      16, mOBJECT_GENERATORxEMIT_RLDxREL,
                      fixedToBit (32, (int32_t)(getFIXED (mCURRENT_ESDID))));
                  putFIXED (mOBJECT_GENERATORxEMIT_RLDxADR,
                            xadd (getFIXED (mWORKSEG
                                            + 4 * getFIXED (mCURRENT_ESDID)),
                                  1));
                  OBJECT_GENERATORxEMIT_RLD (0);
                }
            es2s2s1:;
            } // End of DO block
          // ELSE (15999)
          else
            // DO; (16000)
            {
            rs2s2s2:;
              // IF LOCATION_LINK(PTR)<0 THEN (16001)
              if (1
                  & (xLT (
                      COREHALFWORD (
                          getFIXED (mLAB_LOC)
                          + 8
                                * (COREHALFWORD (
                                    mOBJECT_GENERATORxFORM_BDxFORM_BADDRxPTR))
                          + 6 + 2 * (0)),
                      0)))
                // CALL EMIT_RLD(CURRENT_ESDID,CURRENT_ADDRESS+1); (16002)
                {
                  putBITp (
                      16, mOBJECT_GENERATORxEMIT_RLDxREL,
                      fixedToBit (32, (int32_t)(getFIXED (mCURRENT_ESDID))));
                  putFIXED (mOBJECT_GENERATORxEMIT_RLDxADR,
                            xadd (getFIXED (mWORKSEG
                                            + 4 * getFIXED (mCURRENT_ESDID)),
                                  1));
                  OBJECT_GENERATORxEMIT_RLD (0);
                }
              // ELSE (16003)
              else
                // CALL EMIT_RLD(CURRENT_ESDID-SDELTA,CURRENT_ADDRESS+1);
                // (16004)
                {
                  putBITp (16, mOBJECT_GENERATORxEMIT_RLDxREL,
                           fixedToBit (32, (int32_t)(xsubtract (
                                               getFIXED (mCURRENT_ESDID),
                                               COREHALFWORD (mSDELTA)))));
                  putFIXED (mOBJECT_GENERATORxEMIT_RLDxADR,
                            xadd (getFIXED (mWORKSEG
                                            + 4 * getFIXED (mCURRENT_ESDID)),
                                  1));
                  OBJECT_GENERATORxEMIT_RLD (0);
                }
            es2s2s2:;
            } // End of DO block
        es2s2:;
        } // End of DO block
    es2:;
    } // End of DO block
  {
    reentryGuard = 0;
    return 0;
  }
}
