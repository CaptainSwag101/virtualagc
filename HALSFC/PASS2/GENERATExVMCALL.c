/*
  File GENERATExVMCALL.c generated by XCOM-I, 2024-08-08 04:32:26.
*/

#include "runtimeC.h"

int32_t
GENERATExVMCALL (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GENERATExVMCALL");
  // D_RTL_SETUP = TRUE; (7153)
  {
    int32_t numberRHS = (int32_t)(1);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (8, mD_RTL_SETUP, bitRHS);
    bitRHS->inUse = 0;
  }
  // VSIZE = TEMPSPACE; (7154)
  {
    int32_t numberRHS = (int32_t)(getFIXED (mTEMPSPACE));
    putFIXED (mGENERATExVMCALLxVSIZE, numberRHS);
  }
  // REMOTE_ADDRS = CHECK_REMOTE(OP0); (7155)
  {
    descriptor_t *bitRHS = (putBITp (16, mGENERATExCHECK_REMOTExOP,
                                     getBIT (16, mGENERATExVMCALLxOP0)),
                            GENERATExCHECK_REMOTE (0));
    putBIT (1, mREMOTE_ADDRS, bitRHS);
    bitRHS->inUse = 0;
  }
  // REMOTE_ADDRS = CHECK_REMOTE(OP1) | REMOTE_ADDRS; (7156)
  {
    int32_t numberRHS = (int32_t)(xOR (
        bitToFixed ((putBITp (16, mGENERATExCHECK_REMOTExOP,
                              getBIT (16, mGENERATExVMCALLxOP1)),
                     GENERATExCHECK_REMOTE (0))),
        BYTE0 (mREMOTE_ADDRS)));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (1, mREMOTE_ADDRS, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF DATA_REMOTE & ( ((OP0>0) & (CSECT_TYPE(LOC(OP0),OP0)=LOCAL#D)) |
  // ((OP1>0) & (CSECT_TYPE(LOC(OP1),OP1)=LOCAL#D)) ) THEN (7157)
  if (1
      & (xAND (
          BYTE0 (mDATA_REMOTE),
          xOR (
              xAND (
                  xGT (COREHALFWORD (mGENERATExVMCALLxOP0), 0),
                  xEQ (bitToFixed ((
                           putBITp (
                               16, mCSECT_TYPExPTR,
                               getBIT (16, getFIXED (mIND_STACK)
                                               + 73
                                                     * (COREHALFWORD (
                                                         mGENERATExVMCALLxOP0))
                                               + 40 + 2 * (0))),
                           putBITp (16, mCSECT_TYPExOP,
                                    getBIT (16, mGENERATExVMCALLxOP0)),
                           CSECT_TYPE (0))),
                       6)),
              xAND (
                  xGT (COREHALFWORD (mGENERATExVMCALLxOP1), 0),
                  xEQ (
                      bitToFixed ((
                          putBITp (
                              16,
                              mCSECT_TYPExPTR,
                              getBIT (
                                  16,
                                  getFIXED (mIND_STACK)
                                      + 73 * (COREHALFWORD (mGENERATExVMCALLxOP1))
                                      + 40 + 2 * (0))),
                          putBITp (16, mCSECT_TYPExOP,
                                   getBIT (16, mGENERATExVMCALLxOP1)),
                          CSECT_TYPE (0))),
                      6))))))
    // REMOTE_ADDRS = TRUE; (7158)
    {
      int32_t numberRHS = (int32_t)(1);
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (1, mREMOTE_ADDRS, bitRHS);
      bitRHS->inUse = 0;
    }
  // INTCALL = INTRINSIC(FORM_VMNAME(OPCODE,OPTYPE,3*SIZE3(OPCODE),PART~=0)) &
  // ~REMOTE_ADDRS; (7159)
  {
    int32_t numberRHS = (int32_t)(xAND (
        bitToFixed ((
            putCHARACTERp (
                mINTRINSICxNAME,
                (putBITp (16, mGENERATExFORM_VMNAMExOPCODE,
                          getBIT (16, mGENERATExVMCALLxOPCODE)),
                 putBITp (8, mGENERATExFORM_VMNAMExPREC,
                          getBIT (8, mGENERATExVMCALLxOPTYPE)),
                 putBITp (
                     16, mGENERATExFORM_VMNAMExXSIZE,
                     fixedToBit (
                         32,
                         (int32_t)(xmultiply (
                             3, BYTE0 (mGENERATExSIZE3
                                       + 1
                                             * COREHALFWORD (
                                                 mGENERATExVMCALLxOPCODE)))))),
                 putBITp (8, mGENERATExFORM_VMNAMExPART,
                          fixedToBit (
                              32, (int32_t)(xNEQ (
                                      getFIXED (mGENERATExVMCALLxPART), 0)))),
                 GENERATExFORM_VMNAME (0))),
            INTRINSIC (0))),
        xNOT (BYTE0 (mREMOTE_ADDRS))));
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mGENERATExINTCALL, bitRHS);
    bitRHS->inUse = 0;
  }
  // IF OP0 > 0 THEN (7160)
  if (1 & (xGT (COREHALFWORD (mGENERATExVMCALLxOP0), 0)))
    // INTCALL = INTCALL + 2; (7161)
    {
      int32_t numberRHS
          = (int32_t)(xadd (COREHALFWORD (mGENERATExINTCALL), 2));
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (16, mGENERATExINTCALL, bitRHS);
      bitRHS->inUse = 0;
    }
  // IF OP2 > 0 THEN (7162)
  if (1 & (xGT (COREHALFWORD (mGENERATExVMCALLxOP2), 0)))
    // CALL STACK_REG_PARM(FORCE_ADDRESS(SYSARG2(INTCALL), OP2, 1)); (7163)
    {
      putBITp (
          16, mGENERATExSTACK_REG_PARMxR,
          fixedToBit (
              32,
              (int32_t)((
                  putBITp (
                      16, mGENERATExFORCE_ADDRESSxTR,
                      getBIT (8, mSYSARG2
                                     + 1 * COREHALFWORD (mGENERATExINTCALL))),
                  putBITp (16, mGENERATExFORCE_ADDRESSxOP,
                           getBIT (16, mGENERATExVMCALLxOP2)),
                  putBITp (1, mGENERATExFORCE_ADDRESSxFLAG,
                           fixedToBit (32, (int32_t)(1))),
                  GENERATExFORCE_ADDRESS (0)))));
      GENERATExSTACK_REG_PARM (0);
    }
  // IF OP1 > 0 THEN (7164)
  if (1 & (xGT (COREHALFWORD (mGENERATExVMCALLxOP1), 0)))
    // CALL STACK_REG_PARM(FORCE_ADDRESS(SYSARG1(INTCALL), OP1, 1)); (7165)
    {
      putBITp (
          16, mGENERATExSTACK_REG_PARMxR,
          fixedToBit (
              32,
              (int32_t)((
                  putBITp (
                      16, mGENERATExFORCE_ADDRESSxTR,
                      getBIT (8, mSYSARG1
                                     + 1 * COREHALFWORD (mGENERATExINTCALL))),
                  putBITp (16, mGENERATExFORCE_ADDRESSxOP,
                           getBIT (16, mGENERATExVMCALLxOP1)),
                  putBITp (1, mGENERATExFORCE_ADDRESSxFLAG,
                           fixedToBit (32, (int32_t)(1))),
                  GENERATExFORCE_ADDRESS (0)))));
      GENERATExSTACK_REG_PARM (0);
    }
  // IF PART ~= 0 THEN (7166)
  if (1 & (xNEQ (getFIXED (mGENERATExVMCALLxPART), 0)))
    // DO; (7167)
    {
    rs1:;
      // IF PART > 0 THEN (7168)
      if (1 & (xGT (getFIXED (mGENERATExVMCALLxPART), 0)))
        // DO; (7169)
        {
        rs1s1:;
          // IF OPCODE = XMASN THEN (7170)
          if (1
              & (xEQ (COREHALFWORD (mGENERATExVMCALLxOPCODE), BYTE0 (mXMASN))))
            // CALL FORCE_NUM(FIXARG3, PART, 8); (7171)
            {
              putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG3));
              putFIXED (mGENERATExFORCE_NUMxNUM,
                        getFIXED (mGENERATExVMCALLxPART));
              putBITp (1, mGENERATExFORCE_NUMxFLAG,
                       fixedToBit (32, (int32_t)(8)));
              GENERATExFORCE_NUM (0);
            }
          // ELSE (7172)
          else
            // IF OPCODE = XXASN THEN (7173)
            if (1
                & (xEQ (COREHALFWORD (mGENERATExVMCALLxOPCODE),
                        BYTE0 (mXXASN))))
              // DO; (7174)
              {
              rs1s1s1:;
                // CALL FORCE_NUM(FIXARG2, SHR(PART, 16)); (7175)
                {
                  putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG2));
                  putFIXED (mGENERATExFORCE_NUMxNUM,
                            SHR (getFIXED (mGENERATExVMCALLxPART), 16));
                  GENERATExFORCE_NUM (0);
                }
                // CALL STACK_REG_PARM(FIXARG2); (7176)
                {
                  putBITp (16, mGENERATExSTACK_REG_PARMxR,
                           getBIT (8, mFIXARG2));
                  GENERATExSTACK_REG_PARM (0);
                }
                // CALL FORCE_NUM(FIXARG3, PART &  65535); (7177)
                {
                  putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG3));
                  putFIXED (mGENERATExFORCE_NUMxNUM,
                            xAND (getFIXED (mGENERATExVMCALLxPART), 65535));
                  GENERATExFORCE_NUM (0);
                }
              es1s1s1:;
              } // End of DO block
            // ELSE (7178)
            else
              // CALL FORCE_NUM(FIXARG3, PART); (7179)
              {
                putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG3));
                putFIXED (mGENERATExFORCE_NUMxNUM,
                          getFIXED (mGENERATExVMCALLxPART));
                GENERATExFORCE_NUM (0);
              }
        es1s1:;
        } // End of DO block
      // ELSE (7180)
      else
        // IF PART < 0 THEN (7181)
        if (1 & (xLT (getFIXED (mGENERATExVMCALLxPART), 0)))
          // CALL FORCE_NUM(FIXARG3, 0); (7182)
          {
            putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG3));
            putFIXED (mGENERATExFORCE_NUMxNUM, 0);
            GENERATExFORCE_NUM (0);
          }
      // CALL STACK_REG_PARM(FIXARG3); (7183)
      {
        putBITp (16, mGENERATExSTACK_REG_PARMxR, getBIT (8, mFIXARG3));
        GENERATExSTACK_REG_PARM (0);
      }
    es1:;
    } // End of DO block
  // IF OP0 > 0 THEN (7184)
  if (1 & (xGT (COREHALFWORD (mGENERATExVMCALLxOP0), 0)))
    // CALL FORCE_ADDRESS(SYSARG0(INTCALL), OP0); (7185)
    {
      putBITp (16, mGENERATExFORCE_ADDRESSxTR,
               getBIT (8, mSYSARG0 + 1 * COREHALFWORD (mGENERATExINTCALL)));
      putBITp (16, mGENERATExFORCE_ADDRESSxOP,
               getBIT (16, mGENERATExVMCALLxOP0));
      GENERATExFORCE_ADDRESS (0);
    }
  // CALL DROP_PARM_STACK; (7186)
  GENERATExDROP_PARM_STACK (0);
  // IF REMOTE_ADDRS THEN (7187)
  if (1 & (bitToFixed (getBIT (1, mREMOTE_ADDRS))))
    // OPCODE = VMREMOTEOP(OPCODE); (7188)
    {
      descriptor_t *bitRHS
          = getBIT (8, mGENERATExVMREMOTEOP
                           + 1 * COREHALFWORD (mGENERATExVMCALLxOPCODE));
      putBIT (16, mGENERATExVMCALLxOPCODE, bitRHS);
      bitRHS->inUse = 0;
    }
  // DO CASE CTRSET(OPCODE); (7189)
  {
  rs2:
    switch (
        BYTE0 (mGENERATExCTRSET + 1 * COREHALFWORD (mGENERATExVMCALLxOPCODE)))
      {
      case 0:
        // DO; (7191)
        {
        rs2s1:;
          // IF ~(TEMPSPACE=3 & SIZE3(OPCODE)) THEN (7191)
          if (1
              & (xNOT (xAND (
                  xEQ (getFIXED (mTEMPSPACE), 3),
                  BYTE0 (mGENERATExSIZE3
                         + 1 * COREHALFWORD (mGENERATExVMCALLxOPCODE))))))
            // CALL FORCE_NUM(FIXARG1, TEMPSPACE); (7192)
            {
              putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG1));
              putFIXED (mGENERATExFORCE_NUMxNUM, getFIXED (mTEMPSPACE));
              GENERATExFORCE_NUM (0);
            }
        es2s1:;
        } // End of DO block
        break;
      case 1:
        // DO; (7194)
        {
        rs2s2:;
          // IF ~(ROW(0)=3 & SIZE3(OPCODE)) THEN (7194)
          if (1
              & (xNOT (xAND (
                  xEQ (COREHALFWORD (getFIXED (mIND_STACK) + 73 * (0) + 48
                                     + 2 * (0)),
                       3),
                  BYTE0 (mGENERATExSIZE3
                         + 1 * COREHALFWORD (mGENERATExVMCALLxOPCODE))))))
            // CALL FORCE_NUM(FIXARG1, ROW(0)); (7195)
            {
              putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG1));
              putFIXED (mGENERATExFORCE_NUMxNUM,
                        COREHALFWORD (getFIXED (mIND_STACK) + 73 * (0) + 48
                                      + 2 * (0)));
              GENERATExFORCE_NUM (0);
            }
          // ELSE (7196)
          else
            // VSIZE = 3; (7197)
            {
              int32_t numberRHS = (int32_t)(3);
              putFIXED (mGENERATExVMCALLxVSIZE, numberRHS);
            }
        es2s2:;
        } // End of DO block
        break;
      case 2:
        // DO; (7199)
        {
        rs2s3:;
          // DO CASE CASE2SET(OPCODE); (7199)
          {
          rs2s3s1:
            switch (BYTE0 (mGENERATExCASE2SET
                           + 1 * COREHALFWORD (mGENERATExVMCALLxOPCODE)))
              {
              case 0:
                // TMP = OP0; (7201)
                {
                  descriptor_t *bitRHS = getBIT (16, mGENERATExVMCALLxOP0);
                  putBIT (16, mGENERATExVMCALLxTMP, bitRHS);
                  bitRHS->inUse = 0;
                }
                break;
              case 1:
                // TMP = OP1; (7202)
                {
                  descriptor_t *bitRHS = getBIT (16, mGENERATExVMCALLxOP1);
                  putBIT (16, mGENERATExVMCALLxTMP, bitRHS);
                  bitRHS->inUse = 0;
                }
                break;
              case 2:
                // TMP = OP2; (7203)
                {
                  descriptor_t *bitRHS = getBIT (16, mGENERATExVMCALLxOP2);
                  putBIT (16, mGENERATExVMCALLxTMP, bitRHS);
                  bitRHS->inUse = 0;
                }
                break;
              }
          } // End of DO CASE block
          // IF ~(ROW(TMP)=3 & COLUMN(TMP)=3 & SIZE3(OPCODE)) THEN (7203)
          if (1
              & (xNOT (xAND (
                  xAND (xEQ (COREHALFWORD (
                                 getFIXED (mIND_STACK)
                                 + 73 * (COREHALFWORD (mGENERATExVMCALLxTMP))
                                 + 48 + 2 * (0)),
                             3),
                        xEQ (COREHALFWORD (
                                 getFIXED (mIND_STACK)
                                 + 73 * (COREHALFWORD (mGENERATExVMCALLxTMP))
                                 + 24 + 2 * (0)),
                             3)),
                  BYTE0 (mGENERATExSIZE3
                         + 1 * COREHALFWORD (mGENERATExVMCALLxOPCODE))))))
            // DO; (7204)
            {
            rs2s3s2:;
              // CALL FORCE_NUM(FIXARG1, ROW(TMP)); (7205)
              {
                putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG1));
                putFIXED (
                    mGENERATExFORCE_NUMxNUM,
                    COREHALFWORD (getFIXED (mIND_STACK)
                                  + 73 * (COREHALFWORD (mGENERATExVMCALLxTMP))
                                  + 48 + 2 * (0)));
                GENERATExFORCE_NUM (0);
              }
              // CALL FORCE_NUM(FIXARG2, COLUMN(TMP)); (7206)
              {
                putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG2));
                putFIXED (
                    mGENERATExFORCE_NUMxNUM,
                    COREHALFWORD (getFIXED (mIND_STACK)
                                  + 73 * (COREHALFWORD (mGENERATExVMCALLxTMP))
                                  + 24 + 2 * (0)));
                GENERATExFORCE_NUM (0);
              }
              // VSIZE = 0; (7207)
              {
                int32_t numberRHS = (int32_t)(0);
                putFIXED (mGENERATExVMCALLxVSIZE, numberRHS);
              }
            es2s3s2:;
            } // End of DO block
          // ELSE (7208)
          else
            // VSIZE = 3; (7209)
            {
              int32_t numberRHS = (int32_t)(3);
              putFIXED (mGENERATExVMCALLxVSIZE, numberRHS);
            }
        es2s3:;
        } // End of DO block
        break;
      case 3:
        // DO; (7211)
        {
        rs2s4:;
          // IF ~(ROW(OP1)=3 & ROW(OP2)=3 & COLUMN(OP2)=3 & SIZE3(OPCODE)) THEN
          // (7211)
          if (1
              & (xNOT (xAND (
                  xAND (
                      xAND (
                          xEQ (COREHALFWORD (
                                   getFIXED (mIND_STACK)
                                   + 73 * (COREHALFWORD (mGENERATExVMCALLxOP1))
                                   + 48 + 2 * (0)),
                               3),
                          xEQ (COREHALFWORD (
                                   getFIXED (mIND_STACK)
                                   + 73 * (COREHALFWORD (mGENERATExVMCALLxOP2))
                                   + 48 + 2 * (0)),
                               3)),
                      xEQ (COREHALFWORD (
                               getFIXED (mIND_STACK)
                               + 73 * (COREHALFWORD (mGENERATExVMCALLxOP2))
                               + 24 + 2 * (0)),
                           3)),
                  BYTE0 (mGENERATExSIZE3
                         + 1 * COREHALFWORD (mGENERATExVMCALLxOPCODE))))))
            // DO; (7212)
            {
            rs2s4s1:;
              // CALL FORCE_NUM(FIXARG1, ROW(OP1)); (7213)
              {
                putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG1));
                putFIXED (
                    mGENERATExFORCE_NUMxNUM,
                    COREHALFWORD (getFIXED (mIND_STACK)
                                  + 73 * (COREHALFWORD (mGENERATExVMCALLxOP1))
                                  + 48 + 2 * (0)));
                GENERATExFORCE_NUM (0);
              }
              // CALL FORCE_NUM(FIXARG2, ROW(OP2)); (7214)
              {
                putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG2));
                putFIXED (
                    mGENERATExFORCE_NUMxNUM,
                    COREHALFWORD (getFIXED (mIND_STACK)
                                  + 73 * (COREHALFWORD (mGENERATExVMCALLxOP2))
                                  + 48 + 2 * (0)));
                GENERATExFORCE_NUM (0);
              }
              // CALL FORCE_NUM(FIXARG3, COLUMN(OP2)); (7215)
              {
                putBITp (16, mGENERATExFORCE_NUMxR, getBIT (8, mFIXARG3));
                putFIXED (
                    mGENERATExFORCE_NUMxNUM,
                    COREHALFWORD (getFIXED (mIND_STACK)
                                  + 73 * (COREHALFWORD (mGENERATExVMCALLxOP2))
                                  + 24 + 2 * (0)));
                GENERATExFORCE_NUM (0);
              }
            es2s4s1:;
            } // End of DO block
          // ELSE (7216)
          else
            // VSIZE = 3; (7217)
            {
              int32_t numberRHS = (int32_t)(3);
              putFIXED (mGENERATExVMCALLxVSIZE, numberRHS);
            }
        es2s4:;
        } // End of DO block
        break;
      }
  } // End of DO CASE block
  // CALL GENLIBCALL(FORM_VMNAME(OPCODE, OPTYPE, VSIZE, PART~=0)); (7218)
  {
    putCHARACTERp (
        mGENERATExGENLIBCALLxNAME,
        (putBITp (16, mGENERATExFORM_VMNAMExOPCODE,
                  getBIT (16, mGENERATExVMCALLxOPCODE)),
         putBITp (8, mGENERATExFORM_VMNAMExPREC,
                  getBIT (8, mGENERATExVMCALLxOPTYPE)),
         putBITp (
             16, mGENERATExFORM_VMNAMExXSIZE,
             fixedToBit (32, (int32_t)(getFIXED (mGENERATExVMCALLxVSIZE)))),
         putBITp (8, mGENERATExFORM_VMNAMExPART,
                  fixedToBit (32, (int32_t)(xNEQ (
                                      getFIXED (mGENERATExVMCALLxPART), 0)))),
         GENERATExFORM_VMNAME (0)));
    GENERATExGENLIBCALL (0);
  }
  // LASTRESULT, REMOTE_ADDRS = 0; (7219)
  {
    int32_t numberRHS = (int32_t)(0);
    descriptor_t *bitRHS;
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (16, mLASTRESULT, bitRHS);
    bitRHS = fixedToBit (32, (int32_t)(numberRHS));
    putBIT (1, mREMOTE_ADDRS, bitRHS);
    bitRHS->inUse = 0;
  }
  {
    reentryGuard = 0;
    return 0;
  }
}
