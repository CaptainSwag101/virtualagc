/*
  File GENERATExMOVEREG.c generated by XCOM-I, 2024-08-09 12:39:31.
*/

#include "runtimeC.h"

int32_t
GENERATExMOVEREG (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GENERATExMOVEREG");
  // IF PACKTYPE(RTYPE) = VECMAT THEN (5253)
  if (1
      & (xEQ (BYTE0 (mPACKTYPE + 1 * COREHALFWORD (mGENERATExMOVEREGxRTYPE)),
              BYTE0 (mVECMAT))))
    // RTYPE = RTYPE&8 | SCALAR; (5254)
    {
      int32_t numberRHS = (int32_t)(xOR (
          xAND (COREHALFWORD (mGENERATExMOVEREGxRTYPE), 8), BYTE0 (mSCALAR)));
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (16, mGENERATExMOVEREGxRTYPE, bitRHS);
      bitRHS->inUse = 0;
    }
  // IF RTYPE = DSCALAR THEN (5255)
  if (1 & (xEQ (COREHALFWORD (mGENERATExMOVEREGxRTYPE), BYTE0 (mDSCALAR))))
    // DO; (5256)
    {
    rs1:;
      // CALL EMITRR(MAKE_INST(LOAD, SCALAR, RR), RT+1, RF+1); (5257)
      {
        putBITp (
            16, mGENERATExEMITRRxINST,
            (putBITp (16, mGENERATExMAKE_INSTxOPCODE,
                      getBIT (16, mGENERATExLOAD)),
             putBITp (16, mGENERATExMAKE_INSTxOPTYPE, getBIT (8, mSCALAR)),
             putBITp (16, mGENERATExMAKE_INSTxOPFORM,
                      getBIT (16, mGENERATExRR)),
             GENERATExMAKE_INST (0)));
        putBITp (
            16, mGENERATExEMITRRxREG1,
            fixedToBit (
                32, (int32_t)(xadd (COREHALFWORD (mGENERATExMOVEREGxRT), 1))));
        putBITp (
            16, mGENERATExEMITRRxREG2,
            fixedToBit (
                32, (int32_t)(xadd (COREHALFWORD (mGENERATExMOVEREGxRF), 1))));
        GENERATExEMITRR (0);
      }
      // RTYPE = SCALAR; (5258)
      {
        descriptor_t *bitRHS = getBIT (8, mSCALAR);
        putBIT (16, mGENERATExMOVEREGxRTYPE, bitRHS);
        bitRHS->inUse = 0;
      }
    es1:;
    } // End of DO block
  // CALL EMITRR(MAKE_INST(LOAD, RTYPE, RR), RT, RF); (5259)
  {
    putBITp (
        16, mGENERATExEMITRRxINST,
        (putBITp (16, mGENERATExMAKE_INSTxOPCODE, getBIT (16, mGENERATExLOAD)),
         putBITp (16, mGENERATExMAKE_INSTxOPTYPE,
                  getBIT (16, mGENERATExMOVEREGxRTYPE)),
         putBITp (16, mGENERATExMAKE_INSTxOPFORM, getBIT (16, mGENERATExRR)),
         GENERATExMAKE_INST (0)));
    putBITp (16, mGENERATExEMITRRxREG1, getBIT (16, mGENERATExMOVEREGxRT));
    putBITp (16, mGENERATExEMITRRxREG2, getBIT (16, mGENERATExMOVEREGxRF));
    GENERATExEMITRR (0);
  }
  // CALL COPY_REG_INFO(RF, RT, 2); (5260)
  {
    putBITp (16, mGENERATExCOPY_REG_INFOxRF,
             getBIT (16, mGENERATExMOVEREGxRF));
    putBITp (16, mGENERATExCOPY_REG_INFOxRT,
             getBIT (16, mGENERATExMOVEREGxRT));
    putBITp (16, mGENERATExCOPY_REG_INFOxUSG, fixedToBit (32, (int32_t)(2)));
    GENERATExCOPY_REG_INFO (0);
  }
  // IF USED THEN (5261)
  if (1 & (bitToFixed (getBIT (1, mGENERATExMOVEREGxUSED))))
    // USAGE(RF) = USAGE(RF) - 2; (5262)
    {
      int32_t numberRHS = (int32_t)(xsubtract (
          COREHALFWORD (mUSAGE + 2 * COREHALFWORD (mGENERATExMOVEREGxRF)), 2));
      descriptor_t *bitRHS;
      bitRHS = fixedToBit (32, (int32_t)(numberRHS));
      putBIT (16, mUSAGE + 2 * (COREHALFWORD (mGENERATExMOVEREGxRF)), bitRHS);
      bitRHS->inUse = 0;
    }
  {
    reentryGuard = 0;
    return 0;
  }
}
