/*
  File GET_CODE.c generated by XCOM-I, 2024-08-09 12:39:31.
*/

#include "runtimeC.h"

int32_t
GET_CODE (int reset)
{
  static int reentryGuard = 0;
  if (reset)
    {
      reentryGuard = 0;
      return (int32_t)0;
    }
  reentryGuard = guardReentry (reentryGuard, "GET_CODE");
  // IF CTR >= CODE_BASE THEN (1042)
  if (1 & (xGE (getFIXED (mGET_CODExCTR), getFIXED (mCODE_BASE))))
    // IF CTR < CODE_LIM THEN (1043)
    if (1 & (xLT (getFIXED (mGET_CODExCTR), getFIXED (mCODE_LIM))))
      // RETURN CTR - CODE_BASE; (1044)
      {
        reentryGuard = 0;
        return xsubtract (getFIXED (mGET_CODExCTR), getFIXED (mCODE_BASE));
      }
  // FILE(CODE_FILE, CODE_BLK) = CODE; (1045)
  {
    lFILE (3, getFIXED (mCODE_BLK), ADDR (NULL, 0, "CODE", 0));
  }
  // CODE_BLK = CTR / CODE_SIZE; (1046)
  {
    int32_t numberRHS = (int32_t)(xdivide (getFIXED (mGET_CODExCTR), 400));
    putFIXED (mCODE_BLK, numberRHS);
  }
  // CODE_BASE = CODE_BLK * CODE_SIZE; (1047)
  {
    int32_t numberRHS = (int32_t)(xmultiply (getFIXED (mCODE_BLK), 400));
    putFIXED (mCODE_BASE, numberRHS);
  }
  // CODE_LIM = CODE_BASE + CODE_SIZE; (1048)
  {
    int32_t numberRHS = (int32_t)(xadd (getFIXED (mCODE_BASE), 400));
    putFIXED (mCODE_LIM, numberRHS);
  }
  // IF CODE_BLK <= CODE_MAX THEN (1049)
  if (1 & (xLE (getFIXED (mCODE_BLK), getFIXED (mCODE_MAX))))
    // CODE = FILE(CODE_FILE, CODE_BLK); (1050)
    {
      rFILE (ADDR (NULL, 0, "CODE", 0), 3, getFIXED (mCODE_BLK));
    }
  // ELSE (1051)
  else
    // DO; (1052)
    {
    rs1:;
      // DO I = 0 TO CODE_SIZ; (1053)
      {
        int32_t from20, to20, by20;
        from20 = 0;
        to20 = 399;
        by20 = 1;
        for (putFIXED (mGET_CODExI, from20); getFIXED (mGET_CODExI) <= to20;
             putFIXED (mGET_CODExI, getFIXED (mGET_CODExI) + by20))
          {
            // CODE(I) = 0; (1054)
            {
              int32_t numberRHS = (int32_t)(0);
              putFIXED (mCODE + 4 * (getFIXED (mGET_CODExI)), numberRHS);
            }
          }
      } // End of DO for-loop block
      // DO CODE_MAX = CODE_MAX + 1 TO CODE_BLK - 1; (1055)
      {
        int32_t from21, to21, by21;
        from21 = xadd (getFIXED (mCODE_MAX), 1);
        to21 = xsubtract (getFIXED (mCODE_BLK), 1);
        by21 = 1;
        for (putFIXED (mCODE_MAX, from21); getFIXED (mCODE_MAX) <= to21;
             putFIXED (mCODE_MAX, getFIXED (mCODE_MAX) + by21))
          {
            // FILE(CODE_FILE, CODE_MAX) = CODE; (1056)
            {
              lFILE (3, getFIXED (mCODE_MAX), ADDR (NULL, 0, "CODE", 0));
            }
          }
      } // End of DO for-loop block
    es1:;
    } // End of DO block
  // RETURN CTR - CODE_BASE; (1057)
  {
    reentryGuard = 0;
    return xsubtract (getFIXED (mGET_CODExCTR), getFIXED (mCODE_BASE));
  }
}
